import{K as e,P as m,aP as U,aQ as q,aR as F,r as D,aS as N,a4 as A,G as W,aT as G,a0 as v}from"./index-33b738f6.js";function P({progress:t=0,delay:r=0,duration:a=0,className:n}){return e.jsx("div",{className:m("w-full h-1 bg-neutral-30 overflow-hidden flex items-center rounded-lg my-1",n),children:e.jsx("div",{className:"transition-[width] h-full bg-success-500 rounded-lg",style:{width:`${t}%`,transitionDelay:`${r}ms`,transitionDuration:`${a}ms`}})})}var M={exports:{}};(function(t,r){(function(a,n){typeof U=="function"?t.exports=n():a.pluralize=n()})(q,function(){var a=[],n=[],d={},$={},p={};function g(s){return typeof s=="string"?new RegExp("^"+s+"$","i"):s}function f(s,i){return s===i?i:s===s.toLowerCase()?i.toLowerCase():s===s.toUpperCase()?i.toUpperCase():s[0]===s[0].toUpperCase()?i.charAt(0).toUpperCase()+i.substr(1).toLowerCase():i.toLowerCase()}function b(s,i){return s.replace(/\$(\d{1,2})/g,function(x,u){return i[u]||""})}function c(s,i){return s.replace(i[0],function(x,u){var h=b(i[1],arguments);return f(x===""?s[u-1]:x,h)})}function o(s,i,x){if(!s.length||d.hasOwnProperty(s))return i;for(var u=x.length;u--;){var h=x[u];if(h[0].test(i))return c(i,h)}return i}function y(s,i,x){return function(u){var h=u.toLowerCase();return i.hasOwnProperty(h)?f(u,h):s.hasOwnProperty(h)?f(u,s[h]):o(h,u,x)}}function w(s,i,x,u){return function(h){var k=h.toLowerCase();return i.hasOwnProperty(k)?!0:s.hasOwnProperty(k)?!1:o(k,k,x)===k}}function l(s,i,x){var u=i===1?l.singular(s):l.plural(s);return(x?i+" ":"")+u}return l.plural=y(p,$,a),l.isPlural=w(p,$,a),l.singular=y($,p,n),l.isSingular=w($,p,n),l.addPluralRule=function(s,i){a.push([g(s),i])},l.addSingularRule=function(s,i){n.push([g(s),i])},l.addUncountableRule=function(s){if(typeof s=="string"){d[s.toLowerCase()]=!0;return}l.addPluralRule(s,"$0"),l.addSingularRule(s,"$0")},l.addIrregularRule=function(s,i){i=i.toLowerCase(),s=s.toLowerCase(),p[s]=i,$[i]=s},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["passerby","passersby"]].forEach(function(s){return l.addIrregularRule(s[0],s[1])}),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|t[lm]as|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/\b((?:tit)?m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach(function(s){return l.addPluralRule(s[0],s[1])}),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/\b((?:tit)?m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i,"$1"],[/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach(function(s){return l.addSingularRule(s[0],s[1])}),["adulthood","advice","agenda","aid","aircraft","alcohol","ammo","analytics","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","firmware","flounder","fun","gallows","garbage","graffiti","hardware","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","mud","manga","news","only","personnel","pike","plankton","pliers","police","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","software","species","staff","swine","tennis","traffic","transportation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/pok[eÃ©]mon$/i,/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(l.addUncountableRule),l})})(M);var H=M.exports;const K=F(H),j=function({children:r,setRefTasksOverview:a,tasks:n}){const{models:d,taskCompleted:$,taskTotal:p,batchesTotal:g,batchesCompleted:f}=D.useMemo(()=>{const b=Object.entries(n),c=b.length;let o=0,y=0,w=0;return b.forEach(([l,{completed:s,total:i}])=>{o=s===i?o+1:o,y+=i,w+=s}),{models:b,taskCompleted:o,taskTotal:c,batchesTotal:y,batchesCompleted:w}},[n]);return e.jsx("div",{className:"text-prose",ref:a,children:r({models:d,completed:$,total:p,totalBatches:g,completedBatches:f})})};function Q({className:t,headline:r,environment:a,planState:n,completed:d,total:$,updatedAt:p,updateType:g,completedBatches:f,totalBatches:b}){return e.jsx(R,{className:t,children:e.jsxs(z,{children:[e.jsxs(S,{children:[e.jsx(I,{children:e.jsx(B,{headline:r,environment:a,planState:n})}),e.jsxs(L,{children:[e.jsx(C,{completed:d,total:$,unit:"task"}),e.jsx(T,{}),e.jsx(C,{completed:f,total:b,unit:"batches"}),e.jsx(T,{}),e.jsx(O,{completed:f,total:b})]})]}),e.jsx(P,{progress:N(f,b)}),p!=null&&e.jsx(X,{updatedAt:p,updateType:g})]})})}function _({models:t,className:r,changes:a,showBatches:n=!0,showProgress:d=!0,showVirtualUpdate:$=!1}){const{changesAdded:p,changesRemoved:g,changesModifiedDirect:f,changesModifiedIndirect:b}=D.useMemo(()=>{const c=a==null?void 0:a.modified;return{changesAdded:(a==null?void 0:a.added)??[],changesRemoved:(a==null?void 0:a.removed)??[],changesModifiedMetadata:(c==null?void 0:c.metadata)??[],changesModifiedIndirect:((c==null?void 0:c.indirect)??[]).map(({model_name:o})=>o),changesModifiedDirect:((c==null?void 0:c.direct)??[]).map(({model_name:o})=>o)}},[a]);return e.jsx(R,{className:r,children:e.jsx(E,{models:t,children:([c,o])=>e.jsxs(z,{children:[e.jsxs(S,{children:[e.jsxs(I,{children:[o.interval!=null&&e.jsx(J,{start:o.interval[0],end:o.interval[1]}),e.jsx(Y,{modelName:c,changeType:Z({modelName:c,changesAdded:p,changesRemoved:g,changesModifiedDirect:f,changesModifiedIndirect:b})})]}),e.jsxs(L,{children:[n&&e.jsx(C,{completed:o.completed,total:o.total,unit:"batch"}),e.jsx(T,{}),d&&e.jsx(e.Fragment,{children:o.end==null||o.start==null?e.jsx(O,{total:o.total,completed:o.completed}):e.jsx(V,{start:o.start,end:o.end})}),$&&e.jsx("span",{className:"inline-block whitespace-nowrap font-bold ml-2",children:"Updated"})]})]}),d?e.jsx(P,{progress:N(o.completed,o.total)}):e.jsx(A,{className:"my-1 border-neutral-200 opacity-50"})]})})})}function R({className:t,children:r}){return e.jsx("div",{className:m("my-3 mx-4 max-h-[50vh] overflow-auto scrollbar scrollbar--vertical scrollbar--horizontal",t),children:r})}function z({className:t,children:r}){return e.jsx("div",{className:m("px-4",t),children:r})}function E({className:t,models:r,children:a}){return e.jsx("ul",{className:m("bg-neutral-10 rounded-lg py-4 overflow-auto text-prose scrollbar scrollbar--vertical scrollbar--horizontal",t),children:r.map(([n,d])=>e.jsx("li",{className:"mb-2",children:a([n,d])},n))})}function S({className:t,children:r}){return e.jsx("div",{className:m("flex sm:justify-between sm:items-baseline text-xs",t),children:r})}function B({className:t,headline:r,environment:a,planState:n}){return e.jsxs("span",{className:m("flex items-center",t),children:[e.jsx("span",{className:"block whitespace-nowrap text-sm font-medium",children:r}),e.jsx("small",{className:"inline-block ml-1 px-2 py-[0.125rem] text-xs font-bold bg-neutral-10 rounded-md",children:a}),n!==W.Init&&e.jsxs(e.Fragment,{children:[e.jsx(T,{}),e.jsx("small",{className:"ml-1",children:n})]})]})}function I({className:t,children:r}){return e.jsx("div",{className:m("flex mr-6 w-full sm:w-auto overflow-hidden",t),children:r})}function L({className:t,children:r}){return e.jsx("div",{className:m("flex items-center",t),children:r})}function J({className:t,start:r,end:a}){return e.jsxs("span",{className:m("inline-block mr-2 whitespace-nowrap font-mono",t),children:[r,"Â âÂ ",a]})}function C({className:t,total:r,completed:a,unit:n}){return e.jsxs("span",{className:m("inline-block whitespace-nowrap",t),children:[a," of ",r," ",K(n,r)]})}function T({className:t}){return e.jsx("span",{className:m("inline-block mx-2",t),children:"|"})}function O({className:t,total:r,completed:a}){return e.jsxs("span",{className:m("inline-block whitespace-nowrap font-bold",t),children:[Math.ceil(N(a,r)),"%"]})}function V({className:t,start:r,end:a}){return e.jsx("span",{className:m("inline-block whitespace-nowrap font-bold",t),children:`${Math.floor((a-r)/6e4)}:${String(Math.ceil((a-r)/1e3%60)).padStart(2,"0")}`})}function X({updateType:t,updatedAt:r}){return e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsxs("small",{className:"text-xs",children:[e.jsx("b",{children:"Update Type:"}),e.jsx("span",{className:"inline-block ml-1",children:t})]}),e.jsxs("small",{className:"text-xs",children:[e.jsx("b",{children:"Last Update:"}),e.jsx("span",{className:"inline-block ml-1",children:G(new Date(r),"yyyy-mm-dd hh-mm-ss",!1)})]})]})}function Y({className:t,modelName:r,changeType:a}){return e.jsx("span",{className:m("font-bold whitespace-nowrap",a===v.Add&&"text-success-600  dark:text-success-500",a===v.Remove&&"text-danger-500",a===v.Direct&&"text-secondary-500 dark:text-primary-500",a===v.Indirect&&"text-warning-500",a===v.Metadata&&"text-prose",t),children:r})}j.Block=R;j.Summary=Q;j.Details=_;j.Task=z;j.Tasks=E;const se=j;function Z({modelName:t,changesAdded:r,changesRemoved:a,changesModifiedDirect:n,changesModifiedIndirect:d}){return r.includes(t)?v.Add:a.includes(t)?v.Remove:n.includes(t)?v.Direct:d.includes(t)?v.Indirect:v.Metadata}export{se as T,K as p};
