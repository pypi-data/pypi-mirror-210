import{r as l,l as Y,v as de,o as j,D as Q,I as Z,y as ee,X as re,R as E,as as Te,at as ue,a as T,O as ae,M as H,N as le,p as Se,q as Ae,t as Oe,au as De,aL as Fe,k as Me,b as se,u as Le,g as Ie,K as n,P as N,a0 as m,aM as _e,z as Ge,aB as S,a4 as oe,aN as We,aO as ze,aF as Be,av as me,x as He,G as ie,aH as Ue,J as qe,aC as pe,aD as fe,ay as q}from"./index-33b738f6.js";function Je({title:e,titleId:t,...r},a){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},r),e?l.createElement("title",{id:t},e):null,l.createElement("path",{fillRule:"evenodd",d:"M12 5.25c1.213 0 2.415.046 3.605.135a3.256 3.256 0 013.01 3.01c.044.583.077 1.17.1 1.759L17.03 8.47a.75.75 0 10-1.06 1.06l3 3a.75.75 0 001.06 0l3-3a.75.75 0 00-1.06-1.06l-1.752 1.751c-.023-.65-.06-1.296-.108-1.939a4.756 4.756 0 00-4.392-4.392 49.422 49.422 0 00-7.436 0A4.756 4.756 0 003.89 8.282c-.017.224-.033.447-.046.672a.75.75 0 101.497.092c.013-.217.028-.434.044-.651a3.256 3.256 0 013.01-3.01c1.19-.09 2.392-.135 3.605-.135zm-6.97 6.22a.75.75 0 00-1.06 0l-3 3a.75.75 0 101.06 1.06l1.752-1.751c.023.65.06 1.296.108 1.939a4.756 4.756 0 004.392 4.392 49.413 49.413 0 007.436 0 4.756 4.756 0 004.392-4.392c.017-.223.032-.447.046-.672a.75.75 0 00-1.497-.092c-.013.217-.028.434-.044.651a3.256 3.256 0 01-3.01 3.01 47.953 47.953 0 01-7.21 0 3.256 3.256 0 01-3.01-3.01 47.759 47.759 0 01-.1-1.759L6.97 15.53a.75.75 0 001.06-1.06l-3-3z",clipRule:"evenodd"}))}const Ke=l.forwardRef(Je),xe=Ke;function Ve({title:e,titleId:t,...r},a){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},r),e?l.createElement("title",{id:t},e):null,l.createElement("path",{fillRule:"evenodd",d:"M3.75 12a.75.75 0 01.75-.75h15a.75.75 0 010 1.5h-15a.75.75 0 01-.75-.75z",clipRule:"evenodd"}))}const Xe=l.forwardRef(Ve),Ye=Xe;function Qe({container:e,accept:t,walk:r,enabled:a=!0}){let s=l.useRef(t),c=l.useRef(r);l.useEffect(()=>{s.current=t,c.current=r},[t,r]),Y(()=>{if(!e||!a)return;let i=de(e);if(!i)return;let d=s.current,u=c.current,g=Object.assign(A=>d(A),{acceptNode:d}),R=i.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,g,!1);for(;R.nextNode();)u(R.currentNode)},[e,a,s,c])}function he(e={},t=null,r=[]){for(let[a,s]of Object.entries(e))ge(r,ve(t,a),s);return r}function ve(e,t){return e?e+"["+t+"]":t}function ge(e,t,r){if(Array.isArray(r))for(let[a,s]of r.entries())ge(e,ve(t,a.toString()),s);else r instanceof Date?e.push([t,r.toISOString()]):typeof r=="boolean"?e.push([t,r?"1":"0"]):typeof r=="string"?e.push([t,r]):typeof r=="number"?e.push([t,`${r}`]):r==null?e.push([t,""]):he(r,t,e)}function Ze(e){var t;let r=(t=e==null?void 0:e.form)!=null?t:e.closest("form");if(r){for(let a of r.elements)if(a.tagName==="INPUT"&&a.type==="submit"||a.tagName==="BUTTON"&&a.type==="submit"||a.nodeName==="INPUT"&&a.type==="image"){a.click();return}}}function er(e,t,r){let[a,s]=l.useState(r),c=e!==void 0,i=l.useRef(c),d=l.useRef(!1),u=l.useRef(!1);return c&&!i.current&&!d.current?(d.current=!0,i.current=c,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!c&&i.current&&!u.current&&(u.current=!0,i.current=c,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[c?e:a,j(g=>(c||s(g),t==null?void 0:t(g)))]}let be=l.createContext(null);function we(){let e=l.useContext(be);if(e===null){let t=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,we),t}return e}function je(){let[e,t]=l.useState([]);return[e.length>0?e.join(" "):void 0,l.useMemo(()=>function(r){let a=j(c=>(t(i=>[...i,c]),()=>t(i=>{let d=i.slice(),u=d.indexOf(c);return u!==-1&&d.splice(u,1),d}))),s=l.useMemo(()=>({register:a,slot:r.slot,name:r.name,props:r.props}),[a,r.slot,r.name,r.props]);return E.createElement(be.Provider,{value:s},r.children)},[t])]}let rr="label";function tr(e,t){let r=Z(),{id:a=`headlessui-label-${r}`,passive:s=!1,...c}=e,i=we(),d=ee(t);Y(()=>i.register(a),[a,i.register]);let u={ref:d,...i.props,id:a};return s&&("onClick"in u&&(delete u.htmlFor,delete u.onClick),"onClick"in c&&delete c.onClick),re({ourProps:u,theirProps:c,slot:i.slot||{},defaultTag:rr,name:i.name||"Label"})}let nr=Q(tr),ar=Object.assign(nr,{});var lr=(e=>(e[e.RegisterOption=0]="RegisterOption",e[e.UnregisterOption=1]="UnregisterOption",e))(lr||{});let sr={[0](e,t){let r=[...e.options,{id:t.id,element:t.element,propsRef:t.propsRef}];return{...e,options:Ie(r,a=>a.element.current)}},[1](e,t){let r=e.options.slice(),a=e.options.findIndex(s=>s.id===t.id);return a===-1?e:(r.splice(a,1),{...e,options:r})}},te=l.createContext(null);te.displayName="RadioGroupDataContext";function Ne(e){let t=l.useContext(te);if(t===null){let r=new Error(`<${e} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Ne),r}return t}let ne=l.createContext(null);ne.displayName="RadioGroupActionsContext";function Re(e){let t=l.useContext(ne);if(t===null){let r=new Error(`<${e} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Re),r}return t}function or(e,t){return Le(t.type,sr,e,t)}let ir="div";function cr(e,t){let r=Z(),{id:a=`headlessui-radiogroup-${r}`,value:s,defaultValue:c,form:i,name:d,onChange:u,by:g=(o,x)=>o===x,disabled:R=!1,...A}=e,k=j(typeof g=="string"?(o,x)=>{let f=g;return(o==null?void 0:o[f])===(x==null?void 0:x[f])}:g),[O,D]=l.useReducer(or,{options:[]}),h=O.options,[G,K]=je(),[P,F]=ue(),M=l.useRef(null),V=ee(M,t),[v,W]=er(s,u,c),b=l.useMemo(()=>h.find(o=>!o.propsRef.current.disabled),[h]),C=l.useMemo(()=>h.some(o=>k(o.propsRef.current.value,v)),[h,v]),w=j(o=>{var x;if(R||k(o,v))return!1;let f=(x=h.find($=>k($.propsRef.current.value,o)))==null?void 0:x.propsRef.current;return f!=null&&f.disabled?!1:(W==null||W(o),!0)});Qe({container:M.current,accept(o){return o.getAttribute("role")==="radio"?NodeFilter.FILTER_REJECT:o.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(o){o.setAttribute("role","none")}});let X=j(o=>{let x=M.current;if(!x)return;let f=de(x),$=h.filter(p=>p.propsRef.current.disabled===!1).map(p=>p.element.current);switch(o.key){case T.Enter:Ze(o.currentTarget);break;case T.ArrowLeft:case T.ArrowUp:if(o.preventDefault(),o.stopPropagation(),ae($,H.Previous|H.WrapAround)===le.Success){let p=h.find(L=>L.element.current===(f==null?void 0:f.activeElement));p&&w(p.propsRef.current.value)}break;case T.ArrowRight:case T.ArrowDown:if(o.preventDefault(),o.stopPropagation(),ae($,H.Next|H.WrapAround)===le.Success){let p=h.find(L=>L.element.current===(f==null?void 0:f.activeElement));p&&w(p.propsRef.current.value)}break;case T.Space:{o.preventDefault(),o.stopPropagation();let p=h.find(L=>L.element.current===(f==null?void 0:f.activeElement));p&&w(p.propsRef.current.value)}break}}),y=j(o=>(D({type:0,...o}),()=>D({type:1,id:o.id}))),z=l.useMemo(()=>({value:v,firstOption:b,containsCheckedOption:C,disabled:R,compare:k,...O}),[v,b,C,R,k,O]),ke=l.useMemo(()=>({registerOption:y,change:w}),[y,w]),Pe={ref:V,id:a,role:"radiogroup","aria-labelledby":G,"aria-describedby":P,onKeyDown:X},Ce=l.useMemo(()=>({value:v}),[v]),B=l.useRef(null),$e=Se();return l.useEffect(()=>{B.current&&c!==void 0&&$e.addEventListener(B.current,"reset",()=>{w(c)})},[B,w]),E.createElement(F,{name:"RadioGroup.Description"},E.createElement(K,{name:"RadioGroup.Label"},E.createElement(ne.Provider,{value:ke},E.createElement(te.Provider,{value:z},d!=null&&v!=null&&he({[d]:v}).map(([o,x],f)=>E.createElement(Ae,{features:Oe.Hidden,ref:f===0?$=>{var p;B.current=(p=$==null?void 0:$.closest("form"))!=null?p:null}:void 0,...De({key:o,as:"input",type:"radio",checked:x!=null,hidden:!0,readOnly:!0,form:i,name:o,value:x})})),re({ourProps:Pe,theirProps:A,slot:Ce,defaultTag:ir,name:"RadioGroup"})))))}var dr=(e=>(e[e.Empty=1]="Empty",e[e.Active=2]="Active",e))(dr||{});let ur="div";function mr(e,t){var r;let a=Z(),{id:s=`headlessui-radiogroup-option-${a}`,value:c,disabled:i=!1,...d}=e,u=l.useRef(null),g=ee(u,t),[R,A]=je(),[k,O]=ue(),{addFlag:D,removeFlag:h,hasFlag:G}=Fe(1),K=Me({value:c,disabled:i}),P=Ne("RadioGroup.Option"),F=Re("RadioGroup.Option");Y(()=>F.registerOption({id:s,element:u,propsRef:K}),[s,F,u,e]);let M=j(y=>{var z;if(se(y.currentTarget))return y.preventDefault();F.change(c)&&(D(2),(z=u.current)==null||z.focus())}),V=j(y=>{if(se(y.currentTarget))return y.preventDefault();D(2)}),v=j(()=>h(2)),W=((r=P.firstOption)==null?void 0:r.id)===s,b=P.disabled||i,C=P.compare(P.value,c),w={ref:g,id:s,role:"radio","aria-checked":C?"true":"false","aria-labelledby":R,"aria-describedby":k,"aria-disabled":b?!0:void 0,tabIndex:(()=>b?-1:C||!P.containsCheckedOption&&W?0:-1)(),onClick:b?void 0:M,onFocus:b?void 0:V,onBlur:b?void 0:v},X=l.useMemo(()=>({checked:C,disabled:b,active:G(2)}),[C,b,G]);return E.createElement(O,{name:"RadioGroup.Description"},E.createElement(A,{name:"RadioGroup.Label"},re({ourProps:w,theirProps:d,slot:X,defaultTag:ur,name:"RadioGroup.Option"})))}let pr=Q(cr),fr=Q(mr),U=Object.assign(pr,{Option:fr,Label:ar,Description:Te});function _({children:e,headline:t,type:r,className:a}){return n.jsxs("div",{className:N("flex flex-col rounded-md p-4 overflow-auto scrollbar scrollbar--vertical scrollbar--horizontal",r===m.Add&&"bg-success-10",r===m.Remove&&"bg-danger-10",r===m.Direct&&"bg-secondary-10",r===m.Indirect&&"bg-warning-10",r==="metadata"&&"bg-neutral-10",a),children:[t!=null&&n.jsx("h4",{className:N("mb-2 font-bold whitespace-nowrap",r===m.Add&&"text-success-600 dark:text-success-300",r===m.Remove&&"text-danger-600 dark:text-danger-300",r===m.Direct&&"text-secondary-600 dark:text-secondary-300",r===m.Indirect&&"text-warning-600 dark:text-warning-300",r===m.Metadata&&"text-neutral-600 dark:text-neutral-300"),children:t}),e]})}function xr({changes:e=[],type:t}){return n.jsx("ul",{children:e.map(r=>n.jsxs("li",{className:N("flex items-center px-1 leading-5",t===m.Add&&"text-success-600 dark:text-success-300",t===m.Remove&&"text-danger-600 dark:text-danger-300",t===m.Direct&&"text-secondary-600 dark:text-secondary-300",t===m.Indirect&&"text-warning-600 dark:text-warning-300",t===m.Metadata&&"text-neutral-600 dark:text-neutral-300"),children:[t===m.Add?n.jsx(_e,{className:"h-3 mr-2"}):t===m.Remove?n.jsx(Ye,{className:"h-3 mr-2"}):n.jsx(xe,{className:"h-4 mr-2"}),n.jsx("small",{children:r})]},r))})}function hr({changes:e=[]}){const t=Ge(r=>r.models);return n.jsx("ul",{children:e.map(r=>n.jsx("li",{className:"text-secondary-500 dark:text-primary-500",children:n.jsx(S,{children:({open:a})=>n.jsxs(n.Fragment,{children:[n.jsxs(S.Button,{className:"flex items-start w-full justify-between rounded-lg text-left",children:[n.jsx("div",{className:"w-full",children:n.jsx(J,{model_name:r.model_name})}),(()=>{const s=a?pe:fe;return n.jsx(s,{className:"max-h-[1rem] min-w-[1rem] dark:text-primary-500 mt-0.5"})})()]}),n.jsxs(S.Panel,{className:"text-sm px-4 mb-4",children:[n.jsx(ye,{type:"indirect",models:r.indirect??[]}),n.jsx(oe,{className:"border-neutral-200 mt-2"}),n.jsx(vr,{change:r}),n.jsx(oe,{className:"border-neutral-200 mt-2"}),(r==null?void 0:r.diff)!=null&&n.jsx(Ee,{diff:r==null?void 0:r.diff}),(()=>{const s=t.get(r.model_name);return s==null?n.jsx(n.Fragment,{}):n.jsx("div",{className:"h-[16rem] bg-theme-lighter rounded-xl p-2",children:n.jsx(We,{withColumns:!1,children:n.jsx(ze,{model:s,fingerprint:s.id,highlightedNodes:{"border-4 border-secondary-500":[s.name],"border-4 border-warning-500":r.indirect??[],"*":["opacity-50 hover:opacity-100"]}})})})})()]})]})})},r.model_name))})}function vr({change:e}){var c;const t=Be(),{change_categorization:r,categories:a}=me(),s=He(i=>i.state);return n.jsx(U,{className:N("flex flex-col mt-2",s===ie.Finished?"opacity-50 cursor-not-allowed":"cursor-pointer"),value:(c=r.get(e.model_name))==null?void 0:c.category,onChange:i=>{t({type:Ue.Category,category:i,change:e})},disabled:s===ie.Finished,children:a.map(i=>n.jsx(U.Option,{value:i,className:()=>N("relative flex rounded-md"),children:({checked:d})=>n.jsxs("div",{className:N("text-sm flex px-2 py-1 w-full rounded-lg",d?"text-secondary-500 dark:text-primary-300":"text-prose"),children:[n.jsx("div",{className:"mt-[0.125rem] mr-2 border-2 border-neutral-400 min-w-[1rem] h-4 rounded-full flex justify-center items-center",children:d&&n.jsx("span",{className:"inline-block w-2 h-2 bg-secondary-500 dark:bg-primary-300 rounded-full"})}),n.jsxs("div",{children:[n.jsx(U.Label,{as:"p",children:i.name}),n.jsx(U.Description,{as:"span",className:"text-xs text-neutral-500",children:i.description})]})]})},i.name))})}function gr({changes:e=[]}){return n.jsx("ul",{children:e.map(t=>n.jsx("li",{className:"text-warning-700 dark:text-warning-500",children:qe(t.direct)?n.jsx(S,{children:({open:r})=>n.jsxs(n.Fragment,{children:[n.jsxs(S.Button,{className:"flex items-center w-full justify-between rounded-lg text-left",children:[n.jsx(J,{model_name:t.model_name}),(()=>{const a=r?pe:fe;return n.jsx(a,{className:"max-h-[1rem] min-w-[1rem] dark:text-primary-500 mt-0.5"})})()]}),n.jsx(S.Panel,{className:"text-sm px-4 mb-4",children:n.jsx(ye,{type:"direct",models:t.direct??[]})})]})}):n.jsx(J,{model_name:t.model_name})},t.model_name))})}function J({model_name:e}){var a;const{change_categorization:t}=me(),r=(a=t.get(e))==null?void 0:a.category;return n.jsxs("div",{className:"flex items-center font-bold",children:[n.jsx(xe,{className:"h-4 mr-2"}),n.jsx("small",{className:"inline-block text-sm ",children:e}),r!=null&&n.jsx("span",{className:"ml-2 text-xs px-1 bg-neutral-400 text-neutral-100  dark:bg-neutral-400 dark:text-neutral-800 rounded whitespace-nowrap mr-2",children:r.name})]})}function ye({type:e,models:t}){return n.jsx("ul",{className:N("mt-2 ml-4",e==="indirect"&&"text-warning-700 dark:text-warning-500",e==="direct"&&"text-secondary-500 dark:text-primary-500"),children:t.map(r=>n.jsxs("li",{className:"flex",children:[n.jsx("span",{className:N("h-3 w-3 border-l-2 border-b-2 innline-block mr-2")}),r]},r))})}function Ee({diff:e}){return n.jsx("div",{className:"my-4 bg-dark-lighter rounded-lg overflow-hidden",children:n.jsx("pre",{className:"p-4 text-primary-100 max-h-[30vh] overflow-auto scrollbar scrollbar--vertical scrollbar--horizontal",children:e.split(`
`).map((t,r)=>n.jsx("p",{className:N(t.startsWith("+")&&"text-success-500 bg-success-500/10 px-2",t.startsWith("-")&&"text-danger-500 bg-danger-500/10 px-2",t.startsWith("@@")&&"text-primary-300 my-5 px-2"),children:t},`${t}-${r}`))})})}_.Default=xr;_.Direct=hr;_.Indirect=gr;_.Diff=Ee;_.Title=J;const ce=jr("/api/events"),I=new Map;function Rr(){return[(e,t)=>br(e,t)]}function br(e,t){if(q(e)||I.has(e))return I.get(e);const r=wr(e,t);return ce.addEventListener(e,r),I.set(e,()=>{ce.removeEventListener(e,r),I.delete(e)}),I.get(e)}function wr(e,t){return r=>{if(!(q(e)||q(t)||q(r.data)))try{t(JSON.parse(r.data))}catch(a){console.warn(a)}}}function jr(e){return new EventSource(e)}export{Qe as F,je as H,ar as M,_ as P,er as T,Ze as p,Rr as u};
