import{d as x,r as g,c as t,o as n,j,I as y,k as w,h as l,X as z,Y as R,a0 as A,x as L,O as U,m as V,R as $,a1 as G,a2 as Q,z as Y,a3 as E,a4 as K,a5 as W,a as b,g as s,w as u,a6 as X,i as o,a7 as q,a8 as H,a9 as M,aa as Z,ab as ee,ac as ae,ad as le,s as ne,W as se}from"./index-9977ddb9.js";import{u as ue}from"./usePageTitle-b68a65f1.js";const te={class:"flow-run-graphs__panel-content"},oe=x({__name:"FlowRunGraphs",props:{flowRun:{}},setup(F){const f=g(!1),c=g(null),p=g(!1),i=t(()=>({root:{"flow-run-graphs--fullscreen":f.value},graph:{"flow-run-graphs__graphs--panel-open":p.value},panel:{"flow-run-graphs__panel-container--panel-open":p.value}}));function e(d){c.value=d,p.value=!!d}function m(){p.value=!1}return(d,r)=>(n(),j("div",{class:R(["flow-run-graphs",i.value.root])},[y("div",{class:R(["flow-run-graphs__graphs",i.value.graph])},[w(l(z),{class:"flow-run-graphs__timeline","flow-run":d.flowRun,height:"340px","selected-node":c.value,onSelection:e,"onUpdate:fullscreen":r[0]||(r[0]=h=>f.value=h)},null,8,["flow-run","selected-node"])],2),y("div",{class:R(["flow-run-graphs__panel-container",i.value.panel])},[y("div",te,[w(l(A),{"selected-node":c.value,floating:f.value,onDismiss:m},null,8,["selected-node","floating"])])],2)],2))}});const pe=x({__name:"FlowRun",setup(F){const f=L(),c=U("flowRunId"),p=V(),i=$(p.flowRuns.getFlowRun,[c],{interval:5e3}),e=t(()=>i.response),m=t(()=>{var a;return(a=e.value)==null?void 0:a.deploymentId}),{deployment:d}=G(m),r=t(()=>{var a;return(a=e.value)!=null&&a.stateType?Q(e.value.stateType):!0}),h=t(()=>[{label:"Logs"},{label:"Task Runs",hidden:r.value},{label:"Subflow Runs",hidden:r.value},{label:"Results",hidden:r.value},{label:"Artifacts",hidden:r.value},{label:"Details"},{label:"Parameters"}]),{tab:v,tabs:T}=Y(h,"Logs");E(c,(a,_)=>{a!==_&&(v.value="Logs")});const C=t(()=>{var a;return((a=e.value)==null?void 0:a.parameters)??{}}),I=t(()=>{var a;return((a=d.value)==null?void 0:a.parameterOpenApiSchema)??{}}),k=t(()=>K(C.value,I.value));function N(){f.push(se.flowRuns())}const P=t(()=>{var a;return(a=e.value)==null?void 0:a.stateType});W(P);const S=t(()=>e.value?`Flow Run: ${e.value.name}`:"Flow Run");return ue(S),(a,_)=>{const B=b("p-code-highlight"),D=b("p-tabs"),J=b("p-layout-default");return n(),s(J,{class:"flow-run"},{header:u(()=>[e.value?(n(),s(l(X),{key:0,"flow-run-id":e.value.id,onDelete:N},null,8,["flow-run-id"])):o("",!0)]),default:u(()=>[e.value&&!r.value?(n(),s(oe,{key:0,"flow-run":e.value},null,8,["flow-run"])):o("",!0),w(D,{selected:l(v),"onUpdate:selected":_[0]||(_[0]=O=>ne(v)?v.value=O:null),tabs:l(T)},{details:u(()=>[e.value?(n(),s(l(q),{key:0,"flow-run":e.value},null,8,["flow-run"])):o("",!0)]),logs:u(()=>[e.value?(n(),s(l(H),{key:0,"flow-run":e.value},null,8,["flow-run"])):o("",!0)]),results:u(()=>[e.value?(n(),s(l(M),{key:0,"flow-run":e.value},null,8,["flow-run"])):o("",!0)]),artifacts:u(()=>[e.value?(n(),s(l(Z),{key:0,"flow-run":e.value},null,8,["flow-run"])):o("",!0)]),"task-runs":u(()=>[e.value?(n(),s(l(ee),{key:0,"flow-run-id":e.value.id},null,8,["flow-run-id"])):o("",!0)]),"subflow-runs":u(()=>[e.value?(n(),s(l(ae),{key:0,"flow-run-id":e.value.id},null,8,["flow-run-id"])):o("",!0)]),parameters:u(()=>[e.value?(n(),s(l(le),{key:0,"text-to-copy":k.value},{default:u(()=>[w(B,{lang:"json",text:k.value,class:"flow-run__parameters"},null,8,["text"])]),_:1},8,["text-to-copy"])):o("",!0)]),_:1},8,["selected","tabs"])]),_:1})}}});export{pe as default};
