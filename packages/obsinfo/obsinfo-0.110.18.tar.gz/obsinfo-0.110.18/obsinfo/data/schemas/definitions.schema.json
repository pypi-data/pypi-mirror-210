{    
    "format_version": {
        "description": "Schema file's obsinfo version",
        "type": "string",
        "pattern": "^1\\.0$|^0.110$"
    },
    "yaml_anchors" : {
        "description": "Free-form object or list used to set YAML anchors",
        "oneOf": [{"type": "object"}, {"type": "array"}]
    },
    "extras" : {
        "type": "object",
        "description": "Free-form object for attribute additions to information files"
    },
    "note_list": {
        "type" : "array",
        "description" : "list of comments (should be included in output metadata)",
        "minItems": 0,
        "items" : {
            "if": {"type": "string"},
            "then": {
                "description": "basic comment",
                "minimum": 2},
            "else": {"$ref":"#/_stationxml_comment"}
        }
    },
    "_stationxml_comment": {
        "type" : "object", 
        "required": ["value"],
        "properties" : {
            "value":                {"type":"string"},
            "begin_effective_time": {"$ref": "#/date-time-Z"},
            "end_effective_time":   {"$ref": "#/date-time-Z"},
            "authors":              {"type": "array", "items": {"$ref": "#/author"}}
        }
    },
    "author" : {"$ref": "author.schema.json#/definitions/author"},
    "operator" : {"$ref": "operator.schema.json#/definitions/operator"},
    "contact_name": { 
        "type" : "object", 
        "description": "Contact person name",
        "required": ["first_name", "last_name"],
        "properties" : {
            "first_name": {"type":"string"},
            "last_name":  {"type":"string"}
        }
    },
    "date": {
        "type": "string",
        "description": "Date in yyyy-mm-dd format",
        "pattern": "^[0-9]{4}-[0-9]{2}-[0-9]{2}$"
    },
    "date_or_null": {
        "if": {"type" : "null"},
        "then": {"description": "no date entered"},
        "else": {
            "type": "string",
            "description": "yyyy-mm-dd date",
            "pattern": "^[0-9]{4}-[0-9]{2}-[0-9]{2}$"
        }
    },
    "date-time-Z": {
        "if": {"type" : "null"},
        "then": {"description": "no date entered"},
        "else": {
            "type": "string",
            "description": "Date-time in ISO format with Z for GMT+0. The Z is not required.",
            "pattern": "^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}(\\.[0-9]*)?[Z]*$"
        }
    },
    "ISOdatetime": {
        "if": {"type" : "null"},
        "then": {"description": "no date entered"},
        "else": {
            "type": "string",
            "description": "Date-time in ISO format with Z for GMT+0. The Z is not required.",
            "pattern": "^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}(\\.[0-9]*)?[Z]*$"
        }
    },
    "email": {
        "type": "string",
        "format": "email"
    },
    "notes": {
        "type": "array",
        "description": "list of notes (should not be included in output metadata)",
        "minItems": 0,
        "items": {"type": "string", "minLength": 1 }
    },
    "phone": {
        "if": {"type": "string"},
        "then": {
            "description": "Phone in international format",
            "pattern": "^\\+{0,1}[0-9]{1,3}(\\([0-9]+\\)){0,1}([0-9]+[ -])*[0-9]+"
        },
        "else": {
            "description": "Phone in US format",
            "type": "object",
            "required": ["area_code", "phone_number"],
            "properties": {
                "country_code": {
                    "type": "string",
                    "pattern": "^\\+{0,1}[0-9]{1,3}$"
                },
                "area_code": {
                    "type": "string",
                    "pattern": "^\\({0,1}[0-9]{3}\\){0,1}$"
                },
                "phone_number": {
                    "type": "string",
                    "pattern": "^[0-9]+\\-[0-9]+$"
                }
            }
        }
    },
    "reference_name": {
        "type": "string",
        "description": "campaign or operator reference name"
    },
    "restricted_state": {
        "type": "string",
        "description": "restricted state"
    },
    "revision": {
        "type": "object",
        "if": { "required": ["$ref"]},
        "then": {"$ref": "#/jsonref"},
        "else": {
            "description": "Date provenance of instrumentation information",
            "type": "object",
            "required": ["date", "authors"],
            "properties": {
                "date": {"$ref": "#/date"},
                "authors": {
                    "type": "array",
                    "minItems" : 1,
                    "items" : {"$ref": "#/author"}
                }
            }
        }
    },
    "jsonref": { 
        "type": "object",
        "required": ["$ref"],
        "properties": {
            "$ref": {"type": "string"}
        },
        "additionalProperties": false
    },
    "string_or_null": { 
        "type": ["string" , "null"]
    },
    "URI_and_revision": {
        "type": "object",
        "description": "URI and revision date of file to be loaded",
        "required" : ["$ref","revision_date"],
        "properties" : {
            "$ref" : {"type":"string"},
            "revision_date": {
                "oneOf" : [
                    { "$ref" :"#/date-time-Z"},
                    { "$ref" :"#/date_or_null"}
                ]
            }
        },
        "additionalProperties" : false
    },
    "URI_ref": {
        "type": "object",
        "description": "URI to file containing information to be loaded here",
        "required": ["$ref"],
        "properties": {"$ref": {"type": "string"}},
        "additionalProperties": false
    },
    "website": {
        "type": "string",
        "format": "uri"
    },
    "any_date":{
        "oneOf" :[
            {"$ref": "#/date" },
            {"$ref": "#/date-time-Z"}
        ]
    },
    "orientation_coordinates": { 
        "type": "object",
        "properties": {
            "azimuth.deg": {"$ref" :"#/azimuth.deg"},
            "dip.deg":     {"$ref" :"#/dip.deg"}   
        },
        "additionalProperties": false
    },
   "azimuth.deg": {
        "type": "array",
        "description": "possible sensor azimuths",
        "items": [
            {
                "type": "number",
                "minimum": 0.0,
                "exclusiveMaximum": 360.0
            },
            {
                "type": ["number", "null"],
                "minimum": 0.0,
                "maximum": 180.0
            }
        ],
        "minItems": 1,
        "maxItems": 2
    },
    "dip.deg": {
        "type": "array",
        "description": "possible sensor dips and uncertainties",
        "items": [
            {
                "type": "number",
                "minimum": -90.0,
                "maximum": 90.0
            },
            {
                "type": ["number", "null"],
                "minimum": 0.0,
                "maximum": 90.0
            }
        ],
        "minItems": 1,
        "maxItems": 2
    },
    "floatWithUncert": {
        "type": "array",
        "items": [ {"type": "number"},
                   {"type": ["number", "null"]}],
        "minItems": 2,
        "maxItems": 2
    },
    "equipmentType": {
        "type": "object",
        "required": ["type", "description", "manufacturer",
                       "model"],
        "properties": {
            "type":              {"type": ["string","null"]},
            "description":       {"type": ["string","null"]},
            "manufacturer":      {"type": ["string","null"]},
            "vendor":            {"type": ["string","null"]},
            "model":             {"type": ["string","null"]},
            "serial_number":     {"type": ["string","null"]},
            "installation_date": {"$ref": "definitions.schema.json#/any_date" },
            "removal_date":      {"$ref": "definitions.schema.json#/any_date" },
            "calibration_dates": {"$ref": "definitions.schema.json#/calibration_dates_def" }
        },
        "additionalProperties": false
    },
    "equipmentType_wo_required_fields": {
        "type": "object",
        "properties": {
            "type":              {"type": ["string","null"]},
            "description":       {"type": ["string","null"]},
            "manufacturer":      {"type": ["string","null"]},
            "vendor":            {"type": ["string","null"]},
            "model":             {"type": ["string","null"]},
            "serial_number":     {"type": ["string","null"]},
            "installation_date": {"$ref": "definitions.schema.json#/any_date" },
            "removal_date":      {"$ref": "definitions.schema.json#/any_date" },
            "calibration_dates": {"$ref": "definitions.schema.json#/calibration_dates_def" }
        },
        "additionalProperties": false
    },
    "equipmentType_noRequired": {
        "type": "object",
        "properties": {
            "type":              {"type": ["string","null"] },
            "description":       {"type": ["string","null"] },
            "manufacturer":      {"type": ["string","null"] },
            "vendor":            {"type": ["string","null"] },
            "model":             {"type": ["string","null"]},
            "serial_number":     {"type": ["string","null"] },
            "installation_date": {"$ref": "definitions.schema.json#/any_date" },
            "removal_date":      {"$ref": "definitions.schema.json#/any_date" },
            "calibration_dates": {"$ref": "definitions.schema.json#/calibration_dates_def"}
        },
        "additionalProperties": false
    },
    "calibration_dates_def": { 
        "type": "array",
        "description": "list of calibration dates",
        "minItems": 1,
        "items": {"$ref": "definitions.schema.json#/any_date"}
    },
    "polarity_codes" : {
            "type": "string",
            "pattern": "^[+-]$"
    }    
}
