{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Datacite",
    "description": "Scientist-specific Datacite information",
    "type": "object",
    "required": ["format_version", "datacite"],
    "properties": {
        "format_version" : {"$ref" : "definitions.schema.json#/format_version"},
        "revision" :       {"$ref" : "definitions.schema.json#/revision"},
        "yaml_anchors" :   {"$ref" : "definitions.schema.json#/yaml_anchors"},
        "notes" :          {"$ref": "definitions.schema.json#/note_list"},
        "datacite":        {"$ref" : "#/definitions/datacite" }
    },
    "additionalProperties" : false,
    "definitions": {
        "datacite" : {
            "description" : "Scientist-specific datacite fields",
            "type": "object",
            "required": ["title", "description", "creators", "subjects", "contributors", "place"],
            "properties": {
                "title":               {"type" : "string" },
                "description":         {"type" : "string" },
                "creators":            {"$ref": "#/definitions/entities_list"},
                "subjects":            {"$ref": "#/definitions/subjects"},
                "dates_collected":     {"type": "string"},
                "contributors":        {"$ref": "#/definitions/contributors"},
                "place":               {"type" : "string"},
                "related_identifiers": {"$ref": "#/definitions/related_identifiers"},
                "funders":             {"$ref": "#/definitions/funders"}
            },
            "additionalProperties" : false
        },
        "entities_list": {
            "type": "array",
               "minItems": 1,
               "description" : "list of entities",
               "items" : { "$ref" : "#/definitions/entity" }
        },
        "entity": {
            "type": "object",
            "description": "A person or organization",
            "required": ["name"],
            "properties" : {
                "name":   {"type": "string"},
                "type":   {"type": "string", enum: ['Organization']},
                "identifier":   {"type": "string"},
                "scheme":   {"type": "string", "enum": ['ORCID', 'ROR']},
                "affiliations":    {"$ref": "#/definitions/affiliations"}
            },
            "additionalProperties": false
        },
        "affiliations": {
            "type": "array",
               "minItems": 1,
               "description" : "list of affiliations",
               "items" : {"$ref": "#/definitions/affiliation"}
        },
        "affiliation": {
            "type": "object",
            "description": "Affiliation for an entity",
            "required": ["name"],
            "properties" : {
                "name":   {"type": "string"},
                "identifier":   {"type": "string"},
                "scheme":   {"type": "string", "enum": ['ROR', 'GRID']}
            },
            "additionalProperties": false
        },
        "subjects": {
            "type": "array",
               "minItems": 1,
               "description" : "list of keywords",
               "items" : {"type" : "string"}
        },
        "contributors": {
            "type": "object",
            "description": "Different types of contributor",
            "required": ["data_collectors"],
            "properties" : {
                "data_collectors":   {"$ref": "#/definitions/entities_list"},
                "project_leader":    {"$ref": "#/definitions/entity"},
                "project_members":   {"$ref": "#/definitions/entities_list"}
            },
            "additionalProperties": false
        },
        "related_identifiers": {
            "type": "array",
               "minItems": 1,
               "description" : "list of keywords",
               "items" : {"$ref": "#/definitions/related_identifier"}
        },
        "related_identifier": {
            "type": "object",
            "description": "Affiliation for an entity",
            "required": ["identifier"],
            "properties" : {
                "identifier":   {"type": "string"},
                "scheme":   {"type": "string", 
                             "enum": ['ARK', 'arXiv', 'bibcode', 'DOI',
                                      'EAN13', 'EISSN', 'Handle', 'IGSN',
                                      'ISBN', 'ISSN', 'ISTC', 'LISSN', 'LSID',
                                      'PMID', 'PURL', 'UPC', 'URL', 'URN',
                                      'w3id']
                            },
                "relation":   {"$ref": "#/definitions/relation"}
            },
            "additionalProperties": false
        },
        "relation":   {
            "type": "string", 
            "description": "This datacite {RELATION} the related resource",
            "enum": ['IsCitedBy', 'Cites',
                     'IsSupplementTo', 'IsSupplementedBy',
                     'IsContinuedBy', 'Continues',
                     'IsDescribedBy', 'Describes',
                     'HasMetadata', 'IsMetadataFor',
                     'HasVersion', 'IsVersionOf',
                     'IsNewVersionOf', 'IsPreviousVersionOf',
                     'IsPartOf', 'HasPart',
                     'IsReferencedBy', 'References',
                     'IsDocumentedBy', 'Documents',
                     'IsCompiledBy', 'Compiles',
                     'IsVariantFormOf', 'IsOriginalFormOf',
                     'IsIdenticalTo',
                     'IsReviewedBy', 'Reviews',
                     'IsDerivedFrom', 'IsSourceOf',
                     'IsRequiredBy', 'Requires',
                     'IsObsoletedBy', 'Obsoletes']
        },
        "funders": {
            "type": "array",
               "minItems": 1,
               "description" : "list of funders",
               "items" : {"$ref": "#/definitions/funder"}
        },
        "funder": {
            "type": "object",
            "description": "Funder",
            "required": ["name"],
            "properties" : {
                "name":   {"type": "string"},
                "identifier":   {"type": "string"},
                "scheme":   {"type": "string", "enum": ['ROR', 'GRID']},
                "award_number": {"type": "string"},
                "award_URI": {"type": "string"},
                "award_title": {"type": "string"}
            },
            "additionalProperties": false
        }
    }
}
