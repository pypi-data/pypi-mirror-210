"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_issueDetails_groupTagValues_tsx"],{"./app/components/dataExport.tsx":(e,i,t)=>{t.d(i,{ZP:()=>g,tD:()=>p});var a=t("../node_modules/react/index.js"),n=t("../node_modules/lodash/debounce.js"),o=t.n(n),r=t("./app/actionCreators/indicator.tsx"),d=t("./app/components/acl/feature.tsx"),s=t("./app/components/button.tsx"),h=t("./app/locale.tsx"),P=t("./app/utils/withApi.tsx"),c=t("./app/utils/withOrganization.tsx"),l=t("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");let p;function u(e){let{api:i,children:t,disabled:n,organization:P,payload:c,icon:p}=e;const u=(0,a.useRef)(!1),[g,m]=(0,a.useState)(!1);(0,a.useEffect)((()=>{g&&m(!1)}),[c.queryType,c.queryInfo]),(0,a.useEffect)((()=>()=>{u.current=!0}),[]);const A=(0,a.useCallback)((()=>{m(!0),i.requestPromise(`/organizations/${P.slug}/data-export/`,{includeAllArgs:!0,method:"POST",data:{query_type:c.queryType,query_info:c.queryInfo}}).then((e=>{let[i,t,a]=e;u.current||(0,r.S9)(201===a?.status?(0,h.t)("Sit tight. We'll shoot you an email when your data is ready for download."):(0,h.t)("It looks like we're already working on it. Sit tight, we'll email you."))})).catch((e=>{if(u.current)return;const i=e?.responseJSON?.detail??(0,h.t)("We tried our hardest, but we couldn't export your data. Give it another go.");(0,r.Iw)(i),m(!1)}))}),[c.queryInfo,c.queryType,P.slug,i]);return(0,l.tZ)(d.Z,{features:["organizations:discover-query"],children:g?(0,l.tZ)(s.zx,{size:"sm",priority:"default",title:(0,h.t)("You can get on with your life. We'll email you when your data's ready."),disabled:!0,icon:p,children:(0,h.t)("We're working on it...")}):(0,l.tZ)(s.zx,{onClick:o()(A,500),disabled:n||!1,size:"sm",priority:"default",title:(0,h.t)("Put your data to work. Start your export and we'll email you when it's finished."),icon:p,children:t||(0,h.t)("Export All to CSV")})})}!function(e){e.IssuesByTag="Issues-by-Tag",e.Discover="Discover"}(p||(p={})),u.displayName="DataExport";const g=(0,P.Z)((0,c.Z)(u))},"./app/components/deviceName.tsx":(e,i,t)=>{t.d(i,{H:()=>r});var a=t("../node_modules/react/index.js");const n={"iPod1,1":"iPod touch","iPod2,1":"iPod touch (2nd generation)","iPod3,1":"iPod touch (3rd generation)","iPod4,1":"iPod touch (4th generation)","iPod5,1":"iPod touch (5th generation)","iPod7,1":"iPod touch (6th generation)","iPod9,1":"iPod touch (7th generation)","iPhone1,1":"iPhone","iPhone1,2":"iPhone 3G","iPhone2,1":"iPhone 3GS","iPhone3,1":"iPhone 4","iPhone3,2":"iPhone 4","iPhone3,3":"iPhone 4","iPhone4,1":"iPhone 4S","iPhone5,1":"iPhone 5","iPhone5,2":"iPhone 5","iPhone5,3":"iPhone 5c","iPhone5,4":"iPhone 5c","iPhone6,1":"iPhone 5s","iPhone6,2":"iPhone 5s","iPhone8,4":"iPhone SE (1st generation)","iPhone7,2":"iPhone 6","iPhone7,1":"iPhone 6 Plus","iPhone8,1":"iPhone 6s","iPhone8,2":"iPhone 6s Plus","iPhone9,1":"iPhone 7","iPhone9,3":"iPhone 7","iPhone9,2":"iPhone 7 Plus","iPhone9,4":"iPhone 7 Plus","iPhone10,1":"iPhone 8","iPhone10,4":"iPhone 8","iPhone10,2":"iPhone 8 Plus","iPhone10,5":"iPhone 8 Plus","iPhone10,3":"iPhone X","iPhone10,6":"iPhone X","iPhone11,8":"iPhone XR","iPhone11,2":"iPhone XS","iPhone11,6":"iPhone XS Max","iPhone11,4":"iPhone XS Max","iPhone12,1":"iPhone 11","iPhone12,3":"iPhone 11 Pro","iPhone12,5":"iPhone 11 Pro Max","iPhone12,8":"iPhone SE (2nd generation)","iPhone13,1":"iPhone 12 mini","iPhone13,2":"iPhone 12","iPhone13,3":"iPhone 12 Pro","iPhone13,4":"iPhone 12 Pro Max","iPhone14,4":"iPhone 13 mini","iPhone14,5":"iPhone 13","iPhone14,2":"iPhone 13 Pro","iPhone14,3":"iPhone 13 Pro Max","iPhone14,6":"iPhone SE (3rd generation)","iPhone14,7":"iPhone 14","iPhone14,8":"iPhone 14 Plus","iPhone15,2":"iPhone 14 Pro","iPhone15,3":"iPhone 14 Pro Max","iPad6,7":"iPad Pro (12.9-inch)","iPad6,8":"iPad Pro (12.9-inch)","iPad6,3":"iPad Pro (9.7-inch)","iPad6,4":"iPad Pro (9.7-inch)","iPad7,1":"iPad Pro (12.9-inch, 2nd generation)","iPad7,2":"iPad Pro (12.9-inch, 2nd generation)","iPad7,3":"iPad Pro (10.5-inch)","iPad7,4":"iPad Pro (10.5-inch)","iPad8,1":"iPad Pro (11-inch)","iPad8,2":"iPad Pro (11-inch)","iPad8,3":"iPad Pro (11-inch)","iPad8,4":"iPad Pro (11-inch)","iPad8,5":"iPad Pro (12.9-inch) (3rd generation)","iPad8,6":"iPad Pro (12.9-inch) (3rd generation)","iPad8,7":"iPad Pro (12.9-inch) (3rd generation)","iPad8,8":"iPad Pro (12.9-inch) (3rd generation)","iPad8,9":"iPad Pro (11-inch) (2nd generation)","iPad8,10":"iPad Pro (11-inch) (2nd generation)","iPad8,11":"iPad Pro (12.9-inch) (4th generation)","iPad8,12":"iPad Pro (12.9-inch) (4th generation)","iPad13,4":"iPad Pro (11-inch) (3rd generation)","iPad13,5":"iPad Pro (11-inch) (3rd generation)","iPad13,6":"iPad Pro (11-inch) (3rd generation)","iPad13,7":"iPad Pro (11-inch) (3rd generation)","iPad13,8":"iPad Pro (12.9-inch) (5th generation)","iPad13,9":"iPad Pro (12.9-inch) (5th generation)","iPad13,10":"iPad Pro (12.9-inch) (5th generation)","iPad13,11":"iPad Pro (12.9-inch) (5th generation)","iPad2,5":"iPad mini","iPad2,6":"iPad mini","iPad2,7":"iPad mini","iPad4,4":"iPad mini 2","iPad4,5":"iPad mini 2","iPad4,6":"iPad mini 2","iPad4,7":"iPad mini 3","iPad4,8":"iPad mini 3","iPad4,9":"iPad mini 3","iPad5,1":"iPad mini 4","iPad5,2":"iPad mini 4","iPad11,1":"iPad mini (5th generation)","iPad11,2":"iPad mini (5th generation)","iPad14,1":"iPad mini (6th generation)","iPad14,2":"iPad mini (6th generation)","iPad4,1":"iPad Air","iPad4,2":"iPad Air","iPad4,3":"iPad Air","iPad5,3":"iPad Air 2","iPad5,4":"iPad Air 2","iPad11,3":"iPad Air (3rd generation)","iPad11,4":"iPad Air (3rd generation)","iPad13,1":"iPad Air (4th generation)","iPad13,2":"iPad Air (4th generation)","iPad13,16":"iPad Air (5th generation)","iPad13,17":"iPad Air (5th generation)","iPad1,1":"iPad","iPad2,1":"iPad 2","iPad2,2":"iPad 2","iPad2,3":"iPad 2","iPad2,4":"iPad 2","iPad3,1":"iPad (3rd generation)","iPad3,2":"iPad (3rd generation)","iPad3,3":"iPad (3rd generation)","iPad3,4":"iPad (4th generation)","iPad3,5":"iPad (4th generation)","iPad3,6":"iPad (4th generation)","iPad6,11":"iPad (5th generation)","iPad6,12":"iPad (5th generation)","iPad7,5":"iPad (6th generation)","iPad7,6":"iPad (6th generation)","iPad7,11":"iPad (7th generation)","iPad7,12":"iPad (7th generation)","iPad11,6":"iPad (8th generation)","iPad11,7":"iPad (8th generation)","iPad12,1":"iPad (9th generation)","iPad12,2":"iPad (9th generation)","AudioAccessory1,1":"HomePod","AudioAccessory1,2":"HomePod","AudioAccessory5,1":"HomePod mini","Watch1,1":"Apple Watch (1st generation)","Watch1,2":"Apple Watch (1st generation)","Watch2,6":"Apple Watch Series 1","Watch2,7":"Apple Watch Series 1","Watch2,3":"Apple Watch Series 2","Watch2,4":"Apple Watch Series 2","Watch3,1":"Apple Watch Series 3","Watch3,2":"Apple Watch Series 3","Watch3,3":"Apple Watch Series 3","Watch3,4":"Apple Watch Series 3","Watch4,1":"Apple Watch Series 4","Watch4,2":"Apple Watch Series 4","Watch4,3":"Apple Watch Series 4","Watch4,4":"Apple Watch Series 4","Watch5,1":"Apple Watch Series 5","Watch5,2":"Apple Watch Series 5","Watch5,3":"Apple Watch Series 5","Watch5,4":"Apple Watch Series 5","Watch5,9":"Apple Watch SE","Watch5,10":"Apple Watch SE","Watch5,11":"Apple Watch SE","Watch5,12":"Apple Watch SE","Watch6,1":"Apple Watch Series 6","Watch6,2":"Apple Watch Series 6","Watch6,3":"Apple Watch Series 6","Watch6,4":"Apple Watch Series 6","Watch6,6":"Apple Watch Series 7","Watch6,7":"Apple Watch Series 7","Watch6,8":"Apple Watch Series 7","Watch6,9":"Apple Watch Series 7","Watch6,10":"Apple Watch SE (2nd generation)","Watch6,11":"Apple Watch SE (2nd generation)","Watch6,12":"Apple Watch SE (2nd generation)","Watch6,13":"Apple Watch SE (2nd generation)","Watch6,14":"Apple Watch Series 8","Watch6,15":"Apple Watch Series 8","Watch6,16":"Apple Watch Series 8","Watch6,17":"Apple Watch Series 8","Watch6,18":"Apple Watch Ultra","AppleTV1,1":"Apple TV (1st generation)","AppleTV2,1":"Apple TV (2nd generation)","AppleTV3,1":"Apple TV (3rd generation)","AppleTV3,2":"Apple TV (3rd generation)","AppleTV5,3":"Apple TV (4th generation)","AppleTV6,2":"Apple TV 4K","AppleTV11,1":"Apple TV 4K (2nd generation)","AirTag1,1":"AirTag","AirPods1,1":"AirPods (1st generation)","AirPods2,1,AirPods2,1":"AirPods (2nd generation)","AirPods1,3,Audio2,1":"AirPods (3rd generation)","AirPods2,2,AirPodsPro1,1,iProd8,1":"AirPods Pro","AirPodsPro1,2":"AirPods Pro (2nd generation)","AirPodsMax1,1,iProd8,6":"AirPods Max"};var o=t("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function r(i){let{value:t,children:r}=i;const d=(0,a.useMemo)((()=>function(i){if("string"!=typeof i)return null;if(null===e)return i;const[t,...a]=i.split(" "),o=n[t];return void 0===o?i:`${o} ${a.join(" ")}`}(t)),[t]);return d?(0,o.tZ)("span",{"data-test-id":"loaded-device-name",children:r?r(d):d}):null}e=t.hmd(e)},"./app/views/issueDetails/groupTagValues.tsx":(e,i,t)=>{t.r(i),t.d(i,{default:()=>T});var a=t("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=t("../node_modules/react/index.js"),o=t("./app/components/acl/feature.tsx"),r=t("./app/components/asyncComponent.tsx"),d=t("./app/components/button.tsx"),s=t("./app/components/buttonBar.tsx"),h=t("./app/components/dataExport.tsx"),P=t("./app/components/deviceName.tsx"),c=t("./app/components/dropdownLink.tsx"),l=t("./app/components/globalSelectionLink.tsx"),p=t("./app/components/idBadge/userBadge.tsx"),u=t("./app/components/layouts/thirds.tsx"),g=t("./app/components/links/externalLink.tsx"),m=t("./app/components/links/link.tsx"),A=t("./app/components/pagination.tsx"),y=t("./app/components/panels/index.tsx"),W=t("./app/components/timeSince.tsx"),x=t("./app/icons/index.tsx"),S=t("./app/locale.tsx"),Z=t("./app/styles/space.tsx"),f=t("./app/utils.tsx"),v=t("./app/utils/discover/eventView.tsx"),w=t("./app/utils/withSentryRouter.tsx"),b=t("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class k extends r.Z{getEndpoints(){const{environments:e}=this.props,{groupId:i,tagKey:t}=this.props.params;return[["tag",`/issues/${i}/tags/${t}/`],["tagValueList",`/issues/${i}/tags/${t}/values/`,{query:{environment:e,sort:this.getSort()}}]]}getSort(){return this.props.location.query.sort||"count"}renderLoading(){return this.renderBody()}renderResults(){const{baseUrl:e,project:i,environments:t,group:a,params:{orgId:r,tagKey:s}}=this.props,{tagValueList:h,tag:u}=this.state,g=["title","release","environment","user.display","timestamp"];return h?.map(((h,A)=>{const y=u?.totalValues?`${(0,f.aQ)(h.count,u?.totalValues).toFixed(2)}%`:"--",Z=h.key??s,w=h.query||`${Z}:"${h.value}"`,k=v.ZP.fromSavedQuery({id:void 0,name:Z??"",fields:[...void 0!==Z?[Z]:[],...g.filter((e=>e!==Z))],orderby:"-timestamp",query:`issue:${a.shortId} ${w}`,projects:[Number(i?.id)],environment:t,version:2,range:"90d"}),T=`/organizations/${r}/issues/`;return(0,b.BX)(n.Fragment,{children:[(0,b.BX)(D,{children:[(0,b.tZ)(I,{"data-test-id":"group-tag-value",children:(0,b.tZ)(l.Z,{to:{pathname:`${e}events/`,query:{query:w}},children:"user"===Z?(0,b.tZ)(p.Z,{user:{...h,id:h.identifier??""},avatarSize:20,hideEmail:!0}):(0,b.tZ)(P.H,{value:h.name})})}),h.email&&(0,b.tZ)($,{href:`mailto:${h.email}`,"data-test-id":"group-tag-mail",children:(0,b.tZ)(x.h,{size:"xs",color:"gray300"})}),(0,f.CB)(h.value)&&(0,b.tZ)($,{href:h.value,"data-test-id":"group-tag-url",children:(0,b.tZ)(x.V$,{size:"xs",color:"gray300"})})]}),(0,b.tZ)(X,{children:y}),(0,b.tZ)(X,{children:h.count.toLocaleString()}),(0,b.tZ)(X,{children:(0,b.tZ)(W.Z,{date:h.lastSeen})}),(0,b.tZ)(X,{children:(0,b.BX)(c.Z,{anchorRight:!0,alwaysRenderMenu:!1,caret:!1,title:(0,b.tZ)(d.zx,{tooltipProps:{containerDisplayMode:"flex"},size:"sm","aria-label":(0,S.t)("Show more"),icon:(0,b.tZ)(x.YR,{size:"xs"})}),children:[(0,b.tZ)(o.Z,{features:["organizations:discover-basic"],children:(0,b.tZ)("li",{children:(0,b.tZ)(m.Z,{to:k.getResultsViewUrlTarget(r),children:(0,S.t)("Open in Discover")})})}),(0,b.tZ)("li",{children:(0,b.tZ)(l.Z,{to:{pathname:T,query:{query:w}},children:(0,S.t)("Search All Issues with Tag Value")})})]})})]},A)}))}renderBody(){const{group:e,params:{orgId:i,tagKey:t},location:{query:a},environments:n}=this.props,{tagValueList:o,tag:r,tagValueListPageLinks:P,loading:c}=this.state,{cursor:l,page:p,...g}=a,m="user"===t?(0,S.t)("Affected Users"):t,A=this.getSort(),y=(0,b.tZ)(x.CC,{color:"gray300",size:"xs",direction:"down"}),W=(0,b.BX)(z,{to:{pathname:location.pathname,query:{...g,sort:"date"}},children:[(0,S.t)("Last Seen")," ","date"===A&&y]}),Z=(0,b.BX)(z,{to:{pathname:location.pathname,query:{...g,sort:"count"}},children:[(0,S.t)("Count")," ","count"===A&&y]});return(0,b.tZ)(u.uT,{children:(0,b.BX)(u.or,{fullWidth:!0,children:[(0,b.BX)(V,{children:[(0,b.tZ)(j,{children:(0,S.t)("Tag Details")}),(0,b.BX)(s.ZP,{gap:1,children:[(0,b.tZ)(d.zx,{size:"sm",priority:"default",href:`/${i}/${e.project.slug}/issues/${e.id}/tags/${t}/export/`,children:(0,S.t)("Export Page to CSV")}),(0,b.tZ)(h.ZP,{payload:{queryType:h.tD.IssuesByTag,queryInfo:{project:e.project.id,group:e.id,key:t}}})]})]}),(0,b.tZ)(q,{isLoading:c,isEmpty:0===o?.length,headers:[m,(0,b.tZ)(E,{children:(0,S.t)("Percent")},"percent"),Z,W,""],emptyMessage:(0,S.t)("Sorry, the tags for this issue could not be found."),emptyAction:n?.length?(0,S.t)("No tags were found for the currently selected environments"):null,children:o&&r&&this.renderResults()}),(0,b.tZ)(_,{pageLinks:P})]})})}}const T=(0,w.Z)(k),V=(0,a.Z)("div",{target:"er9kbce10"})("display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;justify-content:space-between;margin-bottom:",(0,Z.D)(2),";"),j=(0,a.Z)("h3",{target:"er9kbce9"})({name:"ti75j2",styles:"margin:0"}),q=(0,a.Z)(y.KB,{target:"er9kbce8"})("white-space:nowrap;font-size:",(e=>e.theme.fontSizeMedium),";overflow:auto;@media (min-width: ",(e=>e.theme.breakpoints.small),"){overflow:initial;}&>*{padding:",(0,Z.D)(1)," ",(0,Z.D)(2),";}"),E=(0,a.Z)("div",{target:"er9kbce7"})({name:"2qga7i",styles:"text-align:right"}),z=(0,a.Z)(m.Z,{target:"er9kbce6"})({name:"7p2agl",styles:"text-align:right;color:inherit;:hover{color:inherit;}"}),$=(0,a.Z)(g.Z,{target:"er9kbce5"})("margin-left:",(0,Z.D)(.5),";"),B=(0,a.Z)("div",{target:"er9kbce4"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),D=(0,a.Z)(B,{target:"er9kbce3"})((e=>e.theme.overflowEllipsis),";display:flex;min-width:320px;"),I=(0,a.Z)("span",{target:"er9kbce2"})((e=>e.theme.overflowEllipsis),";width:auto;"),X=(0,a.Z)(B,{target:"er9kbce1"})({name:"1f60if8",styles:"justify-content:flex-end"}),_=(0,a.Z)(A.Z,{target:"er9kbce0"})({name:"ti75j2",styles:"margin:0"})}}]);
//# sourceMappingURL=../sourcemaps/app_views_issueDetails_groupTagValues_tsx.1c013640f6b2cce73cb2c74c5a3afe94.js.map