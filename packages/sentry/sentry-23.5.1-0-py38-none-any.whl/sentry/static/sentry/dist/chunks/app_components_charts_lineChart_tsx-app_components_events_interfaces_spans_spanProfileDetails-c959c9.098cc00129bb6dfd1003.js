"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_charts_lineChart_tsx-app_components_events_interfaces_spans_spanProfileDetails-c959c9"],{"./app/components/charts/lineChart.tsx":(e,t,n)=>{n.d(t,{w:()=>a});var r=n("./app/components/charts/series/lineSeries.tsx"),o=n("./app/components/charts/baseChart.tsx"),s=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e){let{series:t,seriesOptions:n,...a}=e;return(0,s.tZ)(o.Z,{...a,series:t.map((e=>{let{seriesName:t,data:o,dataArray:s,...a}=e;return(0,r.Z)({...n,...a,name:t,data:s||o?.map((e=>{let{value:t,name:n}=e;return[n,t]})),animation:!1,animationThreshold:1,animationDuration:0})}))})}a.displayName="LineChart"},"./app/components/events/interfaces/crashContent/stackTrace/index.tsx":(e,t,n)=>{n.d(t,{b:()=>d});var r=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=n("./app/components/errorBoundary.tsx"),s=n("./app/types/stacktrace.tsx"),a=n("./app/utils/platform.tsx"),i=n("./app/components/events/interfaces/crashContent/stackTrace/content.tsx"),l=n("./app/components/events/interfaces/crashContent/stackTrace/hierarchicalGroupingContent.tsx"),c=n("./app/components/events/interfaces/crashContent/stackTrace/nativeContent.tsx"),u=n("./app/components/events/interfaces/crashContent/stackTrace/rawContent.tsx"),p=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(e){let{stackView:t,stacktrace:n,event:r,newestFirst:i,platform:l,hasHierarchicalGrouping:c,groupingCurrentLevel:d,maxDepth:m,meta:x,inlined:y}=e;return t===s.U.RAW?(0,p.tZ)(o.Z,{mini:!0,children:(0,p.tZ)("pre",{className:"traceback plain",children:(0,u.ZP)(n,r.platform)})}):(0,a.gx)(l)?(0,p.tZ)(o.Z,{mini:!0,children:(0,p.tZ)(f,{data:n,includeSystemFrames:t===s.U.FULL,platform:l,event:r,newestFirst:i,groupingCurrentLevel:d,meta:x,inlined:y,maxDepth:m})}):c?(0,p.tZ)(o.Z,{mini:!0,children:(0,p.tZ)(h,{data:n,className:"no-exception",includeSystemFrames:t===s.U.FULL,platform:l,event:r,newestFirst:i,groupingCurrentLevel:d,meta:x,hideIcon:y,inlined:y,maxDepth:m})}):(0,p.tZ)(o.Z,{mini:!0,children:(0,p.tZ)(g,{data:n,className:"no-exception",includeSystemFrames:t===s.U.FULL,platform:l,event:r,newestFirst:i,meta:x,hideIcon:y,inlined:y,maxDepth:m})})}d.displayName="StackTraceContent";const m="\n  border-radius: 0;\n  border-left: 0;\n  border-right: 0;\n",f=(0,r.Z)(c.R,{target:"e1ebqxs52"})((e=>e.inlined&&m),";"),h=(0,r.Z)(l.Y,{target:"e1ebqxs51"})((e=>e.inlined&&m),";"),g=(0,r.Z)(i.Z,{target:"e1ebqxs50"})((e=>e.inlined&&m),";")},"./app/components/events/interfaces/crashContent/stackTrace/rawContent.tsx":(e,t,n)=>{n.d(t,{ZP:()=>i}),n("../node_modules/core-js/modules/es.array.push.js"),n("../node_modules/core-js/modules/es.array.unshift.js");var r=n("./app/components/events/interfaces/frame/utils.tsx"),o=n("./app/utils.tsx");function s(e,t){return e+Array(Math.max(0,t-e.length)+1).join(" ")}function a(e,t,n){switch(e.platform&&(n=e.platform),n){case"javascript":return function(e){let t="";return(0,o.ri)(e.function)?t+="  at "+e.function+"(":t+="  at ? (",(0,o.ri)(e.filename)?t+=e.filename:(0,o.ri)(e.module)&&(t+=e.module),(0,o.ri)(e.lineNo)&&e.lineNo>=0&&(t+=":"+e.lineNo),(0,o.ri)(e.colNo)&&e.colNo>=0&&(t+=":"+e.colNo),t+=")",t}(e);case"ruby":return function(e){let t="  from ";return(0,o.ri)(e.filename)?t+=e.filename:(0,o.ri)(e.module)?t+="("+e.module+")":t+="?",(0,o.ri)(e.lineNo)&&e.lineNo>=0&&(t+=":"+e.lineNo),(0,o.ri)(e.colNo)&&e.colNo>=0&&(t+=":"+e.colNo),(0,o.ri)(e.function)&&(t+=":in `"+e.function+"'"),t}(e);case"php":return function(e,t){const n="null"===e.function?"{main}":e.function;return`#${t} ${e.filename||e.module}(${e.lineNo}): ${n}`}(e,t);case"python":default:return function(e){let t="";return(0,o.ri)(e.filename)?t+='  File "'+e.filename+'"':(0,o.ri)(e.module)?t+='  Module "'+e.module+'"':t+="  ?",(0,o.ri)(e.lineNo)&&e.lineNo>=0&&(t+=", line "+e.lineNo),(0,o.ri)(e.colNo)&&e.colNo>=0&&(t+=", col "+e.colNo),(0,o.ri)(e.function)&&(t+=", in "+e.function),(0,o.ri)(e.context)&&e.context.forEach((n=>{n[0]===e.lineNo&&(t+="\n    "+(0,o.fy)(n[1]))})),t}(e);case"java":return function(e){let t="    at";return(0,o.ri)(e.module)&&(t+=" "+e.module+"."),(0,o.ri)(e.function)&&(t+=e.function),(0,o.ri)(e.filename)&&(t+="("+e.filename,(0,o.ri)(e.lineNo)&&e.lineNo>=0&&(t+=":"+e.lineNo),t+=")"),t}(e);case"objc":case"cocoa":case"native":return function(e){let t="  ";return(0,o.ri)(e.package)&&(t+=s((0,r.Q6)(e.package),20)),(0,o.ri)(e.instructionAddr)&&(t+=s(e.instructionAddr,12)),t+=" "+(e.function||e.symbolAddr),(0,o.ri)(e.filename)&&(t+=" ("+e.filename,(0,o.ri)(e.lineNo)&&e.lineNo>=0&&(t+=":"+e.lineNo),t+=")"),t}(e)}}function i(e,t,n){const r=[];return(e?.frames??[]).forEach(((e,n)=>{r.push(a(e,n,t))})),"python"!==t&&r.reverse(),n&&r.unshift(function(e,t){return"java"===t?function(e){let t=`${e.type}: ${e.value}`;return e.module&&(t=`${e.module}.${t}`),t}(e):e.type+": "+e.value}(n,t)),r.join("\n")}},"./app/components/events/interfaces/spans/spanProfileDetails.tsx":(e,t,n)=>{n.d(t,{O:()=>k});var r=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(n("../node_modules/core-js/modules/es.array.push.js"),n("../node_modules/react/index.js")),s=n("./app/components/button.tsx"),a=n("./app/components/buttonBar.tsx"),i=n("./app/components/charts/styles.tsx"),l=n("./app/components/events/interfaces/crashContent/stackTrace/index.tsx"),c=n("./app/components/tooltip.tsx"),u=n("./app/icons/index.tsx"),p=n("./app/locale.tsx"),d=n("./app/styles/space.tsx"),m=n("./app/types/event.tsx"),f=n("./app/types/stacktrace.tsx"),h=n("./app/utils.tsx"),g=n("./app/utils/formatters.tsx"),x=n("./app/utils/profiling/callTreeNode.tsx"),y=n("./app/utils/profiling/frame.tsx"),v=n("./app/utils/profiling/routes.tsx"),b=n("./app/utils/profiling/units/units.ts"),j=n("./app/utils/useOrganization.tsx"),Z=n("./app/utils/useProjects.tsx"),P=n("./app/views/profiling/profileGroupProvider.tsx"),N=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const w=8,S=5,C=3,_=3;function k(e){let{event:t,span:n,onNoProfileFound:r}=e;const d=(0,j.Z)(),{projects:k}=(0,Z.Z)(),F=k.find((e=>e.id===t.projectID)),$=(0,P.A)(),M=(0,o.useMemo)((()=>{const e=[...t.entries||[]];return $.images&&e.push({data:{images:$.images},type:m.UZ.DEBUGMETA}),{...t,entries:e}}),[t,$]),U=(0,o.useMemo)((()=>$.profiles[$.activeProfileIndex]?.threadId),[$]),B=(0,o.useMemo)((()=>(0,h.ri)(U)?$.profiles.find((e=>e.threadId===U))??null:null),[$.profiles,U]),E=(0,o.useMemo)((()=>{if(null===B)return[];const e=(0,b.CD)(n.start_timestamp-t.startTimestamp,"second",B.unit),r=(0,b.CD)(n.timestamp-t.startTimestamp,"second",B.unit);return function(e,t,n){let r=e.startedAt;const o=new x.n(y.R.Root,null);for(let s=0;s<e.samples.length;s++){const a=e.samples[s],i=t<=r&&r<n;if(r+=e.weights[s],a.isRoot||!i)continue;const l=[a];let c=a;for(;c&&!c.isRoot;)l.push(c),c=c.parent;let u=o;for(let e=l.length-1;e>=0;e--){c=l[e];const t=c.frame;let n=u.children.find((e=>e.frame===t));(0,h.ri)(n)||(n=new x.n(t,u),u.children.push(n)),n.count+=c.count,n.selfWeight+=c.selfWeight,u=n}}const s=[],a=[o];for(;a.length;){const e=a.pop();0!==e.children.length?a.push(...e.children):s.push(e)}return s.sort(T)}(B,e,r).filter(q)}),[B,n,t]),[L,R]=(0,o.useState)(0),G=(0,o.useMemo)((()=>E.reduce(((e,t)=>e+t.count),0)),[E]),O=(0,o.useMemo)((()=>{let e=0;for(let t=0;t<E.length&&E[t].count>=_;t++)e+=1;return e=Math.max(C,e),Math.min(E.length,S,e)}),[E]),{frames:X,hasPrevious:H,hasNext:W}=(0,o.useMemo)((()=>L>=O?{frames:[],hasPrevious:!1,hasNext:!1}:{frames:I(E[L],t.platform||"other"),hasPrevious:L>0,hasNext:L+1<O}),[L,O,t,E]),V=F&&$&&$.metadata.profileID&&B&&(0,v.TH)({orgSlug:d.slug,projectSlug:F.slug,profileId:$.metadata.profileID,query:{tid:String(B.threadId),spanId:n.span_id}});return(0,h.ri)(B)&&(0,h.ri)(V)?X.length?(0,N.BX)(o.Fragment,{children:[(0,N.BX)(D,{children:[(0,N.tZ)(z,{grow:!0,children:(0,N.tZ)(i.OT,{children:(0,p.t)("Most Frequent Stacks in this Span")})}),(0,N.tZ)(z,{children:(0,N.tZ)(A,{children:(0,N.tZ)(c.u,{title:(0,p.t)("%s out of %s samples",E[L].count,G),children:(0,p._N)("Showing stacks [index] of [total] ([percentage])",{index:L+1,total:O,percentage:(0,g.rl)(E[L].count/G)})})})}),(0,N.tZ)(z,{children:(0,N.BX)(a.ZP,{merged:!0,children:[(0,N.tZ)(s.zx,{icon:(0,N.tZ)(u.g6,{direction:"left",size:"xs"}),"aria-label":(0,p.t)("Previous"),size:"xs",disabled:!H,onClick:()=>{R((e=>e-1))}}),(0,N.tZ)(s.zx,{icon:(0,N.tZ)(u.g6,{direction:"right",size:"xs"}),"aria-label":(0,p.t)("Next"),size:"xs",disabled:!W,onClick:()=>{R((e=>e+1))}})]})}),(0,N.tZ)(z,{children:(0,N.tZ)(s.zx,{icon:(0,N.tZ)(u.eb,{}),to:V,size:"xs",children:(0,p.t)("View Profile")})})]}),(0,N.tZ)(l.b,{event:M,hasHierarchicalGrouping:!1,newestFirst:!0,platform:t.platform||"other",stacktrace:{framesOmitted:null,hasSystemFrames:!1,registers:null,frames:X},stackView:f.U.APP,inlined:!0,maxDepth:w})]}):(r&&r(),null):null}function T(e,t){return e.count===t.count?t.selfWeight-e.selfWeight:t.count-e.count}function q(e){for(;e&&!e.isRoot;){if(e.frame.is_application)return!0;e=e.parent}return!1}function I(e,t){const n=[];for(;e&&!e.isRoot;){const r={absPath:e.frame.path??null,colNo:e.frame.column??null,context:[],errors:null,filename:e.frame.file??null,function:e.frame.name??null,inApp:e.frame.is_application,instructionAddr:e.frame.instructionAddr??null,lineNo:e.frame.line??null,module:e.frame.module??null,package:e.frame.package??null,platform:t,rawFunction:null,symbol:e.frame.symbol??null,symbolAddr:e.frame.symbolAddr??null,symbolicatorStatus:e.frame.symbolicatorStatus,trust:null,vars:null};n.push(r),e=e.parent}return n.reverse()}k.displayName="SpanProfileDetails";const D=(0,r.Z)("div",{target:"etbrk8g2"})("padding:",(0,d.D)(2),";display:flex;align-items:baseline;gap:",(0,d.D)(1),";"),z=(0,r.Z)("span",{target:"etbrk8g1"})((e=>e.grow?"flex: 1 2 auto":"flex: 0 1 auto"),";"),A=(0,r.Z)("span",{target:"etbrk8g0"})("color:",(e=>e.theme.subText),";font-size:",(e=>e.theme.fontSizeMedium),";")},"./app/components/profiling/profilingBreadcrumbs.tsx":(e,t,n)=>{n.d(t,{u:()=>u}),n("../node_modules/core-js/modules/es.error.cause.js");var r=n("../node_modules/react/index.js"),o=n("../node_modules/lodash/omit.js"),s=n.n(o),a=n("./app/components/breadcrumbs.tsx"),i=n("./app/locale.tsx"),l=n("./app/utils/profiling/routes.tsx"),c=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function u(e){let{organization:t,trails:n}=e;const o=(0,r.useMemo)((()=>n.map((e=>function(e,t){let{organization:n}=t;switch(e.type){case"landing":return{to:(0,l.XR)({query:s()(e.payload.query,["cursor","query"]),orgSlug:n.slug}),label:(0,i.t)("Profiling"),preservePageFilters:!0};case"profile summary":return{to:(0,l.R0)({query:s()(e.payload.query,["cursor","query"]),orgSlug:n.slug,projectSlug:e.payload.projectSlug,transaction:e.payload.transaction}),label:(0,i.t)("Profile Summary"),preservePageFilters:!0};case"flamechart":return{to:(0,l.TH)({query:e.payload.query,orgSlug:n.slug,projectSlug:e.payload.projectSlug,profileId:e.payload.profileId}),label:e.payload.transaction,preservePageFilters:!0};default:throw new Error(`Unknown breadcrumb type: ${JSON.stringify(e)}`)}}(e,{organization:t})))),[t,n]);return(0,c.tZ)(a.Z,{crumbs:o})}u.displayName="ProfilingBreadcrumbs"},"./app/views/profiling/profilesProvider.tsx":(e,t,n)=>{n.r(t),n.d(t,{ProfileContext:()=>P,ProfileTransactionContext:()=>C,ProfilesProvider:()=>T,default:()=>q,useProfileTransaction:()=>_,useProfiles:()=>w,useSetProfiles:()=>S}),n("../node_modules/core-js/modules/es.error.cause.js");var r=n("../node_modules/react/index.js"),o=n("../node_modules/@sentry/core/esm/exports.js"),s=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=n("./app/components/button.tsx"),i=n("./app/components/layouts/thirds.tsx"),l=n("./app/components/profiling/profilingBreadcrumbs.tsx"),c=n("./app/locale.tsx"),u=n("./app/styles/space.tsx"),p=n("./app/utils/analytics.tsx"),d=n("./app/utils/performance/urls.ts"),m=n("./app/utils/profiling/guards/profile.tsx"),f=n("./app/utils/useLocation.tsx"),h=n("./app/utils/useOrganization.tsx"),g=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function x(e){let{transaction:t,projectId:n,eventId:o}=e;const s=(0,f.T)(),u=(0,h.Z)(),x=w(),j="resolved"===x.type?(Z=x.data,(0,m.nN)(Z)?Z.metadata.transactionName:(0,m.AN)(Z)&&Z.transaction.name||(0,c.t)("Unknown Transaction")):"";var Z;const P=o??"",N=n??"",S=t?.id?(0,d.D)(u.slug,`${N}:${t.id}`):null,C=(0,r.useCallback)((()=>{(0,p.Gi)("profiling_views.go_to_transaction",{organization:u,source:"transaction_details"})}),[u]),_=(0,r.useMemo)((()=>[{type:"landing",payload:{query:s.query}},{type:"profile summary",payload:{projectSlug:N,transaction:j,query:s.query}},{type:"flamechart",payload:{transaction:j,profileId:P,projectSlug:N,query:s.query}}]),[s,N,j,P]);return(0,g.BX)(b,{children:[(0,g.tZ)(y,{children:(0,g.tZ)(v,{children:(0,g.tZ)(l.u,{organization:u,trails:_})})}),(0,g.tZ)(i.kP,{children:S&&(0,g.tZ)(a.zx,{size:"sm",onClick:C,to:S,children:(0,c.t)("Go to Transaction")})})]})}x.displayName="ProfileHeader";const y=(0,s.Z)(i.oB,{target:"e1eqzoq72"})("margin-bottom:",(0,u.D)(1.5),";"),v=(0,s.Z)("div",{target:"e1eqzoq71"})("nav{padding-bottom:",(0,u.D)(1),";}"),b=(0,s.Z)(i.h4,{target:"e1eqzoq70"})("padding:",(0,u.D)(1)," ",(0,u.D)(2)," ",(0,u.D)(0)," ",(0,u.D)(2),"!important;");var j=n("./app/utils/useApi.tsx"),Z=n("./app/utils/useParams.tsx");const P=(0,r.createContext)(null),N=(0,r.createContext)(null);function w(){const e=(0,r.useContext)(P);if(!e)throw new Error("useProfiles was called outside of ProfileProvider");return e}function S(){const e=(0,r.useContext)(N);if(!e)throw new Error("useSetProfiles was called outside of SetProfileProvider");return e}const C=(0,r.createContext)(null);function _(){const e=(0,r.useContext)(C);if(!e)throw new Error("useProfileTransaction was called outside of ProfileTransactionContext");return e}function k(e){const t=(0,h.Z)(),n=(0,Z.U)(),[o,s]=(0,r.useState)({type:"initial"}),a=function(e,t,n){const o=(0,j.Z)(),[s,a]=(0,r.useState)({type:"initial"});return(0,r.useEffect)((()=>{if(null!==n)return a({type:"loading"}),function(e,t,n,r){return e.requestPromise(`/projects/${t}/${n}/events/${r}/`)}(o,e,t,n).then((e=>{a({type:"resolved",data:e})})).catch((e=>{a({type:"errored",error:e})})),()=>{o.clear()}}),[o,e,t,n]),s}(t.slug,n.projectId,"resolved"===o.type?(i=o.data,(0,m.nN)(i)?i.metadata.transactionID:(0,m.AN)(i)?i.transaction.id:null):null);var i;return(0,g.tZ)(T,{onUpdateProfiles:s,orgSlug:t.slug,profileId:n.eventId,projectSlug:n.projectId,children:(0,g.tZ)(N.Provider,{value:s,children:(0,g.BX)(C.Provider,{value:a,children:[(0,g.tZ)(x,{eventId:n.eventId,projectId:n.projectId,transaction:"resolved"===a.type?a.data:null}),e.children]})})})}function T(e){let{children:t,onUpdateProfiles:n,orgSlug:s,projectSlug:a,profileId:i}=e;const l=(0,j.Z)(),[u,p]=(0,r.useState)({type:"initial"});return(0,r.useEffect)((()=>{if(i&&a&&s)return p({type:"loading"}),function(e,t,n,r){return e.requestPromise(`/projects/${r}/${n}/profiling/profiles/${t}/`,{method:"GET",includeAllArgs:!0}).then((e=>{let[t]=e;return t}))}(l,i,a,s).then((e=>{p({type:"resolved",data:e}),n?.({type:"resolved",data:e})})).catch((e=>{const t="[object Object]"===e.toString()?(0,c.t)("Error: Unable to load profiles"):e.toString();p({type:"errored",error:t}),n?.({type:"errored",error:t}),o.Tb(e)})),()=>{l.clear()}}),[l,n,s,a,i]),(0,g.tZ)(P.Provider,{value:u,children:t})}k.displayName="ProfilesAndTransactionProvider",T.displayName="ProfilesProvider";const q=k}}]);
//# sourceMappingURL=../sourcemaps/app_components_charts_lineChart_tsx-app_components_events_interfaces_spans_spanProfileDetails-c959c9.b7f619d8a39d35becfbc45e6763afccf.js.map