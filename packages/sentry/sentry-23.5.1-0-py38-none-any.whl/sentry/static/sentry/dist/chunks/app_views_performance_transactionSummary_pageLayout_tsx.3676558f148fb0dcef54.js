"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_performance_transactionSummary_pageLayout_tsx","app_components_pickProjectToContinue_tsx"],{"./app/components/createAlertButton.tsx":(e,t,n)=>{n.d(t,{K:()=>g,Z:()=>S});var r=n("./app/actionCreators/indicator.tsx"),s=n("./app/actionCreators/navigation.tsx"),a=n("./app/components/acl/access.tsx"),o=n("./app/components/assistant/guideAnchor.tsx"),i=n("./app/components/button.tsx"),c=n("./app/components/links/link.tsx"),l=n("./app/icons/index.tsx"),u=n("./app/locale.tsx"),p=n("./app/utils/useApi.tsx"),d=n("./app/utils/useRouter.tsx"),m=n("./app/views/alerts/wizard/options.tsx"),h=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function g(e){let{projects:t,eventView:n,organization:r,referrer:s,onClick:a,alertType:o,disableMetricDataset:i,...c}=e;const l=t.find((e=>e.id===`${n.project[0]}`)),p=n.generateQueryStringObject();p.query?.includes(`project:${l?.slug}`)&&(p.query=p.query.replace(`project:${l?.slug}`,""));const d=o?m.FZ[o]:m.F4,g={pathname:`/organizations/${r.slug}/alerts/new/metric/`,query:{...p,createFromDiscover:!0,disableMetricDataset:i,referrer:s,...d,project:l?.slug,aggregate:p.yAxis??d.aggregate}};return(0,h.tZ)(f,{organization:r,onClick:()=>{a?.()},to:g,"aria-label":(0,u.t)("Create Alert"),...c})}function f(e){let{organization:t,projectSlug:n,iconProps:m,referrer:g,hideIcon:f,showPermissionGuide:S,alertOption:y,onEnter:T,...v}=e;const E=(0,d.Z)(),x=(0,p.Z)(),_=e=>{const n=new URLSearchParams;return g&&n.append("referrer",g),":projectId"!==e&&n.append("project",e),y&&n.append("alert_option",y),`/organizations/${t.slug}/alerts/wizard/?${n.toString()}`};function A(e){e.preventDefault(),T?.(),(0,s.T)(_(":projectId"),E)}async function b(){const e=`/organizations/${t.slug}/`;(0,r.E3)();try{await x.requestPromise(e,{method:"PUT",data:{alertsMemberWrite:!0}}),(0,r.S9)((0,u.t)("Successfully updated organization settings"))}catch(e){(0,r.Iw)((0,u.t)("Unable to update organization settings"))}}const N=(0,u._N)("Ask your organization owner or manager to [settingsLink:enable alerts access] for you.",{settingsLink:(0,h.tZ)(c.Z,{to:`/settings/${t.slug}`})}),R=e=>(0,h.tZ)(i.zx,{disabled:!e,title:e?void 0:N,icon:!f&&(0,h.tZ)(l.vr,{...m}),to:n?_(n):void 0,tooltipProps:{isHoverable:!0,position:"top",overlayStyle:{maxWidth:"270px"}},onClick:n?T:A,...v,children:v.children??(0,u.t)("Create Alert")}),C=!t.alertsMemberWrite&&!!S;return(0,h.tZ)(a.Z,{access:["alerts:write"],children:e=>{let{hasAccess:t}=e;return C?(0,h.tZ)(a.Z,{access:["org:write"],children:e=>{let{hasAccess:n}=e;return(0,h.tZ)(o.Z,{target:n?"alerts_write_owner":"alerts_write_member",onFinish:n?b:void 0,children:R(t)})}}):R(t)}})}g.displayName="CreateAlertFromViewButton",f.displayName="CreateAlertButton";const S=f},"./app/components/pickProjectToContinue.tsx":(e,t,n)=>{n.d(t,{Z:()=>l});var r=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=(n("../node_modules/core-js/modules/es.array.push.js"),n("./app/actionCreators/modal.tsx")),a=n("./app/components/contextPickerModal.tsx"),o=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){let{noProjectRedirectPath:t,nextPath:n,router:r,projects:i,allowAllProjectsSelection:l=!1}=e;const u=n.query;let p=!1,d=`${n.pathname}?project=`;if(u){const e=[...Object.entries(u).filter((e=>{let[t,n]=e;return"project"!==t})).map((e=>{let[t,n]=e;return`${t}=${n}`})),"project="].join("&");d=`${n.pathname}?${e}`}return 1===i.length?(r.replace(d+i[0].id),null):((0,s.openModal)((e=>(0,o.tZ)(a.Z,{...e,needOrg:!1,needProject:!0,nextPath:`${d}:project`,onFinish:e=>{p=!0,r.replace(e)},projectSlugs:i.map((e=>e.slug)),allowAllProjectsSelection:l})),{onClose(){p||r.push(t)}}),(0,o.tZ)(c,{}))}i.displayName="PickProjectToContinue";const c=(0,r.Z)("div",{target:"e1pnb7yr0"})({name:"4wiox3",styles:"height:100vh;width:100%"}),l=i},"./app/components/replays/replayCountBadge.tsx":(e,t,n)=>{n.d(t,{Z:()=>o});var r=n("./app/components/badge.tsx"),s=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e){let{count:t}=e;const n=t&&t>50?"50+":t??null;return(0,s.tZ)(r.Z,{text:n})}a.displayName="ReplayCountBadge";const o=a},"./app/components/replays/replaysFeatureBadge.tsx":(e,t,n)=>{n.d(t,{Z:()=>o});var r=n("./app/components/featureBadge.tsx"),s=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e){return(0,s.tZ)(r.Z,{...e,type:"new"})}a.displayName="ReplaysFeatureBadge";const o=a},"./app/utils/discover/discoverQuery.tsx":(e,t,n)=>{n.d(t,{Z:()=>c,_:()=>i});var r=n("./app/utils/discover/genericDiscoverQuery.tsx"),s=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e,t){return e.transactionName!==t.transactionName||e.transactionThreshold!==t.transactionThreshold||e.transactionThresholdMetric!==t.transactionThresholdMetric}function o(e){return(0,s.tZ)(r.ZP,{route:"events",shouldRefetchData:a,afterFetch:(e,t)=>{const{fields:n,...r}=e.meta??{};return{...e,meta:{...n,...r}}},...e})}function i(e){return(0,r.JC)({route:"events",shouldRefetchData:a,afterFetch:(e,t)=>{const{fields:n,...r}=e.meta??{};return{...e,meta:{...n,...r}}},...e})}o.displayName="DiscoverQuery";const c=o},"./app/utils/performance/contexts/metricsCardinality.tsx":(e,t,n)=>{n.d(t,{BT:()=>x,e0:()=>A});var r=n("../node_modules/react/index.js"),s=n("./app/utils/analytics.tsx"),a=n("./app/utils/dates.tsx"),o=n("./app/utils/discover/eventView.tsx"),i=n("./app/utils/performance/contexts/metricsEnhancedSetting.tsx"),c=n("../node_modules/lodash/omit.js"),l=n.n(c),u=n("./app/utils/discover/genericDiscoverQuery.tsx"),p=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(e){let{eventView:t,location:n}=e;return l()(t.getEventsAPIPayload(n),["field","sort","per_page","query"])}function m(e){let{children:t,...n}=e;return(0,p.tZ)(u.ZP,{route:"metrics-compatibility-sums",getRequestPayload:d,...n,children:e=>{let{tableData:n,...r}=e;return t({tableData:n,...r})}})}function h(e){let{eventView:t,location:n}=e;return l()(t.getEventsAPIPayload(n),["field","sort","per_page","query"])}function g(e){let{children:t,...n}=e;return(0,p.tZ)(u.ZP,{route:"metrics-compatibility",getRequestPayload:h,...n,children:e=>{let{tableData:n,...r}=e;return t({tableData:n,...r})}})}m.displayName="MetricsCompatibilityQuery",g.displayName="MetricsCompatibilitySumsQuery";var f=n("./app/utils/performance/contexts/utils.tsx");const S=.01,y=.01,[T,v,E]=(0,f.n)({name:"MetricsCardinalityContext",strict:!1});function x(e){if(!(0,i.gp)(e.organization))return(0,p.tZ)(T,{value:{isLoading:!1,outcome:{forceTransactionsOnly:!0}},children:e.children});const t={location:e.location,orgSlug:e.organization.slug,cursor:"0:0:0"},n=o.ZP.fromLocation(e.location);n.fields=[{field:"tpm()"}];const s=function(e){const t=e.clone();return t.start||t.end||(t.statsPeriod?(0,a.YJ)(t.statsPeriod)>1&&(t.statsPeriod="1h",t.start=void 0,t.end=void 0):(t.statsPeriod="1h",t.start=void 0,t.end=void 0)),t}(n);return(0,p.tZ)(r.Fragment,{children:(0,p.tZ)(m,{eventView:s,...t,children:n=>(0,p.tZ)(g,{eventView:s,...t,children:t=>{const r=n.isLoading||t.isLoading,s=n.isLoading||t.isLoading?void 0:function(e,t,n){const r={forceTransactionsOnly:!0},s=n.features.includes("performance-mep-bannerless-ui");if(!e)return r;const a=e.compatible_projects;return t?r:e?function(e){return!b(e).metricsCount}(e)?r:function(e,t){const n=b(e);return t?n.nullCount/n.metricsCount>y:n.nullCount>0}(e,s)?{shouldWarnIncompatibleSDK:!0,forceTransactionsOnly:!0,compatibleProjects:a}:function(e){const t=b(e);return t.unparamCount>=t.metricsCount}(e)?{shouldNotifyUnnamedTransactions:!0,forceTransactionsOnly:!0,compatibleProjects:a}:function(e,t){const n=b(e);return t?n.unparamCount/n.metricsCount>S:n.unparamCount>0}(e,s)?{shouldNotifyUnnamedTransactions:!0,compatibleProjects:a,forceTransactionsOnly:!1}:{forceTransactionsOnly:!1}:r}(n.tableData&&t.tableData?{...n.tableData,...t.tableData}:null,!!n.error&&!!t.error,e.organization);return(0,p.tZ)(_,{sendOutcomeAnalytics:e.sendOutcomeAnalytics,organization:e.organization,value:{isLoading:r,outcome:s},children:e.children})}})})})}function _(e){const t=e.value.outcome?.shouldWarnIncompatibleSDK??!1,n=e.value.outcome?.shouldNotifyUnnamedTransactions??!1,a=!e.value.outcome?.forceTransactionsOnly;return(0,r.useEffect)((()=>{!e.value.isLoading&&e.sendOutcomeAnalytics&&(0,s.Gi)("performance_views.mep.metrics_outcome",{organization:e.organization,is_on_metrics:a,fallback_from_null:t,fallback_from_unparam:n})}),[e.organization,e.value.isLoading,a,n,t,e.sendOutcomeAnalytics]),(0,p.tZ)(T,{...e,children:e.children})}x.displayName="MetricsCardinalityProvider",_.displayName="Provider",E.Consumer;const A=v;function b(e){let{sum:t}=e;try{const e=Number(t.metrics);return{metricsCount:e,unparamCount:Number(t.metrics_unparam),nullCount:Number(t.metrics_null)}}catch(e){return{metricsCount:0,unparamCount:0,nullCount:0}}}},"./app/utils/performance/histogram/utils.tsx":(e,t,n)=>{n.d(t,{GT:()=>o,_W:()=>a,te:()=>s}),n("../node_modules/core-js/modules/es.error.cause.js");var r=n("./app/utils/formatters.tsx");function s(e){return e.length>=2?e[1].bin-e[0].bin:0}function a(e){const t=s(e);return e.map((e=>{const n=e.bin;return{start:n,end:n+t}}))}function o(e){let{precision:t,type:n,additionalFieldsFn:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=e=>{switch(n){case"duration":const s=t??(e<1e3?0:3);return(0,r.g9)(e/1e3,s,!0);case"number":const a=10**(t??0);return(Math.round((e+Number.EPSILON)*a)/a).toLocaleString();default:throw new Error(`Unable to format type: ${n}`)}};return e.map((e=>({value:e.count,name:a(e.bin),...s?.(e.bin)??{}})))}},"./app/utils/replays/projectSupportsReplay.tsx":(e,t,n)=>{n.d(t,{Z:()=>a,u:()=>s});var r=n("./app/data/platformCategories.tsx");function s(e){return!(!e||!e.platform)&&(r.Vq.includes(e.platform)||r.y3.some((t=>t===e.platform)))}const a=function(e){return Boolean(e.platform&&r.Vq.includes(e.platform))}},"./app/views/alerts/rules/metric/types.tsx":(e,t,n)=>{n.d(t,{F4:()=>a,GM:()=>c,LO:()=>h,Lm:()=>g,Tb:()=>d,Us:()=>m,XH:()=>p,Yh:()=>l,hd:()=>f,lK:()=>u,lT:()=>s,qz:()=>i,t6:()=>o});var r=n("./app/locale.tsx");let s,a,o,i,c,l,u,p,d,m;!function(e){e[e.ABOVE=0]="ABOVE",e[e.BELOW=1]="BELOW"}(s||(s={})),function(e){e.CRITICAL="critical",e.WARNING="warning",e.RESOLVE="resolve"}(a||(a={})),function(e){e.COUNT="count",e.CHANGE="change",e.PERCENT="percent"}(o||(o={})),function(e){e.ERRORS="events",e.TRANSACTIONS="transactions",e.GENERIC_METRICS="generic_metrics",e.SESSIONS="sessions",e.METRICS="metrics"}(i||(i={})),function(e){e.DEFAULT="default",e.ERROR="error",e.TRANSACTION="transaction",e.USER="user",e.SESSION="session"}(c||(c={})),function(e){e.ERROR_DEFAULT="error_default",e.DEFAULT="default",e.ERROR="error",e.TRANSACTION="transaction"}(l||(l={})),function(e){e.CRASH_FREE_SESSIONS="percentage(sessions_crashed, sessions) AS _crash_rate_alert_aggregate",e.CRASH_FREE_USERS="percentage(users_crashed, users) AS _crash_rate_alert_aggregate"}(u||(u={})),function(e){e.SIX_HOURS="6h",e.ONE_DAY="1d",e.THREE_DAYS="3d",e.SEVEN_DAYS="10000m",e.FOURTEEN_DAYS="14d",e.THIRTY_DAYS="30d"}(p||(p={})),function(e){e[e.ONE_MINUTE=1]="ONE_MINUTE",e[e.FIVE_MINUTES=5]="FIVE_MINUTES",e[e.TEN_MINUTES=10]="TEN_MINUTES",e[e.FIFTEEN_MINUTES=15]="FIFTEEN_MINUTES",e[e.THIRTY_MINUTES=30]="THIRTY_MINUTES",e[e.ONE_HOUR=60]="ONE_HOUR",e[e.TWO_HOURS=120]="TWO_HOURS",e[e.FOUR_HOURS=240]="FOUR_HOURS",e[e.ONE_DAY=1440]="ONE_DAY"}(d||(d={})),function(e){e.EMAIL="email",e.SLACK="slack",e.PAGERDUTY="pagerduty",e.MSTEAMS="msteams",e.SENTRY_APP="sentry_app"}(m||(m={}));const h={[m.EMAIL]:(0,r.t)("Emai​l"),[m.SLACK]:(0,r.t)("Slack"),[m.PAGERDUTY]:(0,r.t)("Pagerduty"),[m.MSTEAMS]:(0,r.t)("MS Teams"),[m.SENTRY_APP]:(0,r.t)("Notification")};let g;!function(e){e.SPECIFIC="specific",e.USER="user",e.TEAM="team",e.SENTRY_APP="sentry_app"}(g||(g={}));const f={[g.USER]:(0,r.t)("Member"),[g.TEAM]:(0,r.t)("Team")}},"./app/views/alerts/wizard/options.tsx":(e,t,n)=>{n.d(t,{A_:()=>d,F4:()=>h,F7:()=>g,FZ:()=>m,KV:()=>v,LH:()=>f,LU:()=>E,S:()=>x,VS:()=>u,gb:()=>p});var r=n("../node_modules/lodash/mapValues.js"),s=n.n(r),a=n("./app/locale.tsx"),o=n("./app/utils/fields/index.ts"),i=n("./app/views/alerts/rules/metric/types.tsx");let c,l;!function(e){e[e.ERROR=0]="ERROR",e[e.PERFORMANCE=1]="PERFORMANCE",e[e.CRASH_RATE=2]="CRASH_RATE"}(c||(c={})),function(e){e.DISCOVER="discover",e.METRICS="metrics",e.METRICS_ENHANCED="metricsEnhanced"}(l||(l={}));const u={[i.qz.ERRORS]:c.ERROR,[i.qz.TRANSACTIONS]:c.PERFORMANCE,[i.qz.GENERIC_METRICS]:c.PERFORMANCE,[i.qz.METRICS]:c.CRASH_RATE,[i.qz.SESSIONS]:c.CRASH_RATE},p={issues:(0,a.t)("Issues"),num_errors:(0,a.t)("Number of Errors"),users_experiencing_errors:(0,a.t)("Users Experiencing Errors"),throughput:(0,a.t)("Throughput"),trans_duration:(0,a.t)("Transaction Duration"),apdex:(0,a.t)("Apdex"),failure_rate:(0,a.t)("Failure Rate"),lcp:(0,a.t)("Largest Contentful Paint"),fid:(0,a.t)("First Input Delay"),cls:(0,a.t)("Cumulative Layout Shift"),custom:(0,a.t)("Custom Metric"),crash_free_sessions:(0,a.t)("Crash Free Session Rate"),crash_free_users:(0,a.t)("Crash Free User Rate")},d=e=>[{categoryHeading:(0,a.t)("Errors"),options:["issues","num_errors","users_experiencing_errors"]},...e.features.includes("crash-rate-alerts")?[{categoryHeading:(0,a.t)("Sessions"),options:["crash_free_sessions","crash_free_users"]}]:[],{categoryHeading:(0,a.t)("Performance"),options:["throughput","trans_duration","apdex","failure_rate","lcp","fid","cls"]},{categoryHeading:(0,a.t)("Other"),options:["custom"]}],m={num_errors:{aggregate:"count()",dataset:i.qz.ERRORS,eventTypes:i.GM.ERROR},users_experiencing_errors:{aggregate:"count_unique(user)",dataset:i.qz.ERRORS,eventTypes:i.GM.ERROR},throughput:{aggregate:"count()",dataset:i.qz.TRANSACTIONS,eventTypes:i.GM.TRANSACTION},trans_duration:{aggregate:"p95(transaction.duration)",dataset:i.qz.TRANSACTIONS,eventTypes:i.GM.TRANSACTION},apdex:{aggregate:"apdex(300)",dataset:i.qz.TRANSACTIONS,eventTypes:i.GM.TRANSACTION},failure_rate:{aggregate:"failure_rate()",dataset:i.qz.TRANSACTIONS,eventTypes:i.GM.TRANSACTION},lcp:{aggregate:"p95(measurements.lcp)",dataset:i.qz.TRANSACTIONS,eventTypes:i.GM.TRANSACTION},fid:{aggregate:"p95(measurements.fid)",dataset:i.qz.TRANSACTIONS,eventTypes:i.GM.TRANSACTION},cls:{aggregate:"p95(measurements.cls)",dataset:i.qz.TRANSACTIONS,eventTypes:i.GM.TRANSACTION},custom:{aggregate:"p95(measurements.fp)",dataset:i.qz.TRANSACTIONS,eventTypes:i.GM.TRANSACTION},crash_free_sessions:{aggregate:i.lK.CRASH_FREE_SESSIONS,dataset:i.qz.SESSIONS,eventTypes:i.GM.SESSION},crash_free_users:{aggregate:i.lK.CRASH_FREE_USERS,dataset:i.qz.SESSIONS,eventTypes:i.GM.USER}},h=m.num_errors,g=new Set(["num_errors","users_experiencing_errors","throughput","apdex","failure_rate","crash_free_sessions","crash_free_users"]),f=new Set(["trans_duration","lcp","fid","cls"]),S=[o.Sh.RELEASE,o.Sh.TRANSACTION,o.Sh.TRANSACTION_OP,o.Sh.TRANSACTION_STATUS,o.Sh.HTTP_METHOD],y=[o.Sh.RELEASE],T=[o.Sh.AGE,o.Sh.ASSIGNED,o.Sh.ASSIGNED_OR_SUGGESTED,o.Sh.BOOKMARKS,o.Sh.DEVICE_MODEL_ID,o.Sh.EVENT_TIMESTAMP,o.Sh.EVENT_TYPE,o.Sh.FIRST_RELEASE,o.Sh.FIRST_SEEN,o.Sh.IS,o.Sh.ISSUE_CATEGORY,o.Sh.ISSUE_TYPE,o.Sh.LAST_SEEN,o.Sh.PLATFORM_NAME,...Object.values(o.Zl),...Object.values(o.$n),...Object.values(o.pd),...Object.values(o.P2)];function v(e,t){return s()({[i.qz.ERRORS]:void 0,[i.qz.TRANSACTIONS]:t.features.includes("alert-allow-indexed")?void 0:S,[i.qz.METRICS]:y,[i.qz.GENERIC_METRICS]:t.features.includes("alert-allow-indexed")?void 0:S,[i.qz.SESSIONS]:y},(e=>e?(0,o.yE)(e):void 0))[e]}function E(e,t){return{[i.qz.ERRORS]:[o.Sh.EVENT_TYPE,o.Sh.RELEASE_VERSION,o.Sh.RELEASE_STAGE,o.Sh.RELEASE_BUILD,o.Sh.PROJECT,...Object.values(o.Zl),...Object.values(o.$n),...Object.values(o.l1),o.Sh.TRANSACTION,o.Sh.TRANSACTION_DURATION,o.Sh.TRANSACTION_OP,o.Sh.TRANSACTION_STATUS],[i.qz.TRANSACTIONS]:t.features.includes("alert-allow-indexed")?T:void 0,[i.qz.METRICS]:void 0,[i.qz.GENERIC_METRICS]:t.features.includes("alert-allow-indexed")?T:void 0,[i.qz.SESSIONS]:void 0}[e]}function x(e,t){return e===i.qz.ERRORS?l.DISCOVER:t?l.METRICS_ENHANCED:e===i.qz.GENERIC_METRICS?l.METRICS:l.DISCOVER}},"./app/views/performance/breadcrumb.tsx":(e,t,n)=>{n.d(t,{Z:()=>f}),n("../node_modules/core-js/modules/es.array.push.js");var r=n("./app/components/breadcrumbs.tsx"),s=n("./app/locale.tsx"),a=n("./app/utils/queryString.tsx"),o=n("./app/views/performance/transactionSummary/tabs.tsx"),i=n("./app/views/performance/transactionSummary/transactionEvents/utils.tsx"),c=n("./app/views/performance/transactionSummary/transactionSpans/utils.tsx"),l=n("./app/views/performance/transactionSummary/transactionTags/utils.tsx"),u=n("./app/views/performance/transactionSummary/transactionVitals/utils.tsx"),p=n("./app/views/performance/transactionSummary/utils.tsx"),d=n("./app/views/performance/vitalDetail/utils.tsx"),m=n("./app/views/performance/utils.tsx"),h=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function g(e){return(0,h.tZ)(r.Z,{crumbs:function(){const t=[],{organization:n,location:r,transaction:h,vitalName:g,spanSlug:f,eventSlug:S,traceSlug:y,tab:T}=e,v={pathname:(0,m.de)(n),query:{...r.query,transaction:void 0}};if(t.push({to:v,label:(0,s.t)("Performance"),preservePageFilters:!0}),g){const e=(0,d.i4)({orgSlug:n.slug,vitalName:"fcp",projectID:(0,a.ro)(r.query.project),query:r.query});t.push({to:e,label:(0,s.t)("Vital Detail"),preservePageFilters:!0})}else if(h){const e={orgSlug:n.slug,transaction:h.name,projectID:h.project,query:r.query};switch(T){case o.Z.Tags:{const n=(0,l.vG)(e);t.push({to:n,label:(0,s.t)("Tags"),preservePageFilters:!0});break}case o.Z.Events:{const n=(0,i.xr)(e);t.push({to:n,label:(0,s.t)("All Events"),preservePageFilters:!0});break}case o.Z.WebVitals:{const n=(0,u.Pl)(e);t.push({to:n,label:(0,s.t)("Web Vitals"),preservePageFilters:!0});break}case o.Z.Spans:{const n=(0,c.hN)(e);t.push({to:n,label:(0,s.t)("Spans"),preservePageFilters:!0});break}case o.Z.TransactionSummary:default:{const n=(0,p.e1)(e);t.push({to:n,label:(0,s.t)("Transaction Summary"),preservePageFilters:!0})}}}return h&&f?t.push({to:"",label:(0,s.t)("Span Summary")}):h&&S?t.push({to:"",label:(0,s.t)("Event Details")}):y&&t.push({to:"",label:(0,s.t)("Trace View")}),t}()})}g.displayName="Breadcrumb";const f=g},"./app/views/performance/transactionSummary/pageLayout.tsx":(e,t,n)=>{n.d(t,{Ox:()=>Ae,ZP:()=>Re,C1:()=>Ne});var r=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=(n("../node_modules/core-js/modules/es.array.push.js"),n("../node_modules/react/index.js")),a=n("../node_modules/react-router/es/index.js"),o=n("../node_modules/@sentry/utils/esm/is.js"),i=n("./app/actionCreators/indicator.tsx"),c=n("./app/components/acl/feature.tsx"),l=n("./app/components/alert.tsx"),u=n("./app/components/gridEditable/index.tsx"),p=n("./app/components/layouts/thirds.tsx"),d=n("./app/components/loadingIndicator.tsx"),m=n("./app/components/organizations/pageFilters/container.tsx"),h=n("./app/components/pickProjectToContinue.tsx"),g=n("./app/components/sentryDocumentTitle.tsx"),f=n("./app/components/tabs/index.tsx"),S=n("./app/locale.tsx"),y=n("./app/utils.tsx"),T=n("./app/utils/analytics.tsx"),v=n("./app/utils/discover/discoverQuery.tsx"),E=n("./app/utils/performance/contexts/metricsCardinality.tsx"),x=n("./app/utils/performance/contexts/performanceEventViewContext.tsx"),_=n("./app/utils/queryString.tsx"),A=n("./app/utils/useRouter.tsx"),b=n("./app/utils/withDomainRequired.tsx"),N=n("./app/views/performance/utils.tsx"),R=n("./app/views/performance/transactionSummary/transactionAnomalies/utils.tsx"),C=n("./app/views/performance/transactionSummary/transactionEvents/utils.tsx"),j=n("./app/views/performance/transactionSummary/transactionSpans/utils.tsx"),Z=n("./app/views/performance/transactionSummary/transactionTags/utils.tsx"),I=n("./app/views/performance/transactionSummary/transactionVitals/utils.tsx"),w=n("./app/components/assistant/guideAnchor.tsx"),O=n("./app/components/buttonBar.tsx"),P=n("./app/components/createAlertButton.tsx"),q=n("./app/components/featureBadge.tsx"),M=n("./app/components/idBadge/index.tsx"),z=n("./app/components/replays/replayCountBadge.tsx"),V=n("./app/components/replays/replaysFeatureBadge.tsx"),D=n("./app/components/replays/useReplaysCount.tsx"),U=n("./app/components/tooltip.tsx"),F=n("../node_modules/lodash/omit.js"),L=n.n(F),k=n("../node_modules/lodash/pick.js"),B=n.n(k),G=n("./app/utils/discover/genericDiscoverQuery.tsx"),$=n("./app/utils/tokenizeSearch.tsx"),H=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function X(e){const{eventView:t,location:n,transaction:r,type:s}=e,a={transaction:`"${(0,y.d9)((0,$.Bn)(r))}"`,type:s},o=B()(t.getEventsAPIPayload(n),["project","environment"]);return Object.assign(a,o)}function W(e){return(0,H.tZ)(G.ZP,{route:"events-has-measurements",getRequestPayload:X,...L()(e,"children"),children:t=>{let{tableData:n,...r}=t;return e.children({hasMeasurements:n?.measurements??null,...r})}})}W.displayName="HasMeasurementsQuery";const Y=W;var K=n("./app/utils/profiling/platforms.tsx"),Q=n("./app/utils/replays/projectSupportsReplay.tsx"),J=n("./app/views/performance/breadcrumb.tsx"),ee=n("./app/views/performance/landing/utils.tsx"),te=n("./app/views/performance/transactionSummary/tabs.tsx"),ne=n("./app/components/button.tsx"),re=n("./app/components/performance/teamKeyTransaction.tsx"),se=n("./app/components/performance/teamKeyTransactionsManager.tsx"),ae=n("./app/icons/index.tsx"),oe=n("./app/utils/useTeams.tsx"),ie=n("./app/utils/withProjects.tsx");class ce extends s.Component{render(){const{isOpen:e,keyedTeams:t,...n}=this.props,r=t?.length??0,s=(0,H.tZ)(ne.zx,{...n,size:"sm",icon:r?(0,H.tZ)(ae.GK,{color:"yellow400",isSolid:!0}):(0,H.tZ)(ae.GK,{}),children:r?(0,S.tn)("Starred for Team","Starred for Teams",r):(0,S.t)("Star for Team")});if(!e&&t?.length){const e=t.map((e=>{let{slug:t}=e;return t})).join(", ");return(0,H.tZ)(U.u,{title:e,children:s})}return s}}function le(e){let{counts:t,getKeyedTeams:n,project:r,transactionName:s,...a}=e;const o=n(r.id,s);return(0,H.tZ)(re.Z,{counts:t,keyedTeams:o,title:ce,project:r,transactionName:s,...a})}function ue(e){let{eventView:t,organization:n,projects:r,...s}=e;const{teams:a,initiallyLoaded:o}=(0,oe.y)({provideUserTeams:!0});if(1!==t.project.length)return(0,H.tZ)(ce,{isOpen:!1,disabled:!0,keyedTeams:null});const i=String(t.project[0]),c=r.find((e=>e.id===i));return(0,y.ri)(c)?(0,H.tZ)(se.z,{organization:n,teams:a,selectedTeams:["myteams"],selectedProjects:[String(i)],children:(0,H.tZ)(se.$,{children:e=>{let{isLoading:t,...r}=e;return(0,H.tZ)(le,{organization:n,project:c,isLoading:t||!o,...s,...r})}})}):(0,H.tZ)(ce,{isOpen:!1,disabled:!0,keyedTeams:null})}ce.displayName="TitleButton",le.displayName="TeamKeyTransactionButton",ue.displayName="TeamKeyTransactionButtonWrapper";const pe=(0,ie.Z)(ue);var de=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),me=n("./app/actionCreators/modal.tsx"),he=n("./app/utils/withApi.tsx"),ge=n("./app/views/performance/transactionSummary/transactionThresholdModal.tsx");class fe extends s.Component{constructor(){super(...arguments),(0,de.Z)(this,"state",{transactionThreshold:void 0,transactionThresholdMetric:void 0,loadingThreshold:!1}),(0,de.Z)(this,"fetchTransactionThreshold",(()=>{const{api:e,organization:t,transactionName:n}=this.props,r=this.getProject();if(!(0,y.ri)(r))return;const s=`/organizations/${t.slug}/project-transaction-threshold-override/`;this.setState({loadingThreshold:!0}),e.requestPromise(s,{method:"GET",includeAllArgs:!0,query:{project:r.id,transaction:n}}).then((e=>{let[t]=e;this.setState({loadingThreshold:!1,transactionThreshold:t.threshold,transactionThresholdMetric:t.metric})})).catch((()=>{const e=`/projects/${t.slug}/${r.slug}/transaction-threshold/configure/`;this.props.api.requestPromise(e,{method:"GET",includeAllArgs:!0,query:{project:r.id}}).then((e=>{let[t]=e;this.setState({loadingThreshold:!1,transactionThreshold:t.threshold,transactionThresholdMetric:t.metric})})).catch((e=>{this.setState({loadingThreshold:!1});const t=e.responseJSON?.threshold??null;(0,i.Iw)(t)}))}))}))}componentDidMount(){this.fetchTransactionThreshold()}getProject(){const{projects:e,eventView:t}=this.props;if(!(0,y.ri)(t))return;const n=String(t.project[0]);return e.find((e=>e.id===n))}onChangeThreshold(e,t){const{onChangeThreshold:n}=this.props;this.setState({transactionThreshold:e,transactionThresholdMetric:t}),(0,y.ri)(n)&&n(e,t)}openModal(){const{organization:e,transactionName:t,eventView:n}=this.props,{transactionThreshold:r,transactionThresholdMetric:s}=this.state;(0,me.openModal)((a=>(0,H.tZ)(ge.ZP,{...a,organization:e,transactionName:t,eventView:n,transactionThreshold:r,transactionThresholdMetric:s,onApply:(e,t)=>this.onChangeThreshold(e,t)})),{modalCss:ge.fY,closeEvents:"escape-key"})}render(){const{loadingThreshold:e}=this.state;return(0,H.tZ)(ne.zx,{size:"sm",onClick:()=>this.openModal(),icon:(0,H.tZ)(ae.iC,{}),disabled:e,"aria-label":(0,S.t)("Settings"),"data-test-id":"set-transaction-threshold"})}}fe.displayName="TransactionThresholdButton";const Se=(0,he.Z)((0,ie.Z)(fe));function ye(e){let{eventView:t,organization:n,projects:r,projectId:a,metricsCardinality:o,location:i,transactionName:l,onChangeThreshold:u,currentTab:d,hasWebVitals:m}=e;function h(){(0,T.Gi)("performance_views.summary.create_alert_clicked",{organization:n})}const g=r.find((e=>e.id===a)),y=n.features?.includes("performance-anomaly-detection-ui"),v=n.features.includes("session-replay")&&g&&(0,Q.Z)(g),E=g&&n.features.includes("profiling")&&(0,K.kI)(g),x=(0,s.useCallback)((e=>{switch(m){case"maybe":return(0,ee.Q_)(i,r,t).field===ee.BY.FRONTEND_PAGELOAD||e;case"yes":return!0;default:return!1}}),[m,i,r,t]),_=(0,D.Z)({transactionNames:l,organization:n})[l];return(0,H.BX)(p.h4,{children:[(0,H.BX)(p.oB,{children:[(0,H.tZ)(J.Z,{organization:n,location:i,transaction:{project:a,name:l},tab:d}),(0,H.BX)(p.Dx,{children:[g&&(0,H.tZ)(M.Z,{project:g,avatarSize:28,hideName:!0,avatarProps:{hasTooltip:!0,tooltip:g.slug}}),(0,H.tZ)(U.u,{showOnlyOnOverflow:!0,skipWrapper:!0,title:l,children:(0,H.tZ)(Te,{children:l})})]})]}),(0,H.tZ)(p.kP,{children:(0,H.BX)(O.ZP,{gap:1,children:[(0,H.tZ)(c.Z,{organization:n,features:["incidents"],children:e=>{let{hasFeature:s}=e;return s&&!o?.isLoading?(0,H.tZ)(P.K,{size:"sm",eventView:t,organization:n,projects:r,onClick:h,referrer:"performance",alertType:"trans_duration","aria-label":(0,S.t)("Create Alert"),disableMetricDataset:o?.outcome?.forceTransactionsOnly}):null}}),(0,H.tZ)(pe,{transactionName:l,eventView:t,organization:n}),(0,H.tZ)(w.Z,{target:"project_transaction_threshold_override",position:"bottom",children:(0,H.tZ)(Se,{organization:n,transactionName:l,eventView:t,onChangeThreshold:u})})]})}),(0,H.tZ)(Y,{location:i,orgSlug:n.slug,eventView:t,transaction:l,type:"web",children:e=>{let{hasMeasurements:t}=e;const r=x(!!t);return(0,H.BX)(f.td,{hideBorder:!0,outerWrapStyles:{gridColumn:"1 / -1"},children:[(0,H.tZ)(f.td.Item,{children:(0,S.t)("Overview")},te.Z.TransactionSummary),(0,H.tZ)(f.td.Item,{children:(0,S.t)("All Events")},te.Z.Events),(0,H.tZ)(f.td.Item,{children:(0,S.t)("Tags")},te.Z.Tags),(0,H.tZ)(f.td.Item,{children:(0,S.t)("Spans")},te.Z.Spans),(0,H.BX)(f.td.Item,{textValue:(0,S.t)("Anomalies"),hidden:!y,children:[(0,S.t)("Anomalies"),(0,H.tZ)(q.Z,{type:"alpha",tooltipProps:{disabled:!0}})]},te.Z.Anomalies),(0,H.tZ)(f.td.Item,{textValue:(0,S.t)("Web Vitals"),hidden:!r,children:(0,S.t)("Web Vitals")},te.Z.WebVitals),(0,H.BX)(f.td.Item,{textValue:(0,S.t)("Replays"),hidden:!v,children:[(0,S.t)("Replays"),(0,H.tZ)(z.Z,{count:_}),(0,H.tZ)(V.Z,{tooltipProps:{disabled:!0}})]},te.Z.Replays),(0,H.BX)(f.td.Item,{textValue:(0,S.t)("Profiling"),hidden:!E,children:[(0,S.t)("Profiles"),n.features.includes("profiling-ga")?(0,H.tZ)(q.Z,{type:"new",tooltipProps:{disabled:!0}}):(0,H.tZ)(q.Z,{type:"beta",tooltipProps:{disabled:!0}})]},te.Z.Profiling)]})}})]})}ye.displayName="TransactionHeader";const Te=(0,r.Z)("div",{target:"edjdq7i0"})((e=>e.theme.overflowEllipsis),";"),ve=ye;var Ee=n("./app/views/performance/transactionSummary/utils.tsx");const xe={[te.Z.WebVitals]:"performance_views.vitals.vitals_tab_clicked",[te.Z.Tags]:"performance_views.tags.tags_tab_clicked",[te.Z.Events]:"performance_views.events.events_tab_clicked",[te.Z.Spans]:"performance_views.spans.spans_tab_clicked",[te.Z.Anomalies]:"performance_views.anomalies.anomalies_tab_clicked"};function _e(e){const{location:t,organization:n,projects:r,tab:l,getDocumentTitle:w,generateEventView:O,childComponent:P,features:q=[]}=e;let M;const z=t.query.project;(0,o.HD)(z)&&"-1"!==z&&(M=z);const V=(0,A.Z)(),D=(0,N.JY)(t),[U,F]=(0,s.useState)(),L=(0,E.e0)(),[k,B]=(0,s.useState)(),[G,$]=(0,s.useState)(),X=(0,s.useCallback)((e=>{if(!D)return{};const r={orgSlug:n.slug,transaction:D,projectID:M,query:t.query};switch(e){case te.Z.Tags:return(0,Z.vG)(r);case te.Z.Events:return(0,C.xr)(r);case te.Z.Spans:return(0,j.hN)(r);case te.Z.Anomalies:return(0,R.az)(r);case te.Z.Replays:return function(e){let{orgSlug:t,transaction:n,projectID:r,query:s}=e;return{pathname:`/organizations/${t}/performance/summary/replays/`,query:{transaction:n,project:r,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:s.query}}}(r);case te.Z.Profiling:return function(e){let{orgSlug:t,transaction:n,projectID:r,query:s}=e;return{pathname:`/organizations/${t}/performance/summary/profiles/`,query:{transaction:n,project:r,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:s.query}}}(r);case te.Z.WebVitals:return(0,I.Pl)({orgSlug:n.slug,transaction:D,projectID:(0,_.ro)(t.query.project),query:t.query});case te.Z.TransactionSummary:default:return(0,Ee.e1)(r)}}),[t.query,n.slug,M,D]),W=(0,s.useCallback)((e=>{if(e===l)return;const s=xe[e];s&&(0,T.Gi)(s,{organization:n,project_platforms:(0,N.p9)(t,r)}),a.browserHistory.push((0,b.D)(X(e)))}),[X,l,n,t,r]);if(!(0,y.ri)(D))return Ne(n,t),null;const Y=O({location:t,transactionName:D,organization:n});if(!(0,y.ri)(M)){const e=Y.clone();return e.query=`transaction:"${D}"`,e.fields=[{field:"project",width:u.z7},{field:"count()",width:u.z7}],(0,H.tZ)(v.Z,{eventView:e,location:t,orgSlug:n.slug,queryExtras:{project:z||void 0},referrer:"api.performance.transaction-summary",children:e=>{let{isLoading:s,tableData:a,error:o}=e;if(o)return(0,i.Iw)((0,S.t)("Unable to get projects associated with transaction")),Ne(n,t),null;if(s)return(0,H.tZ)(d.Z,{});const c=a?.data.map((e=>r.find((t=>t.slug===e.project))));return c&&(0,H.tZ)(h.Z,{"data-test-id":"transaction-sumamry-project-picker-modal",projects:c,router:V,nextPath:{pathname:(0,Ee.u4)({orgSlug:n.slug}),query:{project:M,transaction:D,statsPeriod:Y.statsPeriod,referrer:"performance-transaction-summary",...t.query}},noProjectRedirectPath:"/performance/",allowAllProjectsSelection:!0})}})}const K=r.find((e=>e.id===M));return(0,H.tZ)(g.Z,{title:w(D),orgSlug:n.slug,projectSlug:K?.slug,children:(0,H.tZ)(c.Z,{features:["performance-view",...q],organization:n,renderDisabled:Ae,children:(0,H.tZ)(x.bq,{value:{eventView:Y},children:(0,H.tZ)(m.Z,{shouldForceProject:(0,y.ri)(K),forceProject:K,specificProjectSlugs:(0,y.ri)(K)?[K.slug]:[],children:(0,H.tZ)(f.mQ,{value:l,onChange:W,children:(0,H.BX)(p.T3,{children:[(0,H.tZ)(ve,{eventView:Y,location:t,organization:n,projects:r,projectId:M,transactionName:D,currentTab:l,hasWebVitals:l===te.Z.WebVitals?"yes":"maybe",onChangeThreshold:(e,t)=>{B(e),$(t)},metricsCardinality:L}),(0,H.BX)(p.uT,{children:[(0,y.ri)(U)&&(0,H.tZ)(be,{type:"error",showIcon:!0,children:U}),(0,H.tZ)(P,{location:t,organization:n,projects:r,eventView:Y,projectId:M,transactionName:D,setError:F,transactionThreshold:k,transactionThresholdMetric:G})]})]})})})})})})}function Ae(){return(0,H.tZ)(l.bZ,{type:"warning",children:(0,S.t)("You don't have access to this feature")})}_e.displayName="PageLayout",Ae.displayName="NoAccess";const be=(0,r.Z)(l.bZ,{target:"e2hnjro0"})({name:"3hfw1i",styles:"grid-column:1/3;margin:0"});function Ne(e,t){a.browserHistory.replace((0,b.D)({pathname:`/organizations/${e.slug}/performance/`,query:{...t.query}}))}const Re=_e},"./app/views/performance/transactionSummary/tabs.tsx":(e,t,n)=>{var r;n.d(t,{Z:()=>s}),function(e){e.TransactionSummary="summary",e.WebVitals="vitals",e.Tags="tags",e.Events="events",e.Spans="spans",e.Anomalies="anomalies",e.Replays="replays",e.Profiling="profiling"}(r||(r={}));const s=r},"./app/views/performance/transactionSummary/transactionAnomalies/utils.tsx":(e,t,n)=>{n.d(t,{ES:()=>c,az:()=>i,h2:()=>l,uT:()=>o});var r=n("./app/utils/discover/eventView.tsx"),s=n("./app/utils/queryString.tsx"),a=n("./app/utils/tokenizeSearch.tsx");const o="performance-anomaly-detection-ui";function i(e){let{orgSlug:t,transaction:n,projectID:r,query:s}=e;const a=function(e){let{orgSlug:t}=e;return`/organizations/${t}/performance/summary/anomalies/`}({orgSlug:t});return{pathname:a,query:{transaction:n,project:r,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:s.query}}}function c(e,t){return{high:t.red300,low:t.yellow300}[e]}function l(e){let{location:t,transactionName:n}=e;const o=(0,s.ro)(t.query.query,""),i=new a.MY(o);return i.setFilterValues("transaction",[n]),r.ZP.fromNewQueryWithLocation({id:void 0,version:2,name:n,fields:["tpm()"],query:i.formatString(),projects:[]},t)}},"./app/views/performance/transactionSummary/transactionEvents/utils.tsx":(e,t,n)=>{n.d(t,{Kc:()=>m,Lc:()=>h,Zq:()=>d,_S:()=>c,q3:()=>i,qg:()=>p,tb:()=>u,xr:()=>l});var r=n("./app/locale.tsx"),s=n("./app/utils/queryString.tsx"),a=n("./app/views/performance/transactionSummary/filter.tsx"),o=n("./app/views/performance/transactionSummary/utils.tsx");let i;function c(e,t){const{p99:n,p95:s,p75:o,p50:c}=t||{p99:0,p95:0,p75:0,p50:0};return{[i.p50]:{name:i.p50,query:c?[["transaction.duration",`<=${c.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,a.T$)(e)||"transaction.duration"},label:(0,r.t)("p50")},[i.p75]:{name:i.p75,query:o?[["transaction.duration",`<=${o.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,a.T$)(e)||"transaction.duration"},label:(0,r.t)("p75")},[i.p95]:{name:i.p95,query:s?[["transaction.duration",`<=${s.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,a.T$)(e)||"transaction.duration"},label:(0,r.t)("p95")},[i.p99]:{name:i.p99,query:n?[["transaction.duration",`<=${n.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,a.T$)(e)||"transaction.duration"},label:(0,r.t)("p99")},[i.p100]:{name:i.p100,label:(0,r.t)("p100")}}}function l(e){let{orgSlug:t,transaction:n,projectID:r,query:s}=e;return{pathname:`/organizations/${t}/performance/summary/events/`,query:{transaction:n,project:r,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:s.query}}}function u(e){return t=(0,s.ro)(e.query.showTransactions,i.p100),Object.values(i).includes(t)?t:i.p100;var t}function p(e,t){const n=c(t),r=n[e].sort?.kind,s=n[e].sort?.field,a={showTransactions:e};return r&&s&&(a.sort=`${"desc"===r?"-":""}${s}`),a}function d(e){switch(e){case o.K0.OUTLIER:return i.p100;case o.K0.SLOW:return i.p95;default:return}}function m(e){return{p100:e?.["p100()"],p99:e?.["p99()"],p95:e?.["p95()"],p75:e?.["p75()"],p50:e?.["p50()"]}}function h(e){return e.withColumns([{kind:"function",function:["p100","",void 0,void 0]},{kind:"function",function:["p99","",void 0,void 0]},{kind:"function",function:["p95","",void 0,void 0]},{kind:"function",function:["p75","",void 0,void 0]},{kind:"function",function:["p50","",void 0,void 0]}])}!function(e){e.p50="p50",e.p75="p75",e.p95="p95",e.p99="p99",e.p100="p100"}(i||(i={}))},"./app/views/performance/transactionSummary/transactionSpans/types.tsx":(e,t,n)=>{let r,s;n.d(t,{g:()=>s,p:()=>r}),function(e){e.P50_EXCLUSIVE_TIME="p50ExclusiveTime",e.P75_EXCLUSIVE_TIME="p75ExclusiveTime",e.P95_EXCLUSIVE_TIME="p95ExclusiveTime",e.P99_EXCLUSIVE_TIME="p99ExclusiveTime"}(r||(r={})),function(e){e.AVG_OCCURRENCE="avgOccurrence",e.SUM_EXCLUSIVE_TIME="sumExclusiveTime"}(s||(s={}))},"./app/views/performance/transactionSummary/transactionSpans/utils.tsx":(e,t,n)=>{n.d(t,{CS:()=>g,E5:()=>f,KK:()=>v,TK:()=>T,W6:()=>E,bc:()=>h,hN:()=>m,mV:()=>b,uQ:()=>A,xz:()=>x,zW:()=>_});var r=n("../node_modules/lodash/pick.js"),s=n.n(r),a=n("./app/constants/index.tsx"),o=n("./app/locale.tsx"),i=n("./app/utils.tsx"),c=n("./app/utils/discover/eventView.tsx"),l=n("./app/utils/discover/fields.tsx"),u=n("./app/utils/queryString.tsx"),p=n("./app/utils/tokenizeSearch.tsx"),d=n("./app/views/performance/transactionSummary/transactionSpans/types.tsx");function m(e){let{orgSlug:t,transaction:n,projectID:r,query:s}=e;const a=function(e){let{orgSlug:t}=e;return`/organizations/${t}/performance/summary/spans/`}({orgSlug:t});return{pathname:a,query:{transaction:n,project:r,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:s.query}}}const h=30,g=s()(a.wh,["1h","24h","7d","14d","30d"]),f=[{prefix:(0,o.t)("Sort By"),label:(0,o.t)("Total Self Time"),field:d.g.SUM_EXCLUSIVE_TIME},{prefix:(0,o.t)("Sort By"),label:(0,o.t)("Average Count"),field:d.g.AVG_OCCURRENCE},{prefix:(0,o.t)("Sort By"),label:(0,o.t)("p50 Self Time"),field:d.p.P50_EXCLUSIVE_TIME},{prefix:(0,o.t)("Sort By"),label:(0,o.t)("p75 Self Time"),field:d.p.P75_EXCLUSIVE_TIME},{prefix:(0,o.t)("Sort By"),label:(0,o.t)("p95 Self Time"),field:d.p.P95_EXCLUSIVE_TIME},{prefix:(0,o.t)("Sort By"),label:(0,o.t)("p99 Self Time"),field:d.p.P99_EXCLUSIVE_TIME}],S=d.g.SUM_EXCLUSIVE_TIME;function y(e){return f.find((t=>t.field===e))||f.find((e=>e.field===S))}function T(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sort";return y((0,u.ro)(e?.query?.[t])??S)}function v(e){return y(e.sorts.length?e.sorts[0].field:S)}function E(e){if(!(0,i.ri)(e))return;const t=e.lastIndexOf(":");return t<0?void 0:{op:e.slice(0,t),group:e.slice(t+1)}}function x(e){let{location:t,transactionName:n}=e;const r=(0,u.ro)(t.query.query,""),s=new p.MY(r);s.setFilterValues("event.type",["transaction"]),s.setFilterValues("transaction",[n]),Object.keys(s.filters).forEach((e=>{(0,l.h1)(e)&&s.removeFilter(e)}));const a=c.ZP.fromNewQueryWithLocation({id:void 0,version:2,name:n,fields:[...Object.values(d.g),...Object.values(d.p)],query:s.formatString(),projects:[]},t),o=T(t);return a.withSorts([{field:o.field,kind:"desc"}])}function _(e){const t=e.withColumns([{kind:"function",function:["count","",void 0,void 0]},{kind:"function",function:["sum","transaction.duration",void 0,void 0]}]),n=new p.MY(e.query);return Object.keys(n.filters).forEach((e=>{(0,l.h1)(e)&&n.removeFilter(e)})),t.query=n.formatString(),t}const A={[d.g.SUM_EXCLUSIVE_TIME]:["percentileArray(spans_exclusive_time, 0.75)","count()","count_unique(id)","sumArray(spans_exclusive_time)"],[d.g.AVG_OCCURRENCE]:["percentileArray(spans_exclusive_time, 0.75)","count()","count_unique(id)","equation|count() / count_unique(id)","sumArray(spans_exclusive_time)"],[d.p.P50_EXCLUSIVE_TIME]:["percentileArray(spans_exclusive_time, 0.5)","count()","count_unique(id)","sumArray(spans_exclusive_time)"],[d.p.P75_EXCLUSIVE_TIME]:["percentileArray(spans_exclusive_time, 0.75)","count()","count_unique(id)","sumArray(spans_exclusive_time)"],[d.p.P95_EXCLUSIVE_TIME]:["percentileArray(spans_exclusive_time, 0.95)","count()","count_unique(id)","sumArray(spans_exclusive_time)"],[d.p.P99_EXCLUSIVE_TIME]:["percentileArray(spans_exclusive_time, 0.99)","count()","count_unique(id)","sumArray(spans_exclusive_time)"]};function b(e){return e.replace("exclusive","self")}},"./app/views/performance/transactionSummary/transactionTags/utils.tsx":(e,t,n)=>{n.d(t,{Zn:()=>a,bZ:()=>o,oT:()=>l,oc:()=>c,vG:()=>i});var r=n("./app/utils/analytics.tsx"),s=n("./app/utils/queryString.tsx");function a(e){return(0,s.ro)(e.query.tagKey)}function o(e){(0,r.Gi)("performance_views.tags.interaction",{organization:e})}function i(e){let{orgSlug:t,transaction:n,projectID:r,query:s}=e;const a=function(e){let{orgSlug:t}=e;return`/organizations/${t}/performance/summary/tags/`}({orgSlug:t});return{pathname:a,query:{transaction:n,project:r,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:s.query,tagKey:s.tagKey}}}function c(e){let t=(0,s.ro)(e.query?.tagSort)??"-frequency";return["sumdelta"].find((e=>t?.includes(e)))&&(t="-frequency"),t}function l(e){const t=Object.keys(e).find((e=>e.includes("histogram")));if(!t)return;const n=t.split("_");return{histogramField:t,bucketSize:parseInt(n[n.length-3],10),offset:parseInt(n[n.length-2],10),multiplier:parseInt(n[n.length-1],10)}}},"./app/views/performance/transactionSummary/transactionThresholdModal.tsx":(e,t,n)=>{n.d(t,{ZP:()=>j,fY:()=>C});var r=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=n("../node_modules/react/index.js"),o=n("../node_modules/lodash/cloneDeep.js"),i=n.n(o),c=n("../node_modules/lodash/set.js"),l=n.n(c),u=n("./app/actionCreators/indicator.tsx"),p=n("./app/components/button.tsx"),d=n("./app/components/buttonBar.tsx"),m=n("./app/components/forms/controls/selectControl.tsx"),h=n("./app/components/forms/fieldGroup/index.tsx"),g=n("./app/components/input.tsx"),f=n("./app/components/links/link.tsx"),S=n("./app/locale.tsx"),y=n("./app/styles/space.tsx"),T=n("./app/utils.tsx"),v=n("./app/utils/withApi.tsx"),E=n("./app/utils/withProjects.tsx"),x=n("./app/views/performance/transactionSummary/utils.tsx"),_=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");let A;!function(e){e.TRANSACTION_DURATION="duration",e.LARGEST_CONTENTFUL_PAINT="lcp"}(A||(A={}));const b=[{label:(0,S.t)("Transaction Duration"),value:"duration"},{label:(0,S.t)("Largest Contentful Paint"),value:"lcp"}];class N extends a.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{threshold:this.props.transactionThreshold,metric:this.props.transactionThresholdMetric,error:null}),(0,r.Z)(this,"handleApply",(e=>{e.preventDefault();const{api:t,closeModal:n,organization:r,transactionName:s,onApply:a}=this.props,o=this.getProject();if(!(0,T.ri)(o))return;const i=`/organizations/${r.slug}/project-transaction-threshold-override/`;t.requestPromise(i,{method:"POST",includeAllArgs:!0,query:{project:o.id},data:{transaction:s,threshold:this.state.threshold,metric:this.state.metric}}).then((()=>{n(),a&&a(this.state.threshold,this.state.metric)})).catch((e=>{this.setState({error:e});const t=e.responseJSON?.threshold??e.responseJSON?.non_field_errors??null;(0,u.Iw)(t)}))})),(0,r.Z)(this,"handleFieldChange",(e=>t=>{this.setState((n=>{const r=i()(n);return l()(r,e,t),{...r,errors:void 0}}))})),(0,r.Z)(this,"handleReset",(e=>{e.preventDefault();const{api:t,closeModal:n,organization:r,transactionName:s,onApply:a}=this.props,o=this.getProject();if(!(0,T.ri)(o))return;const i=`/organizations/${r.slug}/project-transaction-threshold-override/`;t.requestPromise(i,{method:"DELETE",includeAllArgs:!0,query:{project:o.id},data:{transaction:s}}).then((()=>{const e=`/projects/${r.slug}/${o.slug}/transaction-threshold/configure/`;this.props.api.requestPromise(e,{method:"GET",includeAllArgs:!0,query:{project:o.id}}).then((e=>{let[t]=e;this.setState({threshold:t.threshold,metric:t.metric}),n(),a&&a(this.state.threshold,this.state.metric)})).catch((e=>{const t=e.responseJSON?.threshold??null;(0,u.Iw)(t)}))})).catch((e=>{this.setState({error:e})}))}))}getProject(){const{projects:e,eventView:t,project:n}=this.props;if((0,T.ri)(n))return e.find((e=>e.id===n));const r=String(t.project[0]);return e.find((e=>e.id===r))}renderModalFields(){return(0,_.BX)(a.Fragment,{children:[(0,_.tZ)(h.Z,{"data-test-id":"response-metric",label:(0,S.t)("Calculation Method"),inline:!1,help:(0,S.t)("This determines which duration metric is used for the Response Time Threshold."),showHelpInTooltip:!0,flexibleControlStateSize:!0,stacked:!0,required:!0,children:(0,_.tZ)(m.Z,{required:!0,options:b.slice(),name:"responseMetric",label:(0,S.t)("Calculation Method"),value:this.state.metric,onChange:e=>{this.handleFieldChange("metric")(e.value)}})}),(0,_.tZ)(h.Z,{"data-test-id":"response-time-threshold",label:(0,S.t)("Response Time Threshold (ms)"),inline:!1,help:(0,S.t)("The satisfactory response time for the calculation method defined above. This is used to calculate Apdex and User Misery scores."),showHelpInTooltip:!0,flexibleControlStateSize:!0,stacked:!0,required:!0,children:(0,_.tZ)(g.Z,{type:"number",name:"threshold",required:!0,pattern:"[0-9]*(\\.[0-9]*)?",onChange:e=>{this.handleFieldChange("threshold")(e.target.value)},value:this.state.threshold,step:100,min:100})})]})}render(){const{Header:e,Body:t,Footer:n,organization:r,transactionName:s,eventView:o}=this.props,i=this.getProject(),c=o.clone();c.query=c.getQueryWithAdditionalConditions();const l=(0,x.e1)({orgSlug:r.slug,transaction:s,query:c.generateQueryStringObject(),projectID:i?.id});return(0,_.BX)(a.Fragment,{children:[(0,_.tZ)(e,{closeButton:!0,children:(0,_.tZ)("h4",{children:(0,S.t)("Transaction Settings")})}),(0,_.BX)(t,{children:[(0,_.tZ)(R,{children:(0,S._N)("The changes below will only be applied to [transaction]. To set it at a more global level, go to [projectSettings: Project Settings].",{transaction:(0,_.tZ)(f.Z,{to:l,children:s}),projectSettings:(0,_.tZ)(f.Z,{to:`/settings/${r.slug}/projects/${i?.slug}/performance/`})})}),this.renderModalFields()]}),(0,_.tZ)(n,{children:(0,_.BX)(d.ZP,{gap:1,children:[(0,_.tZ)(p.zx,{priority:"default",onClick:this.handleReset,"data-test-id":"reset-all",children:(0,S.t)("Reset All")}),(0,_.tZ)(p.zx,{"aria-label":(0,S.t)("Apply"),priority:"primary",onClick:this.handleApply,"data-test-id":"apply-threshold",children:(0,S.t)("Apply")})]})})]})}}N.displayName="TransactionThresholdModal";const R=(0,s.Z)("div",{target:"e16m24dg0"})("margin-bottom:",(0,y.D)(4),";"),C={name:"1yumxzh",styles:"width:100%;max-width:650px"},j=(0,v.Z)((0,E.Z)(N))},"./app/views/performance/transactionSummary/transactionVitals/utils.tsx":(e,t,n)=>{n.d(t,{A1:()=>l,L0:()=>i,Pl:()=>s,eH:()=>o,jb:()=>c,oZ:()=>a});var r=n("./app/utils/performance/histogram/utils.tsx");function s(e){let{orgSlug:t,transaction:n,projectID:r,query:s}=e;const a=function(e){let{orgSlug:t}=e;return`/organizations/${t}/performance/summary/vitals/`}({orgSlug:t});return{pathname:a,query:{transaction:n,project:r,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:s.query}}}function a(e,t){const n=(0,r.te)(e);return!e.length||t>=e[e.length-1].bin+n?null:t<e[0].bin?-1:Math.floor((t-e[0].bin)/n)}function o(e){if(e.length<2)return null;for(let t=0;t<e.length;t++){const n=e[t];for(let r=t+1;r<e.length;r++){const s=e[r];if(n.bin!==s.bin&&n.count!==s.count)return{point1:{x:t,y:Math.min(n.count,s.count)},point2:{x:r,y:Math.max(n.count,s.count)}}}}return{point1:{x:0,y:0},point2:{x:1,y:1}}}function i(e,t){const n=e.convertToPixel({xAxisIndex:0,yAxisIndex:0},[t.point1.x,t.point1.y]);if(isNaN(n?.[0])||isNaN(n?.[1]))return null;const r=e.convertToPixel({xAxisIndex:0,yAxisIndex:0},[t.point2.x,t.point2.y]);return isNaN(r?.[0])||isNaN(r?.[1])?null:{point1:{x:n[0],y:n[1]},point2:{x:r[0],y:r[1]}}}function c(e,t,n){if(t.point1.x===t.point2.x||t.point1.y===t.point2.y||n.point1.x===n.point2.x||n.point1.y===n.point2.y)return null;const r=(e.x-t.point1.x)/(t.point2.x-t.point1.x),s=(e.y-t.point1.y)/(t.point2.y-t.point1.y);return{x:n.point1.x+(n.point2.x-n.point1.x)*r,y:n.point1.y+(n.point2.y-n.point1.y)*s}}function l(e,t){return!(e&&!t.some((t=>!e[t])))||Object.values(e).filter((e=>0===e.total)).length>0}}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_transactionSummary_pageLayout_tsx.87586b5d60b8efe5579f6fb9f5ff44df.js.map