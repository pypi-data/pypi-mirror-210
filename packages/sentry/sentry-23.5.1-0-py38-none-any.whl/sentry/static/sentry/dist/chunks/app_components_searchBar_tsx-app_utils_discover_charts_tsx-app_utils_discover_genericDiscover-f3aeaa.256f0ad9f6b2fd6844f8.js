"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_searchBar_tsx-app_utils_discover_charts_tsx-app_utils_discover_genericDiscover-f3aeaa"],{"./app/components/searchBar.tsx":(e,t,r)=>{r.d(t,{Z:()=>g,p:()=>f});var s=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=r("../node_modules/react/index.js"),a=r("./app/components/button.tsx"),o=r("./app/components/inputGroup.tsx"),i=r("./app/icons/index.tsx"),u=r("./app/icons/iconClose.tsx"),c=r("./app/locale.tsx"),l=r("./app/styles/space.tsx"),p=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(e){let{query:t,defaultQuery:r="",onChange:s,onSearch:a,width:l,size:d,className:g,trailing:y,...v}=e;const x=(0,n.useRef)(null),[_,w]=(0,n.useState)(t??r);(0,n.useEffect)((()=>{"string"==typeof t&&w(t)}),[t]);const b=(0,n.useCallback)((e=>{const{value:t}=e.target;w(t),s?.(t)}),[s]),P=(0,n.useCallback)((e=>{e.preventDefault(),x.current?.blur(),a?.(_)}),[a,_]),T=(0,n.useCallback)((()=>{w(""),s?.(""),a?.("")}),[s,a]);return(0,p.tZ)(m,{onSubmit:P,className:g,children:(0,p.BX)(o.BZ,{children:[(0,p.tZ)(o.BZ.LeadingItems,{disablePointerEvents:!0,children:(0,p.tZ)(i.jV,{color:"subText",size:"xs"===d?"xs":"sm"})}),(0,p.tZ)(h,{...v,ref:x,type:"text",name:"query",autoComplete:"off",value:_,onChange:b,width:l,size:d}),(0,p.BX)(o.BZ.TrailingItems,{children:[y,!!_&&(0,p.tZ)(f,{size:"zero",borderless:!0,onClick:T,icon:(0,p.tZ)(u.b,{size:"xs"}),"aria-label":(0,c.t)("Clear")})]})]})})}d.displayName="SearchBar";const m=(0,s.Z)("form",{target:"elu65nr2"})({name:"4bgdod",styles:"display:block;position:relative"}),h=(0,s.Z)(o.BZ.Input,{target:"elu65nr1"})((e=>e.width&&`width: ${e.width};`),";"),f=(0,s.Z)(a.zx,{target:"elu65nr0"})("color:",(e=>e.theme.subText),";padding:",(0,l.D)(.5),";"),g=d},"./app/utils/discover/charts.tsx":(e,t,r)=>{r.d(t,{CX:()=>o,Xp:()=>c,gu:()=>i,x1:()=>u});var s=r("./app/locale.tsx"),n=r("./app/utils.tsx"),a=r("./app/utils/formatters.tsx");function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"number";return(0,n.ri)(e)?function(e,t){if(!(0,n.ri)(e))return"—";switch(t){case"integer":case"number":return e.toLocaleString();case"percentage":return(0,a.rl)(e,2);case"duration":return(0,a.g9)(e/1e3,2,!0);case"size":return(0,n.F)(e);default:return e.toString()}}(e,t):"—"}function i(e,t){return u(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3?arguments[3]:void 0)}function u(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0;switch(t){case"integer":case"number":return r?(0,a.Du)(e):e.toLocaleString();case"percentage":return(0,a.rl)(e,0);case"duration":return function(e,t){if(t??=l(e),0===e)return"0";switch(t){case a.ps:{const t=(e/a.ps).toFixed(0);return(0,s.t)("%swk",t)}case a.x4:{const t=(e/a.x4).toFixed(0);return(0,s.t)("%sd",t)}case a.kr:{const t=(e/a.kr).toFixed(0);return(0,s.t)("%shr",t)}case a.EB:{const t=(e/a.EB).toFixed(0);return(0,s.t)("%smin",t)}case a.sh:{const t=(e/a.sh).toFixed(0);return(0,s.t)("%ss",t)}default:const t=e.toFixed(0);return(0,s.t)("%sms",t)}}(e,o);case"size":return(0,n.F)(e,0);default:return e.toString()}}function c(e,t){let r=0;const s=function(e,t){let r;if(e[0]?.data){let s,n=e[0];e.forEach(((r,a)=>{let{seriesName:o,data:i}=r;!1!==t?.selected?.[o]&&i.length&&(n=e[a],s??=e[a])})),s?.data&&(r={max:Math.max(...s.data.map((e=>{let{value:t}=e;return t})).filter((e=>!!e))),min:Math.min(...n.data.map((e=>{let{value:t}=e;return t})).filter((e=>!!e)))})}return r}(e,t);if(s){const e=(s.max+s.min)/2;r=l((s.max-s.min)/5),(e/r).toFixed(0).length>6&&(r=l(e))}return r}function l(e){return e>=a.ps?a.ps:e>=a.x4?a.x4:e>=a.kr?a.kr:e>=a.EB?a.EB:e>=a.sh?a.sh:1}},"./app/utils/discover/genericDiscoverQuery.tsx":(e,t,r)=>{r.d(t,{AA:()=>x,JC:()=>w,ZP:()=>b,o:()=>m});var s=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=(r("../node_modules/core-js/modules/es.error.cause.js"),r("../node_modules/react/index.js"));if("app"==r.j)var a=r("../node_modules/@tanstack/react-query/build/lib/useQuery.mjs");var o=r("./app/api.tsx"),i=r("./app/locale.tsx"),u=r("./app/utils/discover/eventView.tsx"),c=r("./app/utils/performance/contexts/performanceEventViewContext.tsx"),l=r("./app/views/organizationContext.tsx"),p=r("./app/utils/useApi.tsx"),d=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class m{constructor(e,t){(0,s.Z)(this,"message",void 0),(0,s.Z)(this,"originalError",void 0),this.message=e,this.originalError=t}getOriginalError(){return this.originalError}}class h extends n.Component{constructor(){super(...arguments),(0,s.Z)(this,"state",{isLoading:!0,tableFetchID:void 0,error:null,tableData:null,pageLinks:null,api:new o.KU}),(0,s.Z)(this,"_shouldRefetchData",(e=>{const t=_(this.props),r=_(e);return!(0,u.ze)(t,r)||e.limit!==this.props.limit||e.route!==this.props.route||e.cursor!==this.props.cursor})),(0,s.Z)(this,"_parseError",(e=>{if(this.props.parseError)return this.props.parseError(e);if(!e)return null;const t=e.responseJSON?.detail;if("string"==typeof t)return new m(t,e);const r=t?.message;return new m("string"==typeof r?r:(0,i.t)("An unknown error occurred."),e)})),(0,s.Z)(this,"fetchData",(async()=>{const{queryBatching:e,beforeFetch:t,afterFetch:r,didFetch:s,eventView:n,orgSlug:a,route:o,setError:i}=this.props,{api:u}=this.state;if(!n.isValid())return;const c=`/organizations/${a}/${o}/`,l=Symbol("tableFetchID"),p=_(this.props);this.setState({isLoading:!0,tableFetchID:l}),i?.(void 0),t?.(u),u.clear();try{const[t,,n]=await x(u,c,p,{queryBatching:e});if(this.state.tableFetchID!==l)return;const a=r?r(t,this.props):t;s?.(a),this.setState((e=>({isLoading:!1,tableFetchID:void 0,error:null,pageLinks:n?.getResponseHeader("Link")??e.pageLinks,tableData:a})))}catch(e){const t=this._parseError(e);this.setState({isLoading:!1,tableFetchID:void 0,error:t,tableData:null}),i&&i(t??void 0)}}))}componentDidMount(){this.fetchData()}componentDidUpdate(e){const t=this._shouldRefetchData(e),r=!1===e.eventView.isValid()&&this.props.eventView.isValid(),s=!!this.props.shouldRefetchData&&this.props.shouldRefetchData(e,this.props);(t||r||s)&&this.fetchData()}render(){const{isLoading:e,error:t,tableData:r,pageLinks:s}=this.state,n={isLoading:e,error:t,tableData:r,pageLinks:s},a=this.props.children;return a?.(n)}}function f(e){const t=(0,n.useContext)(l.g)?.slug,r=(0,n.useContext)(c.uL)?.eventView,s=e.orgSlug??t,a=e.eventView??r;if(void 0===s||void 0===a)throw new Error("GenericDiscoverQuery requires both an orgSlug and eventView");const o={...e,orgSlug:s,eventView:a};return(0,d.tZ)(h,{...o})}h.displayName="_GenericDiscoverQuery",f.displayName="GenericDiscoverQuery";const g=200,y=2,v=e=>new Promise((t=>setTimeout(t,e)));async function x(e,t,r){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const{queryBatching:n,retry:a}=s;if(n?.batchRequest)return n.batchRequest(e,t,{query:r,includeAllArgs:!0});const o=a?.baseTimeout??g,i=a?.timeoutMultiplier??y,u=a?.statusCodes??[],c=a?.tries??1;let l,p=0,d=0;for(;p<c&&(!l||u.includes(l.status));){d>0&&await v(d);try{return p++,await e.requestPromise(t,{method:"GET",includeAllArgs:!0,query:{...r}})}catch(e){l=e,d=o*i**(p-1)}}throw l}function _(e){const{cursor:t,limit:r,noPagination:s,referrer:n,getRequestPayload:a,eventView:o,location:i,forceAppendRawQueryString:u}=e,c=a?a(e):o.getEventsAPIPayload(i,u);return t&&(c.cursor=t),r&&(c.per_page=r),s&&(c.noPagination=s),n&&(c.referrer=n),Object.assign(c,e.queryExtras??{}),c}function w(e){const t=(0,p.Z)(),{orgSlug:r,route:s,options:n}=e,o=`/organizations/${r}/${s}/`,i=_(e);return(0,a.a)([s,i],(async()=>{const[r]=await x(t,o,i,{queryBatching:e.queryBatching});return r}),n)}const b=f},"./app/utils/performance/contexts/performanceEventViewContext.tsx":(e,t,r)=>{r.d(t,{bq:()=>n,uL:()=>o});var s=r("./app/utils/performance/contexts/utils.tsx");const[n,a,o]=(0,s.n)({name:"PerformanceEventViewContext"})},"./app/utils/performance/contexts/utils.tsx":(e,t,r)=>{r.d(t,{n:()=>n}),r("../node_modules/core-js/modules/es.error.cause.js");var s=r("../node_modules/react/index.js");function n(e){const{strict:t=!0,errorMessage:r=`useContext for "${e.name}" must be inside a Provider with a value`,name:n}=e,a=(0,s.createContext)(void 0);return a.displayName=n,[a.Provider,function(){const e=(0,s.useContext)(a);if(!e&&t)throw new Error(r);return e},a]}},"./app/utils/useOnClickOutside.tsx":(e,t,r)=>{r.d(t,{Z:()=>n});var s=r("../node_modules/react/index.js");const n=function(e,t){(0,s.useEffect)((()=>{const r=r=>{const s=e?.current;s&&!s.contains(r.target)&&t(r)};return document.addEventListener("mousedown",r),document.addEventListener("touchstart",r),()=>{document.removeEventListener("mousedown",r),document.removeEventListener("touchstart",r)}}),[e,t])}},"./app/views/performance/data.tsx":(e,t,r)=>{r.d(t,{$r:()=>w,AM:()=>T,C:()=>P,GY:()=>h,V$:()=>x,hj:()=>g,mW:()=>f,yX:()=>v}),r("../node_modules/core-js/modules/es.array.push.js");var s=r("./app/components/gridEditable/index.tsx"),n=r("./app/components/performance/searchBar.tsx"),a=r("./app/constants/pageFilters.tsx"),o=r("./app/locale.tsx"),i=r("./app/utils/discover/eventView.tsx"),u=r("./app/utils/performance/vitals/constants.tsx"),c=r("./app/utils/queryString.tsx"),l=r("./app/utils/tokenizeSearch.tsx"),p=r("./app/views/performance/trends/utils.tsx"),d=r("./app/views/performance/landing/utils.tsx"),m=r("./app/views/performance/vitalDetail/utils.tsx");const h="7d",f=300,g="app"==r.j?["transaction","project","tpm","p50","p95","failure rate","apdex","users","user misery"]:null,y="app"==r.j?["transaction"]:null,v=e=>e?.features?.includes("performance-landing-page-stats-period")?"14d":h;let x;!function(e){e.TPM="tpm",e.THROUGHPUT="throughput",e.FAILURE_RATE="failureRate",e.P50="p50",e.P75="p75",e.P95="p95",e.P99="p99",e.LCP="lcp",e.FCP="fcp",e.FID="fid",e.CLS="cls",e.STATUS_BREAKDOWN="statusBreakdown",e.DURATION_DISTRIBUTION="durationDistribution",e.USER_MISERY="userMisery",e.APDEX="apdex",e.APP_START_COLD="appStartCold",e.APP_START_WARM="appStartWarm",e.SLOW_FRAMES="slowFrames",e.FROZEN_FRAMES="frozenFrames",e.STALL_PERCENTAGE="stallPercentage",e.MOST_ISSUES="mostIssues",e.MOST_ERRORS="mostErrors",e.SLOW_HTTP_SPANS="slowHTTPSpans",e.TIME_TO_FULL_DISPLAY="timeToFullDisplay",e.TIME_TO_INITIAL_DISPLAY="timeToInitialDisplay"}(x||(x={}));const _={tpm:()=>(0,o.t)("TPM is the number of recorded transaction events per minute."),throughput:()=>(0,o.t)("Throughput is the number of recorded transaction events per minute."),failureRate:()=>(0,o.t)("Failure rate is the percentage of recorded transactions that had a known and unsuccessful status."),p50:()=>(0,o.t)("p50 indicates the duration that 50% of transactions are faster than."),p75:()=>(0,o.t)("p75 indicates the duration that 75% of transactions are faster than."),p95:()=>(0,o.t)("p95 indicates the duration that 95% of transactions are faster than."),p99:()=>(0,o.t)("p99 indicates the duration that 99% of transactions are faster than."),lcp:()=>(0,o.t)("Largest contentful paint (LCP) is a web vital meant to represent user load times"),fcp:()=>(0,o.t)("First contentful paint (FCP) is a web vital meant to represent user load times"),fid:()=>(0,o.t)("First input delay (FID) is a web vital representing load for the first user interaction on a page."),cls:()=>(0,o.t)("Cumulative layout shift (CLS) is a web vital measuring unexpected visual shifting a user experiences."),statusBreakdown:()=>(0,o.t)("The breakdown of transaction statuses. This may indicate what type of failure it is."),durationDistribution:()=>(0,o.t)("Distribution buckets counts of transactions at specifics times for your current date range"),userMisery:()=>(0,o.t)("User Misery is a score that represents the number of unique users who have experienced load times 4x the project's configured threshold. Adjust project threshold in project performance settings."),apdex:()=>(0,o.t)("Apdex is the ratio of both satisfactory and tolerable response times to all response times. To adjust the tolerable threshold, go to project performance settings."),appStartCold:()=>(0,o.t)("Cold start is a measure of the application start up time from scratch."),appStartWarm:()=>(0,o.t)("Warm start is a measure of the application start up time while still in memory."),slowFrames:()=>(0,o.t)("The count of the number of slow frames in the transaction."),frozenFrames:()=>(0,o.t)("The count of the number of frozen frames in the transaction."),mostErrors:()=>(0,o.t)("Transactions with the most associated errors."),mostIssues:()=>(0,o.t)("The most instances of an issue for a related transaction."),slowHTTPSpans:()=>(0,o.t)("The transactions with the slowest spans of a certain type."),stallPercentage:()=>(0,o.t)("The percentage of the transaction duration in which the application is in a stalled state."),timeToFullDisplay:()=>(0,o.t)("The time between application launch and complete display of all resources and views"),timeToInitialDisplay:()=>(0,o.t)("The time it takes for an application to produce its first frame")};function w(e,t){return _.hasOwnProperty(t)?_[t](e):""}function b(e,t){const r=new l.MY(e);if(r.freeText.length>0){const e=r.freeText.join(" ");r.setFilterValues("transaction",[(0,n.D)(e)],!1),r.freeText=[]}return t&&(r.tokens=r.tokens.filter((e=>e.key&&y.includes(e.key)))),r.formatString()}function P(e,t){let{isTrends:r=!1,withStaticFilters:n=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=arguments.length>3?arguments[3]:void 0;const m=function(e,t,r){const{query:n}=e,a=n.start&&n.end,l={id:void 0,name:(0,o.t)("Performance"),query:"event.type:transaction",projects:[],fields:["team_key_transaction","transaction","project","tpm()","p50()","p95()","failure_rate()","apdex()","count_unique(user)","count_miserable(user)","user_misery()"],version:2},d=Array(l.fields.length).fill(s.z7);d[l.fields.length-1]="110",l.widths=d,n.statsPeriod||a||(l.range=v(r)),l.orderby=(0,c.ro)(n.sort,"-tpm");const m=(0,c.ro)(n.query,"");l.query=b(m,t);const h=i.ZP.fromNewQueryWithLocation(l,e);if(h.additionalConditions.addFilterValues("event.type",["transaction"]),n.trendParameter){const t=(0,p.IO)(e,[],[]);u.r9[t.column]&&!r.features.includes("performance-new-trends")&&h.additionalConditions.addFilterValues("has",[t.column])}return h}(e,n,l);if(r)return m;const h=(0,d.Q_)(e,t,m);switch(h?.field){case d.BY.FRONTEND_PAGELOAD:return function(e,t,r){const{query:n}=e,a=n.start&&n.end,u={id:void 0,name:(0,o.t)("Performance"),query:"event.type:transaction",projects:[],fields:["team_key_transaction","transaction","project","tpm()","p75(measurements.fcp)","p75(measurements.lcp)","p75(measurements.fid)","p75(measurements.cls)","count_unique(user)","count_miserable(user)","user_misery()"],version:2},l=Array(u.fields.length).fill(s.z7);l[u.fields.length-1]="110",u.widths=l,n.statsPeriod||a||(u.range=v(r)),u.orderby=(0,c.ro)(n.sort,"-tpm");const p=(0,c.ro)(n.query,"");u.query=b(p,t);const d=i.ZP.fromNewQueryWithLocation(u,e);return d.additionalConditions.addFilterValues("event.type",["transaction"]),d.additionalConditions.addFilterValues("transaction.op",["pageload"]),d}(e,n,l);case d.BY.FRONTEND_OTHER:return function(e,t,r){const{query:n}=e,a=n.start&&n.end,u={id:void 0,name:(0,o.t)("Performance"),query:"event.type:transaction",projects:[],fields:["team_key_transaction","transaction","project","transaction.op","tpm()","p50(transaction.duration)","p75(transaction.duration)","p95(transaction.duration)","count_unique(user)","count_miserable(user)","user_misery()"],version:2},l=Array(u.fields.length).fill(s.z7);l[u.fields.length-1]="110",u.widths=l,n.statsPeriod||a||(u.range=v(r)),u.orderby=(0,c.ro)(n.sort,"-tpm");const p=(0,c.ro)(n.query,"");u.query=b(p,t);const d=i.ZP.fromNewQueryWithLocation(u,e);return d.additionalConditions.addFilterValues("event.type",["transaction"]),d}(e,n,l);case d.BY.BACKEND:return function(e,t,r){const{query:n}=e,a=n.start&&n.end,u={id:void 0,name:(0,o.t)("Performance"),query:"event.type:transaction",projects:[],fields:["team_key_transaction","transaction","project","transaction.op","http.method","tpm()","p50()","p95()","failure_rate()","apdex()","count_unique(user)","count_miserable(user)","user_misery()"],version:2},l=Array(u.fields.length).fill(s.z7);l[u.fields.length-1]="110",u.widths=l,n.statsPeriod||a||(u.range=v(r)),u.orderby=(0,c.ro)(n.sort,"-tpm");const p=(0,c.ro)(n.query,"");u.query=b(p,t);const d=i.ZP.fromNewQueryWithLocation(u,e);return d.additionalConditions.addFilterValues("event.type",["transaction"]),d}(e,n,l);case d.BY.MOBILE:return function(e,t,r,n,u){const{query:l}=e,p=["team_key_transaction","transaction","project","transaction.op","tpm()","p75(measurements.frames_slow_rate)","p75(measurements.frames_frozen_rate)"];u.features.includes("mobile-vitals")&&p.push("p75(measurements.time_to_initial_display)");const d=r.project;if(d.length>0&&d[0]!==a.mP){const e=t.filter((e=>d.includes(parseInt(e.id,10))));e.length>0&&e.every((e=>"react-native"===e.platform))&&p.push("p75(measurements.stall_percentage)")}const m=l.start&&l.end,h={id:void 0,name:(0,o.t)("Performance"),query:"event.type:transaction",projects:[],fields:[...p,"count_unique(user)","count_miserable(user)","user_misery()"],version:2},f=Array(h.fields.length).fill(s.z7);f[h.fields.length-1]="110",h.widths=f,l.statsPeriod||m||(h.range=v(u)),h.orderby=(0,c.ro)(l.sort,"-tpm");const g=(0,c.ro)(l.query,"");h.query=b(g,n);const y=i.ZP.fromNewQueryWithLocation(h,e);return y.additionalConditions.addFilterValues("event.type",["transaction"]),y}(e,t,m,n,l);default:return m}}function T(e,t){const{query:r}=e,s=(0,m.iF)(e),n=r.start&&r.end,a={id:void 0,name:(0,o.t)("Vitals Performance Details"),query:"event.type:transaction",projects:[],fields:["team_key_transaction","transaction","project","count_unique(user)","count()",`p50(${s})`,`p75(${s})`,`p95(${s})`,(0,m.Ve)(s),(0,m.q4)(s)],version:2,yAxis:[`p75(${s})`]};r.statsPeriod||n||(a.range=v(t)),a.orderby=(0,c.ro)(r.sort,"-count");const u=(0,c.ro)(r.query,"");a.query=b(u,!1);const l=i.ZP.fromNewQueryWithLocation(a,e);return l.additionalConditions.addFilterValues("event.type",["transaction"]),l.additionalConditions.addFilterValues("has",[s]),l}}}]);
//# sourceMappingURL=../sourcemaps/app_components_searchBar_tsx-app_utils_discover_charts_tsx-app_utils_discover_genericDiscover-f3aeaa.73f85308bde55cf45f6c9b4fb677c495.js.map