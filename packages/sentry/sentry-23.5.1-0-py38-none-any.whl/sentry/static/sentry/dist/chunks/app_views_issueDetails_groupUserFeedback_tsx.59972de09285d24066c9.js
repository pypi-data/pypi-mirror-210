"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_issueDetails_groupUserFeedback_tsx"],{"./app/views/issueDetails/groupUserFeedback.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>v});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=s("../node_modules/react/index.js"),n=s("../node_modules/lodash/isEqual.js"),a=s.n(n),u=s("./app/components/events/userFeedback.tsx"),c=s("./app/components/layouts/thirds.tsx"),p=s("./app/components/loadingError.tsx"),d=s("./app/components/loadingIndicator.tsx"),l=s("./app/components/pagination.tsx"),h=s("./app/styles/space.tsx"),m=s("./app/utils/withOrganization.tsx"),g=s("./app/views/userFeedback/userFeedbackEmpty.tsx"),b=s("./app/views/issueDetails/utils.tsx"),f=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class w extends r.Component{constructor(){super(...arguments),(0,o.Z)(this,"state",{loading:!0,error:!1,reportList:[],pageLinks:""}),(0,o.Z)(this,"fetchData",(()=>{this.setState({loading:!0,error:!1}),(0,b.g5)(this.props.group.id,{...this.props.params,cursor:this.props.location.query.cursor||""}).then((e=>{let[t,s,o]=e;this.setState({error:!1,loading:!1,reportList:t,pageLinks:o?.getResponseHeader("Link")})})).catch((()=>{this.setState({error:!0,loading:!1})}))}))}componentDidMount(){this.fetchData()}componentDidUpdate(e){a()(e.params,this.props.params)&&e.location.pathname===this.props.location.pathname&&e.location.search===this.props.location.search||this.fetchData()}render(){const{reportList:e,loading:t,error:s}=this.state,{organization:o,group:i}=this.props;return t?(0,f.tZ)(d.Z,{}):s?(0,f.tZ)(p.Z,{onRetry:this.fetchData}):e.length?(0,f.tZ)(c.uT,{children:(0,f.BX)(c.or,{children:[e.map(((e,t)=>(0,f.tZ)(_,{report:e,orgId:o.slug,issueId:i.id},t))),(0,f.tZ)(l.Z,{pageLinks:this.state.pageLinks,...this.props})]})}):(0,f.tZ)(c.uT,{children:(0,f.tZ)(c.or,{fullWidth:!0,children:(0,f.tZ)(g.X,{projectIds:[i.project.id]})})})}}w.displayName="GroupUserFeedback";const _=(0,i.Z)(u.o,{target:"e11m39vv0"})("margin-bottom:",(0,h.D)(2),";"),v=(0,m.Z)(w)},"./app/views/issueDetails/utils.tsx":(e,t,s)=>{s.d(t,{Ad:()=>h,M3:()=>g,V7:()=>u,by:()=>b,dG:()=>p,g5:()=>c,m7:()=>m,sC:()=>l});var o=s("../node_modules/lodash/orderBy.js"),i=s.n(o),r=s("./app/actionCreators/group.tsx"),n=s("./app/api.tsx"),a=s("./app/locale.tsx");function u(e,t,s,o){(0,r.Gv)(e,{orgId:t,projectId:s,itemIds:[o],failSilently:!0,data:{hasSeen:!0}},{})}function c(e,t){return(new n.KU).requestPromise(`/issues/${e}/user-reports/`,{includeAllArgs:!0,query:t})}function p(e){const t=e.tags.find((e=>{let{key:t}=e;return"environment"===t}));return t?t.value:null}const d={commented:(0,a.t)("You're receiving workflow notifications because you have commented on this issue."),assigned:(0,a.t)("You're receiving workflow notifications because you were assigned to this issue."),bookmarked:(0,a.t)("You're receiving workflow notifications because you have bookmarked this issue."),changed_status:(0,a.t)("You're receiving workflow notifications because you have changed the status of this issue."),mentioned:(0,a.t)("You're receiving workflow notifications because you have been mentioned in this issue.")};function l(e){if(e.subscriptionDetails&&e.subscriptionDetails.disabled)return(0,a.t)("You have disabled workflow notifications for this project.");if(!e.isSubscribed)return(0,a.t)("Subscribe to workflow notifications for this issue");if(e.subscriptionDetails){const{reason:t}=e.subscriptionDetails;if("unknown"===t)return(0,a.t)("You're receiving workflow notifications because you are subscribed to this issue.");if(t&&d.hasOwnProperty(t))return d[t]}return(0,a.t)("You're receiving updates because you are subscribed to workflow notifications for this project.")}function h(e){return i()([...e],(e=>{let{dateCreated:t}=e;return new Date(t)}),["desc"])[0]}let m;function g(e,t){const{status:s,count:o,activity:i}=e,r=Number(o);switch(s){case"reprocessing":return m.REPROCESSING;case"unresolved":{const e=t??h(i);return"reprocess"===e?.type?0===r?m.REPROCESSED_AND_HASNT_EVENT:m.REPROCESSED_AND_HAS_EVENT:m.NO_STATUS}default:return m.NO_STATUS}}!function(e){e.REPROCESSED_AND_HASNT_EVENT="reprocessed_and_hasnt_event",e.REPROCESSED_AND_HAS_EVENT="reprocessed_and_has_event",e.REPROCESSING="reprocessing",e.NO_STATUS="no_status"}(m||(m={}));const b=function(e){let{groupId:t,environment:s=[]}=e,{enabled:o=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.zk)({groupId:t,environment:s,readable:!0,limit:4},{enabled:o})}}}]);
//# sourceMappingURL=../sourcemaps/app_views_issueDetails_groupUserFeedback_tsx.415f53efbb0bb7252b4c7387549fc8ec.js.map