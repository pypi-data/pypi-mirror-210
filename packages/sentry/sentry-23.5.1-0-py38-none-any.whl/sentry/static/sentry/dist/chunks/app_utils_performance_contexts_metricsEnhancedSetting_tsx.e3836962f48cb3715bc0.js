"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_utils_performance_contexts_metricsEnhancedSetting_tsx"],{"./app/utils/performance/contexts/metricsEnhancedPerformanceDataContext.tsx":(t,e,a)=>{a.d(e,{AQ:()=>A,EA:()=>T,UT:()=>d,hX:()=>S});var s=a("../node_modules/react/index.js"),r=a("./app/components/tag.tsx"),i=a("./app/utils/useOrganization.tsx"),o=a("./app/views/performance/landing/widgets/utils.tsx"),l=a("./app/utils/performance/contexts/metricsEnhancedSetting.tsx"),n=a("./app/utils/performance/contexts/utils.tsx"),p=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const[_,c]=(0,n.n)({name:"MetricsEnhancedPerformanceDataContext"});function d(t){let{children:e,chartSetting:a}=t;const{setAutoSampleState:r}=(0,l.Eg)(),[i,n]=(0,s.useState)(void 0),c=(0,s.useCallback)((t=>{o.zS.includes(a)||(!0===t?r(l.nl.metrics):!1===t&&r(l.nl.transactions),n(t))}),[r,n,a]);return(0,p.tZ)(_,{value:{isMetricsData:i,setIsMetricsData:c},children:e})}d.displayName="MEPDataProvider";const T=c;function A(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t?.meta?.isMetricsData??t?.seriesAdditionalInfo?.[e]?.isMetricsData??t?.histograms?.meta?.isMetricsData??t?.tableData?.meta?.isMetricsData}function S(){const{isMetricsData:t}=T();if(!(0,i.Z)().features.includes("performance-use-metrics"))return null;if(void 0===t)return(0,p.tZ)("span",{"data-test-id":"no-metrics-data-tag"});const e=t?"processed":"indexed";return(0,p.tZ)(r.Z,{"data-test-id":"has-metrics-data-tag",children:e})}S.displayName="MEPTag"},"./app/utils/performance/contexts/metricsEnhancedSetting.tsx":(t,e,a)=>{a.d(e,{Eg:()=>E,gp:()=>R,kP:()=>O,nP:()=>T,nl:()=>A,oR:()=>S,tm:()=>m});var s=a("../node_modules/react/index.js"),r=a("../node_modules/react-router/es/index.js"),i=(a("./app/utils/localStorage.tsx"),a("./app/utils/performance/contexts/metricsEnhancedPerformanceDataContext.tsx")),o=a("./app/utils/queryString.tsx"),l=a("./app/utils/useOrganization.tsx"),n=a("./app/utils/performance/contexts/utils.tsx"),p=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const[_,c,d]=(0,n.n)({name:"MetricsEnhancedSettingContext"}),T=d.Consumer;let A,S;!function(t){t.unset="unset",t.metrics="metrics",t.transactions="transactions"}(A||(A={})),function(t){t.auto="auto",t.metricsOnly="metricsOnly",t.transactionsOnly="transactionsOnly"}(S||(S={}));const u="metricSetting",m="metricSearchSetting";function R(t){const e=function(t){return t.features.includes("performance-use-metrics")}(t),a=t.features.includes("performance-transaction-name-only-search"),s=t.features.includes("dynamic-sampling")&&t.features.includes("mep-rollout-flag");return e||a||s}function O(t){let{children:e,location:a,_hasMEPState:n,forceTransactions:c}=t;const d=R((0,l.Z)()),T=[S.metricsOnly,S.transactionsOnly],m=a?(0,o.ro)(a.query[u]):S.metricsOnly;let O=S.metricsOnly;c&&(O=S.transactionsOnly);const E=T.find((t=>t===m))??O,f=void 0!==n,[I,P]=(0,s.useReducer)(((t,e)=>e),E),D=(0,s.useCallback)((t=>{a&&(r.browserHistory.replace({...a,query:{...a.query,[u]:t}}),P(t))}),[a,P]),[h,M]=(0,s.useReducer)(((t,e)=>e),A.unset),y=f?n:I,g=d&&y===S.auto,L=d&&y===S.metricsOnly,$=d&&y===S.transactionsOnly,C=`${y}`;return(0,p.tZ)(_,{value:{autoSampleState:h,metricSettingState:y,shouldQueryProvideMEPAutoParams:g,shouldQueryProvideMEPMetricParams:L,shouldQueryProvideMEPTransactionParams:$,memoizationKey:C,setMetricSettingState:D,setAutoSampleState:M},children:(0,p.tZ)(i.UT,{children:e})})}O.displayName="MEPSettingProvider";const E=c},"./app/views/performance/landing/widgets/types.tsx":(t,e,a)=>{let s,r;a.d(e,{A:()=>r}),function(t){t.ERROR="error",t.LOADING="loading",t.EMPTY="empty",t.DATA="data"}(s||(s={})),function(t){t.histogram="histogram",t.area="area",t.vitals="vitals",t.line_list="line_list",t.trends="trends",t.stacked_area="stacked_area"}(r||(r={}))},"./app/views/performance/landing/widgets/utils.tsx":(t,e,a)=>{a.d(e,{CJ:()=>l,I2:()=>c,gM:()=>p,hD:()=>R,rp:()=>S,zM:()=>u,zS:()=>_});var s=a("./app/utils.tsx"),r=a("./app/utils/localStorage.tsx"),i=a("./app/utils/performance/contexts/metricsEnhancedSetting.tsx"),o=a("./app/views/performance/landing/widgets/widgetDefinitions.tsx");const l=["children","organization","yAxis","period","start","end","environment","project","referrer"],n={};function p(t,e){let a={};const r=n;return(t.shouldQueryProvideMEPAutoParams||e)&&(a={...a,...r,dataset:"metricsEnhanced"},e)?a:(t.shouldQueryProvideMEPTransactionParams&&(a={...a,...r,dataset:"discover"}),t.shouldQueryProvideMEPMetricParams&&(a={...a,...r,dataset:"metrics"}),(0,s.z)(a)?void 0:a)}const _=[o.s.MOST_RELATED_ERRORS,o.s.MOST_RELATED_ISSUES];function c(t,e){if(!_.includes(e))return p(t)}const d="landing-chart-container",T=(t,e,a)=>`landing-chart-container#${e}#${a}#${t}`;function A(){return JSON.parse(r.Z.getItem(d)||"{}")}const S=(t,e,a,s,r)=>{if(r)return s;const i=T(t,a,e),l=A(),n=l?.[i];return n&&Object.values(o.s).includes(n)?n:s},u=(t,e,a,s)=>{const i=T(t,a,e),o=A();o[i]=s,function(t){r.Z.setItem(d,JSON.stringify(t))}(o)},m=[o.s.DURATION_HISTOGRAM,o.s.FCP_HISTOGRAM,o.s.LCP_HISTOGRAM,o.s.FID_HISTOGRAM];function R(t,e,a){return!(0,i.gp)(t)||t.features.includes("performance-mep-reintroduce-histograms")||a.metricSettingState===i.oR.transactionsOnly?e:e.filter((t=>!m.includes(t)))}},"./app/views/performance/landing/widgets/widgetDefinitions.tsx":(t,e,a)=>{a.d(e,{W:()=>_,s:()=>n});var s=a("./app/constants/chartPalette.tsx"),r=a("./app/locale.tsx"),i=a("./app/utils/discover/fields.tsx"),o=a("./app/views/performance/data.tsx"),l=a("./app/views/performance/landing/widgets/types.tsx");let n;!function(t){t.DURATION_HISTOGRAM="duration_histogram",t.LCP_HISTOGRAM="lcp_histogram",t.FCP_HISTOGRAM="fcp_histogram",t.FID_HISTOGRAM="fid_histogram",t.APDEX_AREA="apdex_area",t.P50_DURATION_AREA="p50_duration_area",t.P75_DURATION_AREA="p75_duration_area",t.P95_DURATION_AREA="p95_duration_area",t.P99_DURATION_AREA="p99_duration_area",t.P75_LCP_AREA="p75_lcp_area",t.TPM_AREA="tpm_area",t.FAILURE_RATE_AREA="failure_rate_area",t.USER_MISERY_AREA="user_misery_area",t.WORST_LCP_VITALS="worst_lcp_vitals",t.WORST_FCP_VITALS="worst_fcp_vitals",t.WORST_CLS_VITALS="worst_cls_vitals",t.WORST_FID_VITALS="worst_fid_vitals",t.MOST_IMPROVED="most_improved",t.MOST_REGRESSED="most_regressed",t.MOST_RELATED_ERRORS="most_related_errors",t.MOST_RELATED_ISSUES="most_related_issues",t.SLOW_HTTP_OPS="slow_http_ops",t.SLOW_DB_OPS="slow_db_ops",t.SLOW_RESOURCE_OPS="slow_resource_ops",t.SLOW_BROWSER_OPS="slow_browser_ops",t.COLD_STARTUP_AREA="cold_startup_area",t.WARM_STARTUP_AREA="warm_startup_area",t.SLOW_FRAMES_AREA="slow_frames_area",t.FROZEN_FRAMES_AREA="frozen_frames_area",t.MOST_SLOW_FRAMES="most_slow_frames",t.MOST_FROZEN_FRAMES="most_frozen_frames",t.SPAN_OPERATIONS="span_operations",t.TIME_TO_INITIAL_DISPLAY="time_to_initial_display",t.TIME_TO_FULL_DISPLAY="time_to_full_display"}(n||(n={}));const p=s.$[5],_=t=>{let{organization:e}=t;return{[n.DURATION_HISTOGRAM]:{title:(0,r.t)("Duration Distribution"),titleTooltip:(0,o.$r)(e,o.V$.DURATION_DISTRIBUTION),fields:["transaction.duration"],dataType:l.A.histogram,chartColor:p[5]},[n.LCP_HISTOGRAM]:{title:(0,r.t)("LCP Distribution"),titleTooltip:(0,o.$r)(e,o.V$.DURATION_DISTRIBUTION),fields:["measurements.lcp"],dataType:l.A.histogram,chartColor:p[5]},[n.FCP_HISTOGRAM]:{title:(0,r.t)("FCP Distribution"),titleTooltip:(0,o.$r)(e,o.V$.DURATION_DISTRIBUTION),fields:["measurements.fcp"],dataType:l.A.histogram,chartColor:p[5]},[n.FID_HISTOGRAM]:{title:(0,r.t)("FID Distribution"),titleTooltip:(0,o.$r)(e,o.V$.DURATION_DISTRIBUTION),fields:["measurements.fid"],dataType:l.A.histogram,chartColor:p[5]},[n.WORST_LCP_VITALS]:{title:(0,r.t)("Worst LCP Web Vitals"),titleTooltip:(0,o.$r)(e,o.V$.LCP),fields:["measurements.lcp"],vitalStops:{poor:4e3,meh:2500},dataType:l.A.vitals},[n.WORST_FCP_VITALS]:{title:(0,r.t)("Worst FCP Web Vitals"),titleTooltip:(0,o.$r)(e,o.V$.FCP),fields:["measurements.fcp"],vitalStops:{poor:3e3,meh:1e3},dataType:l.A.vitals},[n.WORST_FID_VITALS]:{title:(0,r.t)("Worst FID Web Vitals"),titleTooltip:(0,o.$r)(e,o.V$.FID),fields:["measurements.fid"],vitalStops:{poor:300,meh:100},dataType:l.A.vitals},[n.WORST_CLS_VITALS]:{title:(0,r.t)("Worst CLS Web Vitals"),titleTooltip:(0,o.$r)(e,o.V$.CLS),fields:["measurements.cls"],vitalStops:{poor:.25,meh:.1},dataType:l.A.vitals},[n.TPM_AREA]:{title:(0,r.t)("Transactions Per Minute"),titleTooltip:(0,o.$r)(e,o.V$.TPM),fields:["tpm()"],dataType:l.A.area,chartColor:p[1],allowsOpenInDiscover:!0},[n.APDEX_AREA]:{title:(0,r.t)("Apdex"),titleTooltip:(0,o.$r)(e,o.V$.APDEX),fields:["apdex()"],dataType:l.A.area,chartColor:p[4],allowsOpenInDiscover:!0},[n.P50_DURATION_AREA]:{title:(0,r.t)("p50 Duration"),titleTooltip:(0,o.$r)(e,o.V$.P50),fields:["p50(transaction.duration)"],dataType:l.A.area,chartColor:p[3],allowsOpenInDiscover:!0},[n.P75_DURATION_AREA]:{title:(0,r.t)("p75 Duration"),titleTooltip:(0,o.$r)(e,o.V$.P75),fields:["p75(transaction.duration)"],dataType:l.A.area,chartColor:p[3],allowsOpenInDiscover:!0},[n.P95_DURATION_AREA]:{title:(0,r.t)("p95 Duration"),titleTooltip:(0,o.$r)(e,o.V$.P95),fields:["p95(transaction.duration)"],dataType:l.A.area,chartColor:p[3],allowsOpenInDiscover:!0},[n.P99_DURATION_AREA]:{title:(0,r.t)("p99 Duration"),titleTooltip:(0,o.$r)(e,o.V$.P99),fields:["p99(transaction.duration)"],dataType:l.A.area,chartColor:p[3],allowsOpenInDiscover:!0},[n.P75_LCP_AREA]:{title:(0,r.t)("p75 LCP"),titleTooltip:(0,o.$r)(e,o.V$.P75),fields:["p75(measurements.lcp)"],dataType:l.A.area,chartColor:p[1],allowsOpenInDiscover:!0},[n.FAILURE_RATE_AREA]:{title:(0,r.t)("Failure Rate"),titleTooltip:(0,o.$r)(e,o.V$.FAILURE_RATE),fields:["failure_rate()"],dataType:l.A.area,chartColor:p[2],allowsOpenInDiscover:!0},[n.USER_MISERY_AREA]:{title:(0,r.t)("User Misery"),titleTooltip:(0,o.$r)(e,o.V$.USER_MISERY),fields:["user_misery()"],dataType:l.A.area,chartColor:p[0],allowsOpenInDiscover:!0},[n.COLD_STARTUP_AREA]:{title:(0,r.t)("Cold Startup Time"),titleTooltip:(0,o.$r)(e,o.V$.APP_START_COLD),fields:["p75(measurements.app_start_cold)"],dataType:l.A.area,chartColor:p[4],allowsOpenInDiscover:!0},[n.WARM_STARTUP_AREA]:{title:(0,r.t)("Warm Startup Time"),titleTooltip:(0,o.$r)(e,o.V$.APP_START_WARM),fields:["p75(measurements.app_start_warm)"],dataType:l.A.area,chartColor:p[3],allowsOpenInDiscover:!0},[n.SLOW_FRAMES_AREA]:{title:(0,r.t)("Slow Frames"),titleTooltip:(0,o.$r)(e,o.V$.SLOW_FRAMES),fields:["p75(measurements.frames_slow_rate)"],dataType:l.A.area,chartColor:p[0],allowsOpenInDiscover:!0},[n.FROZEN_FRAMES_AREA]:{title:(0,r.t)("Frozen Frames"),titleTooltip:(0,o.$r)(e,o.V$.FROZEN_FRAMES),fields:["p75(measurements.frames_frozen_rate)"],dataType:l.A.area,chartColor:p[5],allowsOpenInDiscover:!0},[n.MOST_RELATED_ERRORS]:{title:(0,r.t)("Most Related Errors"),titleTooltip:(0,o.$r)(e,o.V$.MOST_ERRORS),fields:["failure_count()"],dataType:l.A.line_list,chartColor:p[0]},[n.MOST_RELATED_ISSUES]:{title:(0,r.t)("Most Related Issues"),titleTooltip:(0,o.$r)(e,o.V$.MOST_ISSUES),fields:["count()"],dataType:l.A.line_list,chartColor:p[0]},[n.SLOW_HTTP_OPS]:{title:(0,r.t)("Slow HTTP Ops"),titleTooltip:(0,o.$r)(e,o.V$.SLOW_HTTP_SPANS),fields:["p75(spans.http)"],dataType:l.A.line_list,chartColor:p[0]},[n.SLOW_BROWSER_OPS]:{title:(0,r.t)("Slow Browser Ops"),titleTooltip:(0,o.$r)(e,o.V$.SLOW_HTTP_SPANS),fields:["p75(spans.browser)"],dataType:l.A.line_list,chartColor:p[0]},[n.SLOW_RESOURCE_OPS]:{title:(0,r.t)("Slow Resource Ops"),titleTooltip:(0,o.$r)(e,o.V$.SLOW_HTTP_SPANS),fields:["p75(spans.resource)"],dataType:l.A.line_list,chartColor:p[0]},[n.SLOW_DB_OPS]:{title:(0,r.t)("Slow DB Ops"),titleTooltip:(0,o.$r)(e,o.V$.SLOW_HTTP_SPANS),fields:["p75(spans.db)"],dataType:l.A.line_list,chartColor:p[0]},[n.TIME_TO_INITIAL_DISPLAY]:{title:(0,r.t)("Time to Initial Display"),titleTooltip:(0,o.$r)(e,o.V$.TIME_TO_INITIAL_DISPLAY),fields:["p75(measurements.time_to_initial_display)"],dataType:l.A.area,chartColor:p[4],allowsOpenInDiscover:!0},[n.TIME_TO_FULL_DISPLAY]:{title:(0,r.t)("Time to Full Display"),titleTooltip:(0,o.$r)(e,o.V$.TIME_TO_FULL_DISPLAY),fields:["p75(measurements.time_to_full_display)"],dataType:l.A.area,chartColor:p[4],allowsOpenInDiscover:!0},[n.MOST_SLOW_FRAMES]:{title:(0,r.t)("Most Slow Frames"),titleTooltip:(0,o.$r)(e,o.V$.SLOW_FRAMES),fields:["avg(measurements.frames_slow)"],dataType:l.A.line_list,chartColor:p[0]},[n.MOST_FROZEN_FRAMES]:{title:(0,r.t)("Most Frozen Frames"),titleTooltip:(0,o.$r)(e,o.V$.FROZEN_FRAMES),fields:["avg(measurements.frames_frozen)"],dataType:l.A.line_list,chartColor:p[0]},[n.MOST_IMPROVED]:{title:(0,r.t)("Most Improved"),titleTooltip:(0,r.t)("This compares the baseline (%s) of the past with the present.","improved"),fields:[],dataType:l.A.trends},[n.MOST_REGRESSED]:{title:(0,r.t)("Most Regressed"),titleTooltip:(0,r.t)("This compares the baseline (%s) of the past with the present.","regressed"),fields:[],dataType:l.A.trends},[n.SPAN_OPERATIONS]:{title:(0,r.t)("Span Operations Breakdown"),titleTooltip:"",fields:i.$4.map((t=>`p75(${t})`)),dataType:l.A.stacked_area}}}}}]);
//# sourceMappingURL=../sourcemaps/app_utils_performance_contexts_metricsEnhancedSetting_tsx.1653f1a25f87594f55c408e659339c05.js.map