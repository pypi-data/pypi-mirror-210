"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_utils_discover_discoverQuery_tsx-app_views_issueDetails_groupEvents_tsx"],{"./app/utils/discover/discoverQuery.tsx":(e,s,t)=>{t.d(s,{Z:()=>u,_:()=>a});var o=t("./app/utils/discover/genericDiscoverQuery.tsx"),i=t("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function n(e,s){return e.transactionName!==s.transactionName||e.transactionThreshold!==s.transactionThreshold||e.transactionThresholdMetric!==s.transactionThresholdMetric}function r(e){return(0,i.tZ)(o.ZP,{route:"events",shouldRefetchData:n,afterFetch:(e,s)=>{const{fields:t,...o}=e.meta??{};return{...e,meta:{...t,...o}}},...e})}function a(e){return(0,o.JC)({route:"events",shouldRefetchData:n,afterFetch:(e,s)=>{const{fields:t,...o}=e.meta??{};return{...e,meta:{...t,...o}}},...e})}r.displayName="DiscoverQuery";const u=r},"./app/utils/useCleanQueryParamsOnRouteLeave.tsx":(e,s,t)=>{t.d(s,{Z:()=>a,j:()=>r});var o=t("../node_modules/react/index.js"),i=t("../node_modules/react-router/es/index.js"),n=t("./app/utils/useLocation.tsx");function r(e){let{fieldsToClean:s,newLocation:t,oldPathname:o}=e;const n=s.some((e=>void 0!==t.query[e]));if(t.pathname===o||!n)return;const r=s.reduce(((e,s)=>(e[s]=void 0,e)),{...t.query});i.browserHistory.replace({pathname:t.pathname,query:r})}const a=function(e){let{fieldsToClean:s}=e;const t=(0,n.T)(),a=(0,o.useCallback)((e=>{r({fieldsToClean:s,newLocation:e,oldPathname:t.pathname})}),[t.pathname,s]);(0,o.useEffect)((()=>i.browserHistory.listen(a)),[a])}},"./app/views/issueDetails/groupEvents.tsx":(e,s,t)=>{t.r(s),t.d(s,{GroupEvents:()=>S,default:()=>N});var o=t("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=t("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=(t("../node_modules/core-js/modules/es.array.push.js"),t("../node_modules/react/index.js")),r=t("../node_modules/react-router/es/index.js"),a=t("./app/components/events/searchBar.tsx"),u=t("./app/components/layouts/thirds.tsx"),l=t("./app/styles/space.tsx"),p=t("./app/utils/useCleanQueryParamsOnRouteLeave.tsx"),c=t("./app/utils/withApi.tsx"),d=t("./app/utils/withDomainRequired.tsx"),m=t("./app/utils/withOrganization.tsx"),h=t("./app/components/loadingError.tsx"),f=t("./app/data/platformCategories.tsx"),y=t("./app/locale.tsx"),v=t("./app/types/index.tsx"),g=t("./app/utils/discover/eventView.tsx"),E=t("./app/utils/discover/types.tsx"),x=t("./app/utils/issueTypeConfig/index.tsx"),T=t("./app/utils/platform.tsx"),b=t("./app/utils/queryClient.tsx"),R=t("./app/utils/useRoutes.tsx"),_=t("./app/views/performance/transactionSummary/transactionEvents/eventsTable.tsx"),q=t("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function C(e){const{location:s,organization:t,issueId:o,excludedTags:i,group:r}=e,a=(0,x.Y)(e.group),[u,l]=(0,n.useState)(""),p=(0,R.V)(),{fields:c,columnTitles:d}=w(r,t),m=(e=>{let{groupId:s}=e;return`/issues/${s}/events/latest/`})({groupId:r.id}),f=r.issueCategory===v.qE.PERFORMANCE,{data:y,isLoading:T,isLoadingError:C}=(0,b.WE)([m],{staleTime:6e4,enabled:f}),j=!!y?.occurrence,P=g.ZP.fromLocation(e.location);(a.usesIssuePlatform||r.issueCategory===v.qE.PERFORMANCE&&j)&&(P.dataset=E.as.ISSUE_PLATFORM),P.fields=c.map((e=>({field:e}))),P.sorts=(0,g.GT)(s).filter((e=>c.includes(e.field))),(0,n.useEffect)((()=>{l("")}),[P.query]),P.sorts.length||(P.sorts=[{field:"timestamp",kind:"desc"}]);const Z=r.issueCategory!==v.qE.PERFORMANCE||j?`issue.id:${o}`:`performance.issue_ids:${o} event.type:transaction`;return P.project=[parseInt(r.project.id,10)],P.query=`${Z} ${e.location.query.query||""}`,P.statsPeriod="90d",u||C?(0,q.tZ)(h.Z,{message:u||C,onRetry:()=>l("")}):(0,q.tZ)(_.Z,{eventView:P,location:s,issueId:o,organization:t,routes:p,excludedTags:i,projectSlug:r.project.slug,customColumns:["minidump"],setError:e=>l(e??""),transactionName:"",columnTitles:d.slice(),referrer:"api.issues.issue_events",isEventLoading:!!f&&T})}C.displayName="AllEventsTable";const w=(e,s)=>{const t=e.issueCategory===v.qE.PERFORMANCE,o=s.features.includes("session-replay"),i=t&&s.features.includes("profiling"),{fields:n,columnTitles:r}=j(e.project.platform??e.platform,{isProfilingEnabled:i,isReplayEnabled:o});return{fields:["id","transaction","title","release","environment","user.display","device","os",...n,...t?["transaction.duration"]:[],"timestamp"],columnTitles:[(0,y.t)("event id"),(0,y.t)("transaction"),(0,y.t)("title"),(0,y.t)("release"),(0,y.t)("environment"),(0,y.t)("user"),(0,y.t)("device"),(0,y.t)("os"),...r,...t?[(0,y.t)("total duration")]:[],(0,y.t)("timestamp"),(0,y.t)("minidump")]}},j=(e,s)=>{const t={fields:["url","runtime"],columnTitles:[(0,y.t)("url"),(0,y.t)("runtime")]},o={[f.Wn.BACKEND]:t,[f.Wn.SERVERLESS]:t,[f.Wn.FRONTEND]:{fields:["url","browser"],columnTitles:[(0,y.t)("url"),(0,y.t)("browser")]},[f.Wn.MOBILE]:{fields:["url"],columnTitles:[(0,y.t)("url")]},[f.Wn.DESKTOP]:{fields:[],columnTitles:[]},[f.Wn.OTHER]:{fields:[],columnTitles:[]}}[(0,T.fR)(e)];return s.isReplayEnabled&&(o.fields.push("replayId"),o.columnTitles.push((0,y.t)("replay"))),s.isProfilingEnabled&&e&&f.zw.includes(e)&&(o.columnTitles.push((0,y.t)("profile")),o.fields.push("profile.id")),o},P=C,Z=["environment","issue","issue.id","performance.issue_ids","transaction.op","transaction.status"];class S extends n.Component{constructor(e){super(e),(0,o.Z)(this,"_unsubscribeHandleRouteLeave",void 0),(0,o.Z)(this,"handleSearch",(e=>{const s={...this.props.location.query};s.query=e;const{organization:t}=this.props,{groupId:o}=this.props.params;r.browserHistory.push((0,d.D)({pathname:`/organizations/${t.slug}/issues/${o}/events/`,query:s}))}));const s=this.props.location.query;this.state={query:s.query||""}}UNSAFE_componentWillReceiveProps(e){if(this.props.location.search!==e.location.search){const s=e.location.query;this.setState({query:s.query})}}UNSAFE_componentDidMount(){this._unsubscribeHandleRouteLeave=r.browserHistory.listen((e=>(0,p.j)({fieldsToClean:["cursor"],newLocation:e,oldPathname:this.props.location.pathname})))}UNSAFE_componentWillUnmount(){this._unsubscribeHandleRouteLeave?.()}render(){return(0,q.tZ)(u.uT,{children:(0,q.BX)(u.or,{fullWidth:!0,children:[(0,q.tZ)(L,{children:(0,q.tZ)(a.Z,{organization:this.props.organization,defaultQuery:"",onSearch:this.handleSearch,excludedTags:Z,query:this.state.query,hasRecentSearches:!1})}),(0,q.tZ)(P,{issueId:this.props.group.id,location:this.props.location,organization:this.props.organization,group:this.props.group,excludedTags:Z})]})})}}S.displayName="GroupEvents";const L=(0,i.Z)("div",{target:"e3tm9v40"})("margin-bottom:",(0,l.D)(2),";"),N=(0,m.Z)((0,c.Z)(S))}}]);
//# sourceMappingURL=../sourcemaps/app_utils_discover_discoverQuery_tsx-app_views_issueDetails_groupEvents_tsx.fb76c0c26ed535a59591b5399ece82c6.js.map