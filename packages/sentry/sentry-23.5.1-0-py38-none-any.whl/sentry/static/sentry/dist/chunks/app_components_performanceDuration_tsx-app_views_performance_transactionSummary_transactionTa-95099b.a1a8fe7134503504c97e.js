(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_performanceDuration_tsx-app_views_performance_transactionSummary_transactionTa-95099b"],{"./app/components/performanceDuration.tsx":(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});var n=a("./app/components/duration.tsx"),r=a("./app/utils.tsx"),i=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function s(t){const e=function(t){return(0,r.ri)(t.nanoseconds)}(t)?t.nanoseconds/1e9:function(t){return(0,r.ri)(t.milliseconds)}(t)?t.milliseconds/1e3:t.seconds;return(0,i.tZ)(n.Z,{abbreviation:t.abbreviation,seconds:e,fixedDigits:2})}s.displayName="PerformanceDuration";const o=s},"./app/views/performance/transactionSummary/transactionTags/utils.tsx":(t,e,a)=>{"use strict";a.d(e,{Zn:()=>i,bZ:()=>s,oT:()=>l,oc:()=>d,vG:()=>o});var n=a("./app/utils/analytics.tsx"),r=a("./app/utils/queryString.tsx");function i(t){return(0,r.ro)(t.query.tagKey)}function s(t){(0,n.Gi)("performance_views.tags.interaction",{organization:t})}function o(t){let{orgSlug:e,transaction:a,projectID:n,query:r}=t;const i=function(t){let{orgSlug:e}=t;return`/organizations/${e}/performance/summary/tags/`}({orgSlug:e});return{pathname:i,query:{transaction:a,project:n,environment:r.environment,statsPeriod:r.statsPeriod,start:r.start,end:r.end,query:r.query,tagKey:r.tagKey}}}function d(t){let e=(0,r.ro)(t.query?.tagSort)??"-frequency";return["sumdelta"].find((t=>e?.includes(t)))&&(e="-frequency"),e}function l(t){const e=Object.keys(t).find((t=>t.includes("histogram")));if(!e)return;const a=e.split("_");return{histogramField:e,bucketSize:parseInt(a[a.length-3],10),offset:parseInt(a[a.length-2],10),multiplier:parseInt(a[a.length-1],10)}}},"./app/views/starfish/utils/combineTableDataWithSparklineData.tsx":(t,e,a)=>{"use strict";a.d(e,{Z:()=>r}),a("../node_modules/core-js/modules/es.array.push.js");var n=a("./app/views/starfish/utils/zeroFillSeries.tsx");function r(t,e,a,r,i){const s={};return e.forEach((t=>{let{description:e,interval:a,count:n,p50:r,p95:i}=t;e in s?s[e].push({name:a,count:n,p50:r,p95:i}):s[e]=[{name:a,count:n,p50:r,p95:i}]})),t.map((t=>{const e=t.description,o={seriesName:"throughput",data:s[e]?.map((t=>{let{name:e,count:a}=t;return{name:e,value:a}}))},d={seriesName:"p50 Trend",data:s[e]?.map((t=>{let{name:e,p50:a}=t;return{name:e,value:a}}))},l={seriesName:"p95 Trend",data:s[e]?.map((t=>{let{name:e,p95:a}=t;return{name:e,value:a}}))},c=(0,n.b)(o,a,r,i),u=(0,n.b)(d,a,r,i),p=(0,n.b)(l,a,r,i);return{...t,throughput:c,p50_trend:u,p95_trend:p}}))}},"./app/views/starfish/views/webServiceView/endpointOverview/index.tsx":(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>H});var n=a("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=(a("../node_modules/core-js/modules/es.array.push.js"),a("../node_modules/react/index.js")),i=a("../node_modules/react-router/es/index.js"),s=a("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),o=a("../node_modules/moment/moment.js"),d=a.n(o),l=a("../node_modules/query-string/index.js"),c=a("./app/components/charts/eventsRequest.tsx"),u=a("./app/components/datePageFilter.tsx"),p=a("./app/components/gridEditable/index.tsx"),m=a("./app/components/layouts/thirds.tsx"),h=a("./app/components/organizations/pageFilterBar.tsx"),g=a("./app/components/performance/layouts/index.tsx"),y=a("./app/constants/chartPalette.tsx"),f=a("./app/locale.tsx"),v=a("./app/styles/space.tsx"),w=a("./app/utils/discover/eventView.tsx"),x=a("./app/utils/queryClient.tsx"),Z=a("./app/utils/tokenizeSearch.tsx"),b=a("./app/utils/useLocation.tsx"),k=a("./app/utils/useOrganization.tsx"),_=a("./app/utils/usePageFilters.tsx"),S=a("./app/utils/withApi.tsx"),j=a("./app/views/starfish/components/chart.tsx"),P=a("./app/views/starfish/components/chartPanel.tsx"),T=a("./app/components/links/link.tsx"),q=a("./app/utils/discover/genericDiscoverQuery.tsx"),D=a("./app/views/performance/transactionSummary/transactionOverview/tagExplorer.tsx"),C=a("./app/views/starfish/components/sparkline.tsx"),$=a("./app/views/starfish/modules/APIModule/endpointTable.tsx"),E=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const z=[{key:"tagKey",name:"Key",width:300},{key:"tagValue",name:"Value",width:200},{key:"p50",name:"p50(duration)",width:200},{key:"throughput",name:"tpm",width:200},{key:"tpmCorrelation",name:"tpm correlation",width:200}];function B(t,e){return{seriesName:t,data:e.map((t=>({name:t[0],value:t[1][0].count})))}}function L(t){let{eventView:e}=t;const a=(0,b.T)(),n=(0,k.Z)(),i=e.clone();i.fields=D.KZ;const s=i.withSorts([{field:"sumdelta",kind:"desc"}]),{isLoading:o,data:d}=(0,q.JC)({route:"events-facets-stats",eventView:e,location:a,orgSlug:n.slug,getRequestPayload:()=>({...s.getEventsAPIPayload(a),aggregateColumn:"transaction.duration"})});if(o)return null;const c=[],u=d?.totals,m=Object.keys(u);let h=!1;for(let t=0;t<m.length;t++){const e=m[t],a=(g=u[e].sum_correlation)>=.8?"very highly correlated":g>=.6?"highly correlated":g>=.4?"correlated":O;a!==O&&(h=!0,c.push({tagKey:e.split(",")[0],tagValue:e.split(",")[1],throughput:B("throughput",d[e]["count()"].data),p50:B("p50",d[e]["p75(transaction.duration)"].data),tpmCorrelation:a}))}var g;return!1===h?null:(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(V,{children:(0,f.t)("Correlations")}),(0,E.tZ)(p.ZP,{isLoading:o,data:c,columnOrder:z,columnSortBy:[],location:a,grid:{renderBodyCell:(t,a)=>function(t,a){if("throughput"===t.key||"p50"===t.key)return(0,E.tZ)(C.ZP,{color:"throughput"===t.key?y.$[3][0]:y.$[3][1],series:a[t.key],width:t.width?t.width-t.width/5:void 0});if("tagValue"===t.key){const n=new Z.MY(e.query);let r="";return n.tokens.forEach((t=>{t.key&&(r=r.concat(" ",`${t.key}:${t.value}`))})),r=r.concat(" ",`${a.tagKey}:${a.tagValue}`),(0,E.tZ)($._F,{children:(0,E.tZ)(T.Z,{to:`/discover/homepage/?${l.stringify({...e.generateQueryStringObject(),query:r,field:["title","p50(transaction.duration)","p75(transaction.duration)","p95(transaction.duration)"],yAxis:"count()"})}`,children:a[t.key]})})}return(0,E.tZ)($.xe,{children:a[t.key]})}(t,a)}})]})}L.displayName="FacetInsights";const O="no/low correlation";const V=(0,n.Z)("h3",{target:"e1oaag7v0"})("color:",(t=>t.theme.gray300),";font-size:",(t=>t.theme.fontSizeLarge),";margin:0;margin-bottom:",(0,v.D)(1),";");var A=a("./app/components/duration.tsx");const F=[{key:"id",name:"Event ID",width:300},{key:"transaction.duration",name:"Duration",width:-1}];function I(t){let{eventView:e}=t;const a=(0,b.T)(),n=(0,k.Z)(),r=e.clone().withColumns([{field:"transaction.duration",kind:"field"}]).withSorts([{field:"transaction.duration",kind:"desc"}]),{isLoading:i,data:s}=(0,q.JC)({route:"events",eventView:r,referrer:"starfish-transaction-summary-sample-events",limit:5,location:a,orgSlug:n.slug,getRequestPayload:()=>({...r.getEventsAPIPayload(a)})});return(0,E.tZ)(p.ZP,{isLoading:i,data:s?.data,columnOrder:F,columnSortBy:[],location:a,grid:{renderBodyCell:function(t,e){return"id"===t.key?(0,E.tZ)(T.Z,{to:`/performance/${e["project.name"]}:${e.id}`,children:e.id.slice(0,8)}):"transaction.duration"===t.key?(0,E.tZ)(A.Z,{seconds:e["transaction.duration"]/1e3,fixedDigits:2,abbreviation:!0}):(0,E.tZ)($.xe,{children:e[t.key]})}}})}I.displayName="SampleEvents";var R=a("./app/views/starfish/modules/databaseModule/databaseTableView.tsx"),N=a("./app/views/starfish/modules/databaseModule/queries.ts"),X=a("./app/views/starfish/utils/combineTableDataWithSparklineData.tsx"),K=a("./app/views/starfish/utils/constants.tsx"),M=a("./app/views/starfish/utils/dates.tsx"),U=a("./app/views/starfish/views/webServiceView/spanGroupBreakdownContainer.tsx");const W=(0,S.Z)(c.Z),G=[{key:"description",name:"URL",width:400},{key:"throughput",name:"Throughput",width:350},{key:"p50_trend",name:"p50 Trend",width:200},{key:"p50(exclusive_time)",name:"p50",width:p.z7},{key:"transaction_count",name:"Transactions",width:p.z7},{key:"total_exclusive_time",name:"Total Time",width:p.z7}];function H(){const t=(0,b.T)(),e=(0,k.Z)(),a=(0,s.u)(),{endpoint:n,method:o,statsPeriod:c}=t.query,p=(0,_.Z)(),{isLoading:g,data:v,isRefetching:S}=(0,N.$R)({transaction:n??"",limit:8}),{data:T}=(0,x.aM)({queryKey:["dbAggregates",n,p.selection.datetime],queryFn:()=>fetch(`${K.M}/?query=${(0,N.uU)({datetime:p.selection.datetime,transaction:n})}`).then((t=>t.json())),retry:!1,initialData:[]}),q={};T.forEach((t=>{let{description:e,interval:a,count:n,p75:r}=t;e in q?q[e].push({name:a,count:n,p75:r}):q[e]=[{name:a,count:n,p75:r}]}));const{start_timestamp:D,end_timestamp:C}=(0,M.SW)(p.selection.datetime),z=(0,X.Z)(v,T,d().duration(12,"hours"),d()(D),d()(C)),B=new Z.MY(["has:http.method","transaction.op:http.server",`transaction:${n}`,`http.method:${o}`]),O={id:void 0,name:(0,f.t)("Endpoint Overview"),query:B.formatString(),projects:[1],fields:[],version:2},V=w.ZP.fromNewQueryWithLocation(O,t);return(0,E.BX)(m.T3,{children:[(0,E.tZ)(m.h4,{children:(0,E.tZ)(m.oB,{children:(0,E.tZ)(m.Dx,{children:(0,f.t)("Endpoint Overview")})})}),(0,E.BX)(m.uT,{children:[(0,E.tZ)(J,{children:(0,E.tZ)(h.Z,{condensed:!0,children:(0,E.tZ)(u.Z,{alignDropdown:"left"})})}),(0,E.BX)(m.or,{fullWidth:!0,children:[(0,E.tZ)(Q,{children:(0,f.t)("Endpoint URL")}),(0,E.tZ)("pre",{children:`${o} ${n}`}),(0,E.tZ)(Y,{minSize:200,children:(0,E.BX)(tt,{children:[(0,E.tZ)(et,{children:(0,E.tZ)(U._,{transaction:n})}),(0,E.BX)(at,{children:[(0,E.tZ)(P.Z,{title:(0,f.t)("Error Rate"),children:(0,E.tZ)(W,{query:B.formatString(),includePrevious:!1,partial:!0,interval:"1h",includeTransformedData:!0,limit:1,environment:V.environment,project:V.project,period:V.statsPeriod,referrer:"starfish-homepage-failure-rate",start:V.start,end:V.end,organization:e,yAxis:"equation|count_if(http.status_code,greaterOrEquals,500)/(count_if(http.status_code,equals,200)+count_if(http.status_code,greaterOrEquals,500))",children:t=>{const e=t.timeseriesData?.map((t=>({data:t.data,seriesName:(0,f.t)("Error Rate"),color:y.$[5][3],silent:!0})));return e?(0,E.tZ)(r.Fragment,{children:(0,E.tZ)(j.Z,{statsPeriod:V.statsPeriod,height:80,data:e,start:V.start,end:V.end,loading:t.loading,utc:!1,grid:{left:"0",right:"0",top:"8px",bottom:"0"},definedAxisTicks:2,isLineChart:!0,chartColors:a.charts.getColorPalette(2),disableXAxis:!0,aggregateOutputFormat:"percentage"})}):null}})}),(0,E.tZ)(W,{query:B.formatString(),includePrevious:!1,partial:!0,limit:5,interval:"1h",includeTransformedData:!0,environment:V.environment,project:V.project,period:p.selection.datetime.period,referrer:"starfish-endpoint-overview",start:p.selection.datetime.start,end:p.selection.datetime.end,organization:e,yAxis:["tpm()","p50(transaction.duration)"],queryExtras:{dataset:"metrics"},children:t=>{let{results:e,loading:n}=t;return(0,E.BX)(r.Fragment,{children:[(0,E.tZ)(P.Z,{title:(0,f.t)("p50(duration)"),children:(0,E.tZ)(j.Z,{statsPeriod:c??"24h",height:80,data:e?.[1]?[e?.[1]]:[],start:"",end:"",loading:n,utc:!1,stacked:!0,isLineChart:!0,disableXAxis:!0,definedAxisTicks:2,chartColors:[a.charts.getColorPalette(0)[1]],grid:{left:"0",right:"0",top:"8px",bottom:"16px"}})}),(0,E.tZ)(P.Z,{title:(0,f.t)("Througput"),children:(0,E.tZ)(j.Z,{statsPeriod:c??"24h",height:80,data:e?.[0]?[e?.[0]]:[],start:"",end:"",loading:n,utc:!1,stacked:!0,isLineChart:!0,disableXAxis:!0,definedAxisTicks:2,chartColors:[a.charts.getColorPalette(0)[0]],grid:{left:"0",right:"0",top:"8px",bottom:"16px"}})})]})}})]})]})}),(0,E.tZ)(Q,{children:(0,f.t)("Sample Events")}),(0,E.tZ)(I,{eventView:V}),(0,E.tZ)(L,{eventView:V}),(0,E.tZ)(Q,{children:(0,f.t)("HTTP Spans")}),(0,E.tZ)($.ZP,{location:t,onSelect:t=>{i.browserHistory.push(`/starfish/span/${encodeURIComponent(t.group_id)}/?${l.stringify({transaction:n})}`)},columns:G,filterOptions:{action:"",domain:"",transaction:n??"",datetime:p.selection.datetime}}),(0,E.tZ)(Q,{children:(0,f.t)("Database Spans")}),(0,E.tZ)(R.Z,{location:t,data:z,isDataLoading:g||S,onSelect:t=>{i.browserHistory.push(`/starfish/span/${encodeURIComponent(t.group_id)}/?${l.stringify({transaction:n})}`)}})]})]})]})}H.displayName="EndpointOverview";const Q=(0,n.Z)("h3",{target:"e1mmy0la5"})("color:",(t=>t.theme.gray300),";font-size:",(t=>t.theme.fontSizeLarge),";margin:0;margin-bottom:",(0,v.D)(1),";"),J=(0,n.Z)("div",{target:"e1mmy0la4"})("display:grid;grid-template-rows:auto auto auto;gap:",(0,v.D)(2),";margin-bottom:",(0,v.D)(2),";@media (min-width: ",(t=>t.theme.breakpoints.small),"){grid-template-rows:auto;grid-template-columns:auto 1fr auto;}"),Y=(0,n.Z)(g.c,{target:"e1mmy0la3"})("margin-bottom:",(0,v.D)(2),";"),tt=(0,n.Z)("div",{target:"e1mmy0la2"})("display:flex;flex-direction:row;flex-wrap:wrap;gap:",(0,v.D)(2),";"),et=(0,n.Z)("div",{target:"e1mmy0la1"})({name:"1xy7mri",styles:"flex:1.5"}),at=(0,n.Z)("div",{target:"e1mmy0la0"})({name:"82a6rk",styles:"flex:1"})},"../node_modules/lodash/negate.js":t=>{t.exports=function(t){if("function"!=typeof t)throw new TypeError("Expected a function");return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}},"../node_modules/lodash/omitBy.js":(t,e,a)=>{var n=a("../node_modules/lodash/_baseIteratee.js"),r=a("../node_modules/lodash/negate.js"),i=a("../node_modules/lodash/pickBy.js");t.exports=function(t,e){return i(t,r(n(e)))}}}]);
//# sourceMappingURL=../sourcemaps/app_components_performanceDuration_tsx-app_views_performance_transactionSummary_transactionTa-95099b.7ad41f2f3f041919eec9b4e309a0c61e.js.map