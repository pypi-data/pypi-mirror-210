"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_profiling_profileGroupProvider_tsx"],{"./app/utils/profiling/callTreeNode.tsx":(e,t,i)=>{i.d(t,{n:()=>n});var r=i("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=i("./app/utils/profiling/frame.tsx");class n{constructor(e,t){(0,r.Z)(this,"frame",void 0),(0,r.Z)(this,"locked",!1),(0,r.Z)(this,"count",0),(0,r.Z)(this,"isRoot",void 0),(0,r.Z)(this,"parent",null),(0,r.Z)(this,"recursive",null),(0,r.Z)(this,"children",[]),(0,r.Z)(this,"totalWeight",0),(0,r.Z)(this,"selfWeight",0),this.parent=t,this.frame=e,this.isRoot=s.R.Root.name===this.frame.name}isDirectRecursive(){return!!this.parent&&this.parent.frame===this.frame}isLocked(){return this.locked}lock(){this.locked=!0}}(0,r.Z)(n,"Root",new n(s.R.Root,null))},"./app/utils/profiling/frame.tsx":(e,t,i)=>{i.d(t,{R:()=>a});var r=i("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=i("./app/locale.tsx");const n="sentry root";class a{constructor(e,t){if((0,r.Z)(this,"key",void 0),(0,r.Z)(this,"name",void 0),(0,r.Z)(this,"file",void 0),(0,r.Z)(this,"line",void 0),(0,r.Z)(this,"column",void 0),(0,r.Z)(this,"is_application",void 0),(0,r.Z)(this,"path",void 0),(0,r.Z)(this,"package",void 0),(0,r.Z)(this,"module",void 0),(0,r.Z)(this,"resource",void 0),(0,r.Z)(this,"threadId",void 0),(0,r.Z)(this,"inline",void 0),(0,r.Z)(this,"instructionAddr",void 0),(0,r.Z)(this,"symbol",void 0),(0,r.Z)(this,"symbolAddr",void 0),(0,r.Z)(this,"symbolicatorStatus",void 0),(0,r.Z)(this,"isRoot",void 0),(0,r.Z)(this,"totalWeight",0),(0,r.Z)(this,"selfWeight",0),this.key=e.key,this.file=e.file,this.name=e.name,this.resource=e.resource,this.line=e.line,this.column=e.column,this.is_application=!!e.is_application,this.package=e.package,this.module=e.module??e.image,this.threadId=e.threadId,this.path=e.path,this.instructionAddr=e.instructionAddr,this.symbol=e.symbol,this.symbolAddr=e.symbolAddr,this.symbolicatorStatus=e.symbolicatorStatus,this.isRoot=this.key===n,e.columnNumber&&void 0===this.column&&(this.column=e.columnNumber),e.lineNumber&&void 0===this.column&&(this.line=e.lineNumber),e.scriptName&&void 0===this.column&&(this.resource=e.scriptName),"web"===t||"node"===t){"(garbage collector)"!==this.name&&"(root)"!==this.name||(this.is_application=!1),this.name&&!this.name.startsWith("unknown ")||(this.name=(0,s.t)("<anonymous>")),void 0===this.line&&void 0===this.column&&(this.name+=` ${(0,s.t)("[native code]")}`,this.is_application=!1);const e=this.path||this.file;if(e){if(e.startsWith("node:internal")&&(this.is_application=!1),void 0===this.module&&e){const t=/node_modules(\/|\\)(?<maybeScopeOrPackage>.*?)(\/|\\)((?<maybePackage>.*)((\/|\\)))?/.exec(e);if(t?.groups){const{maybeScopeOrPackage:e,maybePackage:i}=t.groups;e.startsWith("@")?this.module=`${e}/${i}`:this.module=t.groups.maybeScopeOrPackage,this.is_application=!1}}if("node:"===e?.substring(0,5)){let t="";const i=e.length;for(let r=0;r<i;r++){if("/"===e.charAt(r)){for(t+="/",r++;r<i&&"/"!==e.charAt(r);)t+=e.charAt(r),r++;break}t+=e.charAt(r)}t&&(this.module=t)}}}this.name||(this.name=(0,s.t)("<unknown>"))}}(0,r.Z)(a,"Root",new a({key:n,name:n,is_application:!1},"mobile"))},"./app/utils/profiling/guards/profile.tsx":(e,t,i)=>{function r(e){return"object"==typeof e&&"profiles"in e&&Array.isArray(e.profiles)&&"shared"in e}function s(e){return"type"in e&&"evented"===e.type}function n(e){return"type"in e&&"sampled"===e.type}function a(e){return!("type"in e)&&Array.isArray(e.resources)}function o(e){return"profile"in e&&"samples"in e.profile&&"stacks"in e.profile&&"frames"in e.profile}i.d(t,{AN:()=>o,BE:()=>a,Us:()=>n,bf:()=>s,nN:()=>r})},"./app/utils/profiling/profile/importProfile.tsx":(e,t,i)=>{i.d(t,{B_:()=>I,F$:()=>S}),i("../node_modules/core-js/modules/es.error.cause.js"),i("../node_modules/core-js/modules/es.array.push.js");var r=i("../node_modules/@sentry/core/esm/exports.js"),s=i("./app/utils/profiling/guards/profile.tsx"),n=i("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=(i("../node_modules/core-js/modules/es.array.at.js"),i("../node_modules/core-js/modules/es.string.at-alternative.js"),i("./app/utils.tsx")),o=i("./app/utils/profiling/callTreeNode.tsx"),l=i("./app/utils/profiling/units/units.ts"),h=i("./app/utils/profiling/profile/profile.tsx");class d extends h.N{constructor(){super(...arguments),(0,n.Z)(this,"calltree",[this.callTree]),(0,n.Z)(this,"stack",[]),(0,n.Z)(this,"lastValue",0),(0,n.Z)(this,"samplingIntervalApproximation",0)}static FromProfile(e,t,i){const r=new d({duration:e.endValue-e.startValue,startedAt:e.startValue,endedAt:e.endValue,name:e.name,unit:e.unit,threadId:e.threadID,type:i.type});r.lastValue=Math.max(0,e.startValue),r.samplingIntervalApproximation=(0,l.CD)(10,"milliseconds",e.unit);for(const i of e.events){const e=t[i.frame];if(!e)throw new Error(`Cannot retrieve event: ${i.frame} from frame index`);switch(i.type){case"O":r.enterFrame(e,i.at);break;case"C":r.leaveFrame(e,i.at);break;default:throw new TypeError(`Unknown event type ${i.type}`)}}const s=r.build();if("flamegraph"===i.type){const e=new Set,t=[],i=[];for(let r=0;r<s.samples.length;r++){const n=s.samples[r];e.has(n)||(e.add(n),t.push(n),i.push(n.totalWeight))}s.samples=t,s.weights=i}return s}addWeightToFrames(e){const t=e-this.lastValue;for(const e of this.stack)e.totalWeight+=t;const i=(0,a.SI)(this.stack);i&&(i.selfWeight+=e)}addWeightsToNodes(e){const t=e-this.lastValue;for(const e of this.calltree)e.totalWeight+=t;const i=(0,a.SI)(this.calltree);i&&(i.selfWeight+=t)}enterFrame(e,t){this.addWeightToFrames(t),this.addWeightsToNodes(t);const i=(0,a.SI)(this.calltree);if(i){const r=t-this.lastValue;if(r<0)throw new Error("Sample delta cannot be negative, samples may be corrupt or out of order");let s;if(r>0&&(this.samples.push(i),this.weights.push(r)),"flamegraph"===this.type){const t=i.children.find((t=>t.frame===e));t?s=t:(s=new o.n(e,i),i.children.push(s))}else{const t=(0,a.SI)(i.children);t&&!t.isLocked()&&t.frame===e?s=t:(s=new o.n(e,i),i.children.push(s))}let n=this.calltree.length-1;for(;n>=0;){if(this.calltree[n].frame===s.frame){this.calltree[n].recursive=s,s.recursive=this.calltree[n];break}n--}this.calltree.push(s)}this.stack.push(e),this.lastValue=t}leaveFrame(e,t){this.addWeightToFrames(t),this.addWeightsToNodes(t),this.trackSampleStats(t);const i=this.calltree.pop();if(void 0===i)throw new Error("Unbalanced stack");i.lock();const r=t-this.lastValue;i.count+=Math.ceil(i.totalWeight/this.samplingIntervalApproximation),r>0&&(this.samples.push(i),this.weights.push(r),this.minFrameDuration=Math.min(r,this.minFrameDuration)),this.stack.pop(),this.lastValue=t}build(){if(this.calltree.length>1)throw new Error("Unbalanced append order stack");return this.duration=Math.max(this.duration,this.weights.reduce(((e,t)=>e+t),0)),this.minFrameDuration!==Number.POSITIVE_INFINITY&&0!==this.minFrameDuration||(this.minFrameDuration=this.duration),this}}var c=i("./app/utils/profiling/frame.tsx"),p=i("./app/locale.tsx");function u(e){switch(e){case"gc":return(0,p.t)("Garbage Collection");case"style":return(0,p.t)("Style");case"layout":return(0,p.t)("Layout");case"paint":return(0,p.t)("Paint");case"script":return(0,p.t)("Script");case"other":return(0,p.t)("Other");default:return e}}function m(e){return{name:u(e),resourceId:void 0,line:void 0,column:void 0}}function f(e,t,i,r){const s=[];if(r&&"script"!==r&&s.unshift(new c.R({...m(r),key:r})),void 0===t)return s;let n=e.stacks[t];if(!n)throw new Error(`Missing stackId ${t} in trace, cannot resolve stack`);for(;void 0!==n;){if(void 0===e.frames[n.frameId])return s;s.unshift(i[n.frameId]),n=void 0!==n.parentId?e.stacks[n.parentId]:void 0}return s}i("../node_modules/core-js/modules/es.array.unshift.js");class g extends h.N{static FromProfile(e,t,i){const r=["gc","layout","other","paint","script","style"];for(const e of r)t[e]=new c.R({key:e,name:u(e),line:void 0,column:void 0,is_application:!1},"web");const s=e.samples[0].timestamp,n=(0,a.SI)(e.samples).timestamp,o=new g({duration:n-s,startedAt:s,endedAt:n,name:"JSSelfProfiling",unit:"milliseconds",threadId:0,type:i.type}),l="flamegraph"===i.type?function(e){return[...e].sort(((e,t)=>e.stackId-t.stackId))}(e.samples):e.samples;"flamechart"===i.type&&o.appendSample(f(e,e.samples[0].stackId,t,e.samples[0].marker),0);for(let r=1;r<l.length;r++)"gc"===l[r].marker&&"flamechart"===i.type?o.appendSample(f(e,l[r-1].stackId,t,l[r].marker),l[r].timestamp-l[r-1].timestamp):o.appendSample(f(e,l[r].stackId,t,l[r].marker),l[r].timestamp-l[r-1].timestamp);return o.build()}appendSample(e,t){this.trackSampleStats(t);let i=this.callTree;const r=[];for(const s of e){const e=(0,a.SI)(i.children);if(e&&!e.isLocked()&&e.frame===s)i=e;else{const e=i;i=new o.n(s,i),e.children.push(i)}i.totalWeight+=t;let n=r.length-1;for(;n>=0;){if(r[n].frame===i.frame){r[n].recursive=i,i.recursive=r[n];break}n--}r.push(i)}i.selfWeight+=t,t>0&&(this.minFrameDuration=Math.min(t,this.minFrameDuration));for(const e of i.children)e.lock();i.frame.selfWeight+=t;for(const e of r)e.frame.totalWeight+=t,e.count++;i===(0,a.SI)(this.samples)?this.weights[this.weights.length-1]+=t:(this.samples.push(i),this.weights.push(t))}build(){return this.duration=Math.max(this.duration,this.weights.reduce(((e,t)=>e+t),0)),this.minFrameDuration!==Number.POSITIVE_INFINITY&&0!==this.minFrameDuration||(this.minFrameDuration=this.duration),this}}var v=i("./app/utils/profiling/profile/sampledProfile.tsx");class y extends h.N{static FromProfile(e,t,i){const r=e.profile.samples.map(((t,i)=>{const r=e.profile.samples[i+1]??t;return{...t,weight:r.elapsed_since_start_ns-t.elapsed_since_start_ns}})),{stacks:s}=e.profile,n="flamegraph"===i.type?function(e){return[...e].sort(((e,t)=>e.stack_id-t.stack_id))}(r):r,a=n[0].elapsed_since_start_ns,o=n[n.length-1].elapsed_since_start_ns;if(Number.isNaN(a)||Number.isNaN(o))throw TypeError("startedAt or endedAt is NaN");const{threadId:l,threadName:h}=function(e){const{samples:t,queue_metadata:i={},thread_metadata:r={}}=e.profile,s=t[0],n=parseInt(s.thread_id,10),a=r?.[n]?.name;if(a)return{threadId:n,threadName:a};if("cocoa"===e.platform){if(n===e.transaction.active_thread_id)return{threadId:n,threadName:w};const t=s.queue_address&&i?.[s.queue_address]?.label;if(t&&t!==w)return{threadId:n,threadName:t}}return{threadId:n,threadName:""}}(e),d=new y({duration:o-a,startedAt:a,endedAt:o,unit:"nanoseconds",name:h,threadId:l,type:i.type});for(let e=0;e<n.length;e++){const i=n[e],r=s[i.stack_id];d.appendSampleWithWeight(r.map((e=>{if(!t[e])throw new Error(`Could not resolve frame ${e} in frame index`);return t[e]})),i.weight)}return d.build()}appendSampleWithWeight(e,t){if(this.trackSampleStats(t),0===t)return;let i=this.callTree;const r=[];for(let s=e.length-1;s>=0;s--){const n=e[s],l=(0,a.SI)(i.children);if(l&&!l.isLocked()&&l.frame===n)i=l;else{const e=i;i=new o.n(n,i),e.children.push(i)}i.totalWeight+=t;let h=r.length-1;for(;h>=0;){if(r[h].frame===i.frame){r[h].recursive=i,i.recursive=r[h];break}h--}r.push(i)}i.selfWeight+=t,this.minFrameDuration=Math.min(t,this.minFrameDuration);for(const e of i.children)e.lock();i.frame.selfWeight+=t;for(const e of r)e.frame.totalWeight+=t,e.count++;i===(0,a.SI)(this.samples)?this.weights[this.weights.length-1]+=t:(this.samples.push(i),this.weights.push(t))}build(){return this.duration=Math.max(this.duration,this.weights.reduce(((e,t)=>e+t),0)),this.minFrameDuration!==Number.POSITIVE_INFINITY&&0!==this.minFrameDuration||(this.minFrameDuration=this.duration),this}}const w="com.apple.main-thread";var k=i("./app/utils/profiling/profile/utils.tsx");function I(e,t,i){const n=r.Yr({op:"import",name:"profiles.import"});try{if((0,s.BE)(e))return n&&n.setTag("profile.type","js-self-profile"),function(e,t,i){return{traceID:t,name:t,transactionID:null,activeProfileIndex:0,profiles:[_(e,(0,k.vw)("web",e.frames),i)],measurements:{},metadata:{platform:"javascript"}}}(e,t,{transaction:n,type:i});if((0,s.AN)(e))return n&&n.setTag("profile.type","sentry-sampled"),function(e,t){const i=(0,k.h1)(e.profile.frames),r={};for(let t=0;t<e.profile.samples.length;t++){const i=e.profile.samples[t];r[i.thread_id]||(r[i.thread_id]=[]),r[i.thread_id].push(i)}for(const e in r)r[e].sort(((e,t)=>e.elapsed_since_start_ns-t.elapsed_since_start_ns));let s=0;const n=[];for(const a in r){const o={...e,profile:{...e.profile,samples:r[a]}};a===String(e.transaction.active_thread_id)&&(s=n.length),n.push((0,k.GB)(t.transaction,(()=>y.FromProfile(o,i,{type:t.type})),{op:"profile.import",description:"evented"}))}return{transactionID:e.transaction.id,traceID:e.transaction.trace_id,name:e.transaction.name,activeProfileIndex:s,measurements:e.measurements,metadata:{deviceLocale:e.device.locale,deviceManufacturer:e.device.manufacturer,deviceModel:e.device.model,deviceOSName:e.os.name,deviceOSVersion:e.os.version,environment:e.environment,platform:e.platform,profileID:e.event_id,projectID:e.project_id,release:e.release,received:e.received,transactionID:e.transaction.id,transactionName:e.transaction.name,traceID:e.transaction.trace_id},profiles:n,images:e.debug_meta?.images}}(e,{transaction:n,type:i});if((0,s.nN)(e))return n&&n.setTag("profile.type","schema"),function(e,t,i){const r=(0,k.vw)("node"===e.metadata.platform?"node":"mobile",e.shared.frames);return{traceID:t,transactionID:e.metadata.transactionID??null,name:e.metadata?.transactionName??t,activeProfileIndex:e.activeProfileIndex??0,metadata:e.metadata??{},measurements:e.measurements??{},profiles:e.profiles.map((t=>_(t,r,{...i,profileIds:e.shared.profile_ids})))}}(e,t,{transaction:n,type:i});throw new Error("Unsupported trace format")}catch(e){throw n&&n.setStatus("internal_error"),e}finally{n&&n.finish()}}function _(e,t,i){let{transaction:r,type:n,profileIds:a}=i;if((0,s.bf)(e))return r?(0,k.GB)(r,(()=>d.FromProfile(e,t,{type:n})),{op:"profile.import",description:"evented"}):d.FromProfile(e,t,{type:n});if((0,s.Us)(e))return r?(0,k.GB)(r,(()=>v.J.FromProfile(e,t,{type:n,profileIds:a})),{op:"profile.import",description:"sampled"}):v.J.FromProfile(e,t,{type:n,profileIds:a});if((0,s.BE)(e))return r?(0,k.GB)(r,(()=>g.FromProfile(e,(0,k.vw)("web",e.frames),{type:n})),{op:"profile.import",description:"js-self-profile"}):g.FromProfile(e,(0,k.vw)("web",e.frames),{type:n});throw new Error("Unrecognized trace format")}const b=e=>{try{return[JSON.parse(e),null]}catch(e){return[null,e]}},x=[e=>b(e),e=>b(e+"]")];async function S(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x;const i=await function(e){return new Promise(((t,i)=>{const r=new FileReader;r.addEventListener("load",(e=>{"string"!=typeof e.target?.result?i("Failed to read string contents of input file"):t(e.target.result)})),r.addEventListener("error",(()=>{i("Failed to read string contents of input file")})),r.readAsText(e)}))}(e);for(const e of t){const[t]=e(i);if(t){if("object"!=typeof t||null===t)throw new TypeError("Input JSON is not an object");return t}}throw new Error("Failed to parse input JSON")}},"./app/utils/profiling/profile/profile.tsx":(e,t,i)=>{i.d(t,{N:()=>a});var r=i("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=(i("../node_modules/core-js/modules/es.array.push.js"),i("./app/utils/profiling/callTreeNode.tsx")),n=i("./app/utils/profiling/frame.tsx");class a{constructor(e){let{duration:t,startedAt:i,endedAt:a,name:o,unit:l,threadId:h,type:d}=e;(0,r.Z)(this,"duration",void 0),(0,r.Z)(this,"startedAt",void 0),(0,r.Z)(this,"endedAt",void 0),(0,r.Z)(this,"threadId",void 0),(0,r.Z)(this,"type",void 0),(0,r.Z)(this,"unit","microseconds"),(0,r.Z)(this,"name","Unknown"),(0,r.Z)(this,"callTree",new s.n(n.R.Root,null)),(0,r.Z)(this,"framesInStack",new Set),(0,r.Z)(this,"minFrameDuration",Number.POSITIVE_INFINITY),(0,r.Z)(this,"samples",[]),(0,r.Z)(this,"weights",[]),(0,r.Z)(this,"rawWeights",[]),(0,r.Z)(this,"stats",{discardedSamplesCount:0,negativeSamplesCount:0}),(0,r.Z)(this,"callTreeNodeProfileIdMap",new Map),this.threadId=h,this.duration=t,this.startedAt=i,this.endedAt=a,this.name=o,this.unit=l,this.type=d??""}isEmpty(){return this===a.Empty}trackSampleStats(e){0===e&&this.stats.discardedSamplesCount++,e<0&&this.stats.negativeSamplesCount++,e>0&&this.rawWeights.push(e)}forEach(e,t,i){const r=[];let s=0,n=0;for(const a of this.samples){let o=a;for(;o&&!o.isRoot&&-1===r.indexOf(o);)o=o.parent;for(;r.length>0&&r[r.length-1]!==o;)t(r.pop(),s);const l=[];let h=a;for(;h&&!h.isRoot&&h!==o;)!i||i(h)?(l.push(h),h=h.parent):h=h.parent;for(let t=l.length-1;t>=0;t--)i&&!i(l[t])||(e(l[t],s),r.push(l[t]));s+=this.weights[n++]}for(let e=r.length-1;e>=0;e--)t(r[e],s)}build(){return this.duration=Math.max(this.duration,this.weights.reduce(((e,t)=>e+t),0)),this.minFrameDuration!==Number.POSITIVE_INFINITY&&0!==this.minFrameDuration||(this.minFrameDuration=this.duration),this}}(0,r.Z)(a,"Empty",new a({duration:1e3,startedAt:0,endedAt:1e3,name:"Empty Profile",unit:"milliseconds",threadId:0,type:""}).build())},"./app/utils/profiling/profile/sampledProfile.tsx":(e,t,i)=>{i.d(t,{J:()=>c});var r=i("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=(i("../node_modules/core-js/modules/es.error.cause.js"),i("../node_modules/core-js/modules/es.array.push.js"),i("./app/utils/profiling/callTreeNode.tsx")),n=i("./app/utils/profiling/frame.tsx"),a=i("./app/utils/profiling/profile/profile.tsx"),o=i("./app/utils/profiling/profile/utils.tsx");function l(e,t){const i=Math.max(e.stack.length,t.stack.length);for(let r=0;r<i;r++){if(void 0===e.stack[r])return-1;if(void 0===t.stack[r])return 1;if(e.stack[r]!==t.stack[r])return e.stack[r]-t.stack[r]}return 0}function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.samples.map(((i,r)=>({stack:i,weight:e.weights[r],profileIds:t[r]})))}function d(e){throw new Error(`Could not resolve frame ${e} in frame index`)}class c extends a.N{static FromProfile(e,t,i){const r=new c({duration:e.endValue-e.startValue,startedAt:e.startValue,endedAt:e.endValue,name:e.name,unit:e.unit,threadId:e.threadID,type:i.type});if(e.samples.length!==e.weights.length)throw new Error(`Expected samples.length (${e.samples.length}) to equal weights.length (${e.weights.length})`);let s=[];"flamegraph"===i.type&&e.samples_profiles&&i.profileIds&&(s=(0,o.qx)(e.samples_profiles,i.profileIds));const n="flamegraph"===i.type?function(e){return h(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).sort(l)}(e,s):h(e),a=new Array(256);for(let e=0;e<n.length;e++){const o=n[e].stack;let l=n[e].weight,h=n[e].stack.length,c=!0;if("flamechart"===i.type&&e>0&&o.length<=2&&"(garbage collector) [native code]"===t[o[o.length-1]]?.name)for(c=!1,a[n[e-1].stack.length]=t[o[o.length-1]],h=n[e-1].stack.length+1;n[e+1]&&n[e+1].stack.length<=2&&"(garbage collector) [native code]"===t[n[e+1].stack[n[e+1].stack.length-1]]?.name;)l+=n[++e].weight;if(c)for(let e=0;e<o.length;e++)a[e]=t[o[e]]??d(o[e]);r.appendSampleWithWeight(a,l,h,s[e])}return r.build()}appendSampleWithWeight(e,t,i,r){if(this.trackSampleStats(t),0===t)return;let n=this.callTree;const a=[];for(let o=0;o<i;o++){const i=e[o],l=n.children[n.children.length-1];if(l&&!l.isLocked()&&l.frame===i)n=l;else{const e=n;n=new s.n(i,n),e.children.push(n),r&&this.callTreeNodeProfileIdMap.set(n,r)}n.totalWeight+=t;let h=a.length-1;for(;h>=0;){if(a[h].frame===n.frame){a[h].recursive=n,n.recursive=a[h];break}h--}a[o]=n}n.selfWeight+=t,this.minFrameDuration=Math.min(t,this.minFrameDuration);for(const e of n.children)e.lock();n.frame.selfWeight+=t;for(const e of a)e.frame.totalWeight+=t,e.count++;n===this.samples[this.samples.length-1]?this.weights[this.weights.length-1]+=t:(this.samples.push(n),this.weights.push(t))}build(){return this.duration=Math.max(this.duration,this.weights.reduce(((e,t)=>e+t),0)),this.minFrameDuration!==Number.POSITIVE_INFINITY&&0!==this.minFrameDuration||(this.minFrameDuration=this.duration),this}}(0,r.Z)(c,"Example",c.FromProfile({startValue:0,endValue:1e3,name:"Example sampled profile",threadID:0,unit:"millisecond",weights:[200,200,200,200,200],samples:[[0,1,2],[0,1,2,3,4,5],[0,1,2,3],[0,1,2,3,4],[0,1]],type:"sampled"},{0:new n.R({key:0,name:"f0",is_application:!0}),1:new n.R({key:1,name:"f1",is_application:!0}),2:new n.R({key:2,name:"f2"}),3:new n.R({key:3,name:"f3"}),4:new n.R({key:4,name:"f4",is_application:!0}),5:new n.R({key:5,name:"f5"})},{type:"flamechart"}))},"./app/utils/profiling/profile/utils.tsx":(e,t,i)=>{i.d(t,{GB:()=>l,h1:()=>n,ql:()=>d,qx:()=>c,vw:()=>a,w_:()=>o}),i("../node_modules/core-js/modules/es.array.push.js");var r=i("./app/utils.tsx"),s=i("./app/utils/profiling/frame.tsx");function n(e){const t=[],i={},n=[];for(let a=0;a<e.length;a++){const o=e[a],l=`${o.filename??""}:${o.function??"unknown"}:${String(o.lineno)??""}:${o.instruction_addr??""}`;let h=i[l];(0,r.ri)(h)||(h=t.length,i[l]=h,t.push(new s.R({key:a,is_application:o.in_app,file:o.filename,path:o.abs_path,module:o.module,package:o.package,name:o.function??"unknown",line:o.lineno,column:o.colno,instructionAddr:o.instruction_addr,symbol:o.symbol,symbolAddr:o.sym_addr,symbolicatorStatus:o.status}))),n.push(h)}const a={};for(let e=0;e<n.length;e++)a[e]=t[n[e]];return a}function a(e,t,i){return i?t.reduce(((e,t,r)=>(e[r]=new s.R({key:r,resource:void 0!==t.resourceId?i.resources[t.resourceId]:void 0,...t},"web"),e)),{}):t.reduce(((t,i,r)=>(t[r]=new s.R({key:r,...i},e),t)),{})}function o(e){let t=null;return function(i){return t?(t.args===i&&void 0!==t.args&&void 0!==i||(t.args=i,t.value=e(i)),t.value):(t={args:i,value:e(i)},t.value)}}function l(e,t,i){if(!(0,r.ri)(e))return t();const s=e.startChild(i);try{return t()}catch(e){throw s.setStatus("internal_error"),e}finally{s.finish()}}function h(e,t){const i=[];for(const r of e){const e={...r,parent:null,children:[]},s=t[r.key];if(s){for(const i of s)e.children.push(...h([i],t));i.push(e)}}return i}const d=e=>{const t={},i=[];return function(e,t,i){function r(e,s){if(t[e.key]||(t[e.key]=[]),t[e.key].push(s),e.children.length)for(let t=0;t<e.children.length;t++)r(e.children[t],e);else i.push(e)}for(let s=0;s<e.length;s++){e[s].children?.length||i.push(e[s]),t[e[s].key]||(t[e[s].key]=[]);for(let t=0;t<e[s].children.length;t++)r(e[s].children[t],e[s])}}(e,t,i),h(i,t)};function c(e,t){return e.map((e=>e.map((e=>t[e]))))}},"./app/utils/profiling/units/units.ts":(e,t,i)=>{i.d(t,{CD:()=>n,ab:()=>h,fr:()=>s,s4:()=>o}),i("../node_modules/core-js/modules/es.error.cause.js");const r={nanosecond:1e-9,nanoseconds:1e-9,microsecond:1e-6,microseconds:1e-6,millisecond:.001,milliseconds:.001,second:1,seconds:1,count:1};function s(e,t){if(void 0===r[e])throw new Error(`Cannot format unit ${e}, duration mapping is not defined`);if(void 0===r[t])throw new Error(`Cannot format unit ${e}, duration mapping is not defined`);return e===t?e=>e:function(i){return n(i,e,t)}}function n(e,t,i){const s=Math.log10(r[t]),n=Math.log10(r[i]);return e*Math.pow(10,s-n)}const a=(e,t,i)=>0===e?"0"+t:e.toFixed(i)+t;function o(e){const t=r[e];if(void 0===t)throw new Error(`Cannot format unit ${e}, duration mapping is not defined`);return"count"===e?e=>e.toFixed(0):e=>{const i=e*t;return i>=1?a(i,"s",2):i/.001>=1?a(i/.001,"ms",2):i/1e-6>=1?a(i/1e-6,"μs",2):a(i/1e-9,"ns",2)}}function l(e,t){return Math.floor(e).toString().padStart(t,"0")}function h(e){const t=r[e];if(void 0===t)throw new Error(`Cannot format unit ${e}, duration mapping is not defined`);return e=>{const i=Math.abs(e*t),r=1e3*i;return`${e<0?"-":""}${l(i/60,2)}:${l(i%60,2)}.${l(r%1e3,3)}`}}},"./app/views/profiling/profileGroupProvider.tsx":(e,t,i)=>{i.d(t,{A:()=>o,D:()=>h}),i("../node_modules/core-js/modules/es.error.cause.js");var r=i("../node_modules/react/index.js"),s=i("./app/utils/profiling/profile/importProfile.tsx"),n=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const a=(0,r.createContext)(null);function o(){const e=(0,r.useContext)(a);if(!e)throw new Error("useProfileGroup was called outside of ProfileGroupProvider");return e}const l={name:"Loading",activeProfileIndex:0,transactionID:null,metadata:{},measurements:{},traceID:"",profiles:[]};function h(e){const t=(0,r.useMemo)((()=>e.input?(0,s.B_)(e.input,e.traceID,e.type):l),[e.input,e.traceID,e.type]);return(0,n.tZ)(a.Provider,{value:t,children:e.children})}h.displayName="ProfileGroupProvider"}}]);
//# sourceMappingURL=../sourcemaps/app_views_profiling_profileGroupProvider_tsx.cdfde636c7f941d95ae0139641ac9568.js.map