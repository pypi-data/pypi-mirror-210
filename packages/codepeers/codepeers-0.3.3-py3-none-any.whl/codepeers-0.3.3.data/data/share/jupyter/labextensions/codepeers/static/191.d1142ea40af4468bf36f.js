"use strict";(self.webpackChunkcodepeers=self.webpackChunkcodepeers||[]).push([[191],{20191:function(t,e,s){var r=this&&this.__createBinding||(Object.create?function(t,e,s,r){void 0===r&&(r=s);var n=Object.getOwnPropertyDescriptor(e,s);n&&!("get"in n?!e.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return e[s]}}),Object.defineProperty(t,r,n)}:function(t,e,s,r){void 0===r&&(r=s),t[r]=e[s]}),n=this&&this.__exportStar||function(t,e){for(var s in t)"default"===s||Object.prototype.hasOwnProperty.call(e,s)||r(e,t,s)};Object.defineProperty(e,"__esModule",{value:!0}),n(s(52982),e)},52982:(t,e)=>{var s,r;Object.defineProperty(e,"__esModule",{value:!0}),e.SSE=e.SSEOptionsMethod=void 0,function(t){t[t.INITIALIZING=-1]="INITIALIZING",t[t.CONNECTING=0]="CONNECTING",t[t.OPEN=1]="OPEN",t[t.CLOSED=2]="CLOSED"}(s||(s={})),(r=e.SSEOptionsMethod||(e.SSEOptionsMethod={})).GET="GET",r.POST="POST",e.SSE=class{constructor(t,e){if(this.url=t,this.options=e,this.listeners={},this.readyState=s.INITIALIZING,this.chunk="",this.progress=0,!t)throw new Error("url cannot be null");if(!e||!e.method)throw new Error("Method is mandatory in `options`")}addEventListener(t,e){this.listeners[t]=this.listeners[t]||[],-1===this.listeners[t].indexOf(e)&&this.listeners[t].push(e)}removeEventListener(t,e){if(!this.listeners[t])return;const s=this.listeners[t].filter((t=>t!==e));s.length?this.listeners[t]=s:delete this.listeners[t]}stream(){this._setReadyState(s.CONNECTING);const t=new XMLHttpRequest;t.onreadystatechange=t=>this._checkStreamClosed(t),t.onprogress=t=>this._onStreamProgress(t),t.onload=t=>this._onStreamLoaded(t),t.onerror=t=>this._onStreamFailure(t),t.onabort=t=>this._onStreamFailure(t),t.open(this.options.method,this.url);for(const e in this.options.headers)t.setRequestHeader(e,this.options.headers[e]);t.withCredentials=!!this.options.withCredentials,t.send(this.options.payload),this.xhr=t}close(){var t;this.readyState!==s.CLOSED&&(null===(t=this.xhr)||void 0===t||t.abort(),this.xhr=void 0,this._setReadyState(s.CLOSED))}dispatchEvent(t){if(!t)return!0;const e="on"+t.type;return(!this.hasOwnProperty(e)||(this[e].call(this,t),!t.defaultPrevented))&&(!this.listeners[t.type]||this.listeners[t.type].every((e=>(e(t),!t.defaultPrevented))))}_setReadyState(t){const e=new CustomEvent("readystatechange");e.readyState=t,this.readyState=t,this.dispatchEvent(e)}_onStreamFailure(t){const e=new CustomEvent("error");e.reason=t,this.dispatchEvent(e),this.close()}_onStreamProgress(t){if(!this.xhr)return;if(200!==this.xhr.status)return void this._onStreamFailure(t);if(this.readyState===s.CONNECTING){const t=new CustomEvent("open");this.dispatchEvent(t),this._setReadyState(s.OPEN)}const e=this.xhr.responseText.substring(this.progress);this.progress+=e.length,e.split(/(\r\n|\r|\n){2}/g).forEach((t=>{if(0===t.trim().length){const t=this._parseEventChunk(this.chunk.trim());null!==t&&(this.dispatchEvent(t),this.chunk="")}else this.chunk+=t}))}_onStreamLoaded(t){this._onStreamProgress(t);const e=this._parseEventChunk(this.chunk);null!==e&&(this.dispatchEvent(e),this.chunk="")}_parseEventChunk(t){if(!t||!t.length)return null;const e={id:null,retry:null,data:"",event:"message"};t.split(/\n|\r\n|\r/).forEach((t=>{const s=(t=t.trimEnd()).indexOf(":");if(s<=0)return;const r=t.substring(0,s);if(!(r in e))return;const n=t.substring(s+1).trimLeft();"data"===r?e[r]+=n:e[r]=n}));const s=new CustomEvent(e.event);return s.data=e.data,s.id=e.id,s}_checkStreamClosed(t){this.xhr&&this.xhr.readyState===XMLHttpRequest.DONE&&this._setReadyState(s.CLOSED)}}}}]);